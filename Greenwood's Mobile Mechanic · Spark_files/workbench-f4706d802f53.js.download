performance.mark("js-parse-end:workbench-f4706d802f53.js");
(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[3201,15397,16902,19667,28773,28970,40235,41642,45338,57293,57431,60229,71974,72560,73575,76949,85243,95721],{1631:(e,t,n)=>{"use strict";n.d(t,{BR:()=>w,a_:()=>S,lh:()=>N});var a,i=n(74848),r=n(16522),s=n(41738),o=n(49851),l=n(38621),c=n(69726),d=n(26108),u=n(40090),m=n(34164),p=n(96540),h=n(25641),f=n(2635),g=n(33592),y=n(23967),b=n(89237),x=n(15518),v=n(26100);function w(e){let t,n,a,s,o,c,d,y,b,w,C,k,E=(0,r.c)(46),{ref:j,reference:A,message:I,onClick:T,onRemove:R,size:M,fullWidth:L,getReferenceVersion:P,isImplicitReference:D}=e,$=(0,g.b)(),F=(0,f.pn)(_),O=(0,f.A3)("selectedThreadID"),B=(0,p.useId)();if(!(0,h.vg)().has(A.type))return null;E[0]!==R?(t=e=>{R&&("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),R())},E[0]=R,E[1]=t):t=E[1];let U=t;E[2]!==F||E[3]!==$||E[4]!==I||E[5]!==T||E[6]!==A||E[7]!==O?(n=e=>{if(!T||(T(A,e),!e.defaultPrevented)){if(!F){if(("issue"===A.type||"pull-request"===A.type||"discussion"===A.type)&&(window.open(A.url,"_blank"),self.focus()),["file","thread-scoped-file"].includes(A.type)){let e=O?`/copilot/c/${O}`:"/copilot";e+=`?reference_id=${(0,h.Vb)(A)}`,I&&(e+=`&message_index=${I.messageIndex}`),window.open(e,"_blank");return}["repository","folder","third-party","image","issue","pull-request","loop-node","github-url","job"].includes(A.type)||(e.preventDefault(),$.selectReference(A))}}},E[2]=F,E[3]=$,E[4]=I,E[5]=T,E[6]=A,E[7]=O,E[8]=n):n=E[8];let W=n;E[9]!==A?(a=S(A),E[9]=A,E[10]=a):a=E[10];let V=a;E[11]!==P||E[12]!==A?(s=P?.(A),E[11]=P,E[12]=A,E[13]=s):s=E[13];let G=s;E[14]!==A?(o=(0,h.JP)(A),E[14]=A,E[15]=o):o=E[15];let z="small"===M&&x.A.small,H=L&&x.A.fullWidth,q=D&&x.A.implicitReference;E[16]!==z||E[17]!==H||E[18]!==q?(c=(0,m.$)(x.A.referenceToken,z,H,q),E[16]=z,E[17]=H,E[18]=q,E[19]=c):c=E[19];let K=R&&B;return E[20]!==V||E[21]!==A.type?(d=V&&(0,i.jsx)(V,{size:"small",className:(0,m.$)(x.A.icon,V===l.IssueOpenedIcon&&x.A.openIcon,V===l.GitPullRequestIcon&&x.A.openIcon,V===l.IssueClosedIcon&&x.A.closedIcon,V===l.GitPullRequestClosedIcon&&x.A.pullRequestClosedIcon,V===l.GitMergeIcon&&x.A.pullRequestMergedIcon),"data-testid":"loading"===A.type?"reference-token-loading":void 0}),E[20]=V,E[21]=A.type,E[22]=d):d=E[22],E[23]!==A?(y="loading"===A.type?(0,i.jsx)("span",{className:x.A.loadingName,children:(0,i.jsx)(u.r,{"aria-hidden":"true"})}):(0,i.jsx)("span",{className:x.A.name,children:(0,h.z$)(A)}),E[23]=A,E[24]=y):y=E[24],E[25]!==A.range||E[26]!==A.type?(b="thread-scoped-snippet"===A.type&&A.range&&(0,i.jsx)("span",{className:x.A.description,children:A.range.start===A.range.end?`L${A.range.start}`:`L${A.range.start}-L${A.range.end}`}),E[25]=A.range,E[26]=A.type,E[27]=b):b=E[27],E[28]!==G?(w=void 0!==G&&(0,i.jsx)("span",{className:x.A.trailingVisual,children:(0,i.jsx)(v.g,{version:G})}),E[28]=G,E[29]=w):w=E[29],E[30]!==B||E[31]!==R||E[32]!==M?(C=R&&(0,i.jsx)(N,{size:M,onRemove:R,descriptionId:B}),E[30]=B,E[31]=R,E[32]=M,E[33]=C):C=E[33],E[34]!==W||E[35]!==U||E[36]!==j||E[37]!==K||E[38]!==d||E[39]!==y||E[40]!==b||E[41]!==w||E[42]!==C||E[43]!==o||E[44]!==c?(k=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("a",{href:o,className:c,onKeyDown:U,onClick:W,ref:j,"aria-describedby":K,children:[d,y,b,w,C]})}),E[34]=W,E[35]=U,E[36]=j,E[37]=K,E[38]=d,E[39]=y,E[40]=b,E[41]=w,E[42]=C,E[43]=o,E[44]=c,E[45]=k):k=E[45],k}function _(e){return"immersive"===e.mode}function S(e){switch(e.type){case"figma":return E;case"file":return l.FileIcon;case"folder":return l.FileDirectoryFillIcon;case"file-diff":return l.FileDiffIcon;case"snippet":return l.CodeIcon;case"repository":return l.RepoIcon;case"symbol":return l.CodeSquareIcon;case"commit":return l.GitCommitIcon;case"pull-request":if("pull-request"===e.type){if(e.draft&&"open"===e.state)return l.GitPullRequestDraftIcon;switch(e.state){case"open":default:return l.GitPullRequestIcon;case"closed":return l.GitPullRequestClosedIcon;case"merged":return l.GitMergeIcon}}return;case"repo-instructions":case"org-instructions":return l.NoteIcon;case"issue":if("issue"===e.type)switch(e.state){case"open":default:return l.IssueOpenedIcon;case"closed":return l.IssueClosedIcon;case"not_planned":return l.SkipIcon}return;case"draft-issue":case"draft-update-issue":return l.IssueDraftIcon;case"discussion":return l.CommentDiscussionIcon;case"web-search-result":if("web-search-result"===e.type)if("bing_search"===e.reference_type)return s._;else return l.GlobeIcon;return;case"thread-scoped-file":case"thread-scoped-snippet":return"language"in e&&y.Yr.has(e.language)?l.MarkdownIcon:l.CodeIcon;case"loop-node":return j;case"loop-execution":return C;case"loading":return c.A;case"copilot-space":return l.SpaceIcon;case"github-url":return l.LinkIcon;case"job":return()=>k(e);default:return}}function C(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:x.A.loopsIconOuter,children:(0,i.jsx)(o.LP,{className:x.A.loopsIcon})}),t[0]=e):e=t[0],e}function k(e){let t=(0,r.c)(2);if(e.jobFailed){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{className:x.A.jobIconOuter,style:{color:"var(--bgColor-danger-emphasis, var(--color-scale-red-4))"},children:(0,i.jsx)(l.XCircleFillIcon,{})}),t[0]=e):e=t[0],e}{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{className:x.A.jobIconOuter,children:(0,i.jsx)(l.PlayIcon,{})}),t[1]=e):e=t[1],e}}function E(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:x.A.figmaIconOuter,children:(0,i.jsx)(b._,{className:x.A.figmaIcon})}),t[0]=e):e=t[0],e}function j(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:x.A.nodeIconOuter,children:(0,i.jsx)(l.NodeIcon,{size:16})}),t[0]=e):e=t[0],e}let N=e=>{let t,n,a,s,o=(0,r.c)(12),{size:c,onRemove:u,descriptionId:m,onMouseOver:p,onMouseLeave:h}=e;return o[0]!==u?(t=e=>{e.stopPropagation(),e.preventDefault(),u()},o[0]=u,o[1]=t):t=o[1],o[2]!==h||o[3]!==p||o[4]!==c||o[5]!==t?(n=(0,i.jsx)(d.K,{tabIndex:-1,"aria-hidden":!0,size:c,icon:l.XIcon,"aria-label":"Remove",onClick:t,tooltipDirection:"n",variant:"invisible",className:x.A.removeButton,onMouseOver:p,onMouseLeave:h}),o[2]=h,o[3]=p,o[4]=c,o[5]=t,o[6]=n):n=o[6],o[7]!==m?(a=(0,i.jsx)("span",{hidden:!0,id:m,children:"press backspace or delete to remove"}),o[7]=m,o[8]=a):a=o[8],o[9]!==n||o[10]!==a?(s=(0,i.jsxs)(i.Fragment,{children:[n,a]}),o[9]=n,o[10]=a,o[11]=s):s=o[11],s};try{w.displayName||(w.displayName="ReferenceToken")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}try{C.displayName||(C.displayName="LoopReferenceIcon")}catch{}try{k.displayName||(k.displayName="StylizedJobIcon")}catch{}try{E.displayName||(E.displayName="StylizedFigmaIcon")}catch{}try{j.displayName||(j.displayName="StylizedNodeIcon")}catch{}try{N.displayName||(N.displayName="RemoveReferenceTokenButton")}catch{}},1747:(e,t,n)=>{"use strict";n.d(t,{BH:()=>M,xx:()=>$,tZ:()=>F,wI:()=>O});var a=n(74848),i=n(16522),r=n(2635),s=n(42312),o=n(33535),l=n(6551),c=n(40104),d=n(50899),u=n(96540),m=n(93380),p=n(35247),h=n(79064),f=n(7812),g=n(33592),y=n(25641),b=n(82075),x=n(46996);let v=["thread-scoped-file","draft-issue","draft-update-issue"],w=e=>!!e.isUserEdited,_=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,x.A)(t.get(e),n)),S=(e,t)=>!_(new Map(e.filter(e=>v.includes(e.type)).map(e=>[(0,y.Vb)(e),e])),new Map(t.filter(e=>v.includes(e.type)).map(e=>[(0,y.Vb)(e),e]))),C=(e,t)=>!_(new Map(Array.from(e).filter(([,e])=>w(e))),new Map(Array.from(t).filter(([,e])=>w(e))));function k(e){return[e.id,e]}function E(e){return null!=e}function j(e){return[(0,y.Vb)(e),e]}function N(e){return null!=e}function A(e){return(0,f.PO)(e)}let I=(0,u.createContext)(void 0),T=new Map,R=[];function M(e){let t,n,c,x,_,M,$,F,O,B,U,W,V,G,z,H,q=(0,i.c)(57),{children:K}=e,Y=(0,o.AI)(!1),X=(0,o.AI)(!1),Z=(0,s.U)(),J=(0,u.useRef)(null),[Q,ee]=(0,u.useState)(null);q[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{ee(t=>t===e?t:e)},q[0]=t):t=q[0];let et=t,[en,ea]=(0,u.useState)(T),[ei,er]=(0,u.useState)(R),[es,eo]=(0,u.useState)(R),[el,ec]=(0,u.useState)(void 0),[ed,eu,em]=(0,m.B)(!1),ep=(0,l.S)((0,r.pn)(P)),eh=(0,r.pn)(L);q[1]!==Y||q[2]!==ep||q[3]!==eh?(n=()=>{ep&&ep!==eh&&(ea(T),er(R),ec(void 0),null===eh&&Y.setValue(!1))},c=[eh,ep,Y],q[1]=Y,q[2]=ep,q[3]=eh,q[4]=n,q[5]=c):(n=q[4],c=q[5]),(0,u.useEffect)(n,c),q[6]===Symbol.for("react.memo_cache_sentinel")?(x=(e,t)=>{let n=void 0===t||t;er(t=>{if(t.includes(e))return t;let n=(0,f.oy)(e),a=t.findIndex(e=>(0,f.oy)(e)===n),i=[...t];return -1===a?i.push(e):i.splice(a,1,e),i}),ec(t=>n||void 0===t||(0,f.oy)(t)===(0,f.oy)(e)?e:t)},q[6]=x):x=q[6];let ef=x;q[7]===Symbol.for("react.memo_cache_sentinel")?(_=e=>{ea(t=>{let n;if(!("isStreaming"in e&&e.isStreaming)&&("new-issue"===e.type||"update-issue"===e.type)){let a=(0,f.oy)(e.id);for(let[i,r]of t)if(i!==e.id&&(0,f.oy)(i)===a&&("new-issue"===r.type||"update-issue"===r.type)&&!r.duplicateOf&&(0,f.ov)(e,r)){let a=t.get(e.id);if(a&&(0,f.ov)(e,a)&&"duplicateOf"in a&&a.duplicateOf===i)return t;n=i;break}}let a=new Map(t);return n&&("new-issue"===e.type||"update-issue"===e.type)?a.set(e.id,{...e,duplicateOf:n}):a.set(e.id,e),a})},q[7]=_):_=q[7];let eg=_;q[8]!==ei||q[9]!==el?(M=e=>{let t=ei.indexOf(e);if(-1===t)return;let n=ei.toSpliced(t,1);el===e&&ec(n[t-1]??n[0]),er(n)},q[8]=ei,q[9]=el,q[10]=M):M=q[10];let ey=(0,d.K)(M);q[11]!==ei||q[12]!==el?($=e=>{if(e){let t=ei;for(let n of e){let e=t.indexOf(n);-1!==e&&(t=t.toSpliced(e,1),el===n&&ec(t[e-1]??t[0]))}er(t)}else er(R),ec(void 0)},q[11]=ei,q[12]=el,q[13]=$):$=q[13];let eb=(0,d.K)($);if(q[14]!==en){for(let[e,t]of(F=new Map,en)){let n=(0,f.oy)(e),a=F.get(n)??[];(!("duplicateOf"in t)||!t.duplicateOf)&&("isStreaming"in t&&t.isStreaming||(a.push(t.id),F.set(n,a)))}for(let e of F.values())e.sort((e,t)=>{let n=en.get(e),a=en.get(t);return"timestamp"in n&&"timestamp"in a?n.timestamp.valueOf()-a.timestamp.valueOf():0});q[14]=en,q[15]=F}else F=q[15];let ex=F;q[16]!==ey||q[17]!==ei||q[18]!==ex?(O=e=>{if(e){for(let t of e)if(ea(e=>{let n=new Map(e);return n.delete(t)?n:e}),ei.includes(t)){let e=(0,f.oy)(t),n=ex.get(e),a=n?.indexOf(t)??-1,i=n?.[a-1];i?ef(i,!1):ey(t)}}else ea(T),er(R),ec(void 0)},q[16]=ey,q[17]=ei,q[18]=ex,q[19]=O):O=q[19];let ev=(0,d.K)(O);q[20]!==Y.value||q[21]!==ei?(B=()=>Y.value?ei:R,q[20]=Y.value,q[21]=ei,q[22]=B):B=q[22];let ew=(0,d.K)(B);q[23]!==Z||q[24]!==Y?(U=e=>{Y.setValue(!0),queueMicrotask(()=>{Z.current?.focus()}),void 0!==e&&(J.current=e)},q[23]=Z,q[24]=Y,q[25]=U):U=q[25];let e_=U;q[26]!==Y||q[27]!==X?(W=()=>{Y.setValue(!1),X.setValue(!1)},q[26]=Y,q[27]=X,q[28]=W):W=q[28];let eS=W;q[29]!==X?(V=()=>X.setValue(!0),q[29]=X,q[30]=V):V=q[30];let eC=V;q[31]!==X?(G=()=>X.setValue(!1),q[31]=X,q[32]=G):G=q[32];let ek=G;q[33]!==ey||q[34]!==eb||q[35]!==eS||q[36]!==ek||q[37]!==Z||q[38]!==Q||q[39]!==em||q[40]!==eu||q[41]!==ew||q[42]!==Y||q[43]!==X||q[44]!==en||q[45]!==ei||q[46]!==es||q[47]!==e_||q[48]!==eC||q[49]!==ev||q[50]!==el||q[51]!==ed||q[52]!==ex?(z={items:en,versionedItems:ex,contentPreviewRef:Z,isContentPreviewOpen:Y,isResourcePanelOpen:X,getOpenItems:ew,allOpenItems:ei,openItemsBeforeSubthreadChange:es,selectedItem:el,createPrDialogOpener:Q,setCreatePrDialogOpener:et,updateItem:eg,setOpenItemsBeforeSubthreadChange:eo,openItem:ef,closeItem:ey,closeItems:eb,openPreviewPane:e_,closePreviewPane:eS,openResourcePanel:eC,closeResourcePanel:ek,removeItems:ev,showLoadingState:ed,enableLoadingState:eu,disableLoadingState:em,returnFocusElementRef:J},q[33]=ey,q[34]=eb,q[35]=eS,q[36]=ek,q[37]=Z,q[38]=Q,q[39]=em,q[40]=eu,q[41]=ew,q[42]=Y,q[43]=X,q[44]=en,q[45]=ei,q[46]=es,q[47]=e_,q[48]=eC,q[49]=ev,q[50]=el,q[51]=ed,q[52]=ex,q[53]=z):z=q[53];let eE=z;return!function(e){let t,n,a=(0,i.c)(5),{updateItem:r,openItem:s,openPreviewPane:o}=e;a[0]!==s||a[1]!==o||a[2]!==r?(t=()=>{if(!p.W.copilotRedirectDiffViewToImmersive)return;let e=h.Jt.getCopilotDiffReferences();if(e&&0!==e.length){for(let t of e){let e=(0,f.g)(t);r(e),s(e.id)}o(),h.Jt.removeCopilotDiffReferences()}},n=[r,s,o],a[0]=s,a[1]=o,a[2]=r,a[3]=t,a[4]=n):(t=a[3],n=a[4]),(0,u.useEffect)(t,n)}(eE),D(eE),!function(e){let t,n,a,s=(0,i.c)(10),{items:o,removeItems:l,updateItem:c}=e,{currentReferences:d,messages:m,selectedThreadID:p}=(0,r.Pk)(),h=(0,g.b)(),x=(0,u.useRef)(o),_=(0,u.useRef)(d);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,b.A)("sessionStorage"),s[0]=t):t=s[0];let I=t;s[1]!==d||s[2]!==o||s[3]!==h||s[4]!==m.length||s[5]!==l||s[6]!==p||s[7]!==c?(n=()=>{let e=C(x.current,o);x.current=o;let t=S(_.current,d);if(_.current=d,e){let e=new Map(Array.from(o.values()).filter(w).map(A).filter(N).map(j)),t=new Set;for(let n of d)if(v.includes(n.type)){let a=(0,y.Vb)(n);t.add(a);let i=e.get(a);i?S([i],[n])&&h.addReference(i,"content-preview"):h.removeReference(n)}for(let[n,a]of e)t.has(n)||h.addReference(a,"content-preview")}else if(t){let e=new Map(d.map(e=>(0,f.oR)({ref:e,messageIndex:m.length})).filter(E).map(k)),t=new Set;for(let[n,a]of o)if(w(a)){t.add(n);let i=e.get(n);null!=i?C(new Map([[i.id,i]]),new Map([[a.id,a]]))&&c(i):(l([n]),I.removeItem(`edited-${p}-${n}`))}for(let[n,a]of e)t.has(n)||c(a)}},a=[o,h,d,m.length,l,c,I,p],s[1]=d,s[2]=o,s[3]=h,s[4]=m.length,s[5]=l,s[6]=p,s[7]=c,s[8]=n,s[9]=a):(n=s[8],a=s[9]),(0,u.useEffect)(n,a)}(eE),q[54]!==K||q[55]!==eE?(H=(0,a.jsx)(I,{value:eE,children:K}),q[54]=K,q[55]=eE,q[56]=H):H=q[56],H}function L(e){return e.selectedThreadID}function P(e){return e.selectedThreadID}let D=e=>{let t,n,a=(0,i.c)(5),{updateItem:s}=e,{messagesLoading:o,selectedThreadID:l}=(0,r.Pk)(),d=`edited-${l}`;a[0]!==o.state||a[1]!==d||a[2]!==s?(t=()=>{let e=(0,c.MV)(d);if(e&&"loaded"===o.state)for(let t of e)s(t)},n=[d,s,o.state],a[0]=o.state,a[1]=d,a[2]=s,a[3]=t,a[4]=n):(t=a[3],n=a[4]),(0,u.useEffect)(t,n)};function $(){let e=(0,u.use)(I);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function F(){let e=(0,u.use)(I);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isContentPreviewOpen)}function O(){let e=(0,u.use)(I);if(!e)throw Error("useResourcePanelOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isResourcePanelOpen)}try{I.displayName||(I.displayName="ContentPreviewContext")}catch{}try{M.displayName||(M.displayName="ContentPreviewProvider")}catch{}},2970:(e,t,n)=>{"use strict";n.d(t,{c:()=>S});var a=n(74848),i=n(73189),r=n(34164),s=n(96540),o=n(75986),l=n(18377),c=n(24347),d=n(35220),u=n(9214);let m=(0,s.createContext)({actionsOpen:!1,setActionsOpen:i.l}),p=({children:e})=>{let[t,n]=(0,s.useState)(!1),i=(0,s.useMemo)(()=>({actionsOpen:t,setActionsOpen:n}),[t]);return(0,a.jsx)(m,{value:i,children:e})};p.displayName="ListItemActionsProvider";try{m.displayName||(m.displayName="ActionsContext")}catch{}var h=n(29622),f=n(77177),g=n(29731);function y({style:e,className:t,children:n}){return(0,a.jsx)("div",{className:(0,r.$)("MetadataContainer-module__container--nU0s9",t),style:e,...(0,g.G)("list-view-item-metadata"),children:n})}try{y.displayName||(y.displayName="ListItemMetadataContainer")}catch{}var b=n(49744),x=n(60257),v=n(27603),w=n(74501);let _=({ref:e,children:t,isActive:n=!1,title:i,metadata:m,secondaryActions:p,style:g,className:_,metadataContainerStyle:S,metadataContainerClassName:C,as:k,...E})=>{let{idPrefix:j}=(0,o.If)(),{isSelectable:N}=(0,c.v)(),{variant:A}=(0,d.e)(),{anyItemsWithActionBar:I,hasResizableActionsWithActionBar:T}=(0,l.Z)(),R=(0,s.useId)(),{isSelected:M,onSelect:L}=(0,x.r)(),{status:P}=(0,v.x)(),{title:D,titleAction:$,headingRef:F}=(0,w.J)(),{description:O}=(0,f.L)(),{hasNewActivity:B}=(0,b.I)(),{alignment:U}=(0,h.m)(),W=(0,s.useRef)(null);(0,s.useEffect)(()=>{"function"==typeof e?e(W.current):e&&(e.current=W.current)},[e]),(0,s.useEffect)(()=>{W.current&&n&&document.activeElement?.tagName==="BODY"&&W.current.focus()});let V=(0,s.useCallback)(e=>{switch(e.key){case"Enter":if($){let t=document.activeElement,n=W.current===t,a=F.current&&(F.current===t||F.current.contains(t));(n||a)&&$(e)}break;case" ":if(!N||W?.current!==document.activeElement)break;e.preventDefault(),L(!M);break;case"Escape":W?.current?.focus()}},[$,N,L,M,F]),G=(0,s.useCallback)(()=>{let e=M?"Selected":"",t=B?"New activity":"",n=!!p,a=Array.isArray(m)&&m.length>0||m&&!Array.isArray(m),i="";(a||n)&&(i="More information available below");let r=[D,P].filter(e=>e.trim()).join(": ");try{r=r.replace(/(?<!\.)\.+$/,"")}catch{for(;r.endsWith(".");)r=r.substring(0,r.length-1)}let s=[e,r,O,t,i].filter(e=>e.trim()).join(". ");return s.endsWith(".")?s:`${s}.`},[p,m,M,B,D,P,O]);return(0,a.jsxs)(k||"li",{ref:W,id:`${j}-list-view-node-${R}`,className:(0,r.$)("ListItem-module__listItem--k4eMk",M&&"ListItem-module__selected--WTEJT","compact"===A&&"ListItem-module__compact--f4FSR","center"===U&&"ListItem-module__centerAligned--PWSgp",I&&T&&"ListItem-module__hasActionBar--t14sR",_),tabIndex:-1,"aria-label":G(),style:g,onKeyDown:V,...E,children:[i,t,Array.isArray(m)&&m.length>0?(0,a.jsx)(y,{style:S,className:C,children:m.map((e,t)=>(0,a.jsx)(s.Fragment,{children:e},t))}):!!(m&&!Array.isArray(m))&&(0,a.jsx)(y,{style:S,className:C,children:m}),p??(I&&(0,a.jsx)(u.L,{}))]})};_.displayName="ListItemBase";let S=({ref:e,children:t,isSelected:n=!1,onSelect:r=i.l,alignment:o,...l})=>{let{setSelectedCount:d}=(0,c.v)(),u=(0,s.useRef)(n);u.current=n,(0,s.useEffect)(()=>{d(e=>n?e+1:Math.max(0,e-1))},[n,d]),(0,s.useEffect)(()=>()=>{u.current&&d(e=>Math.max(0,e-1))},[d]);let m=(0,s.useMemo)(()=>({isSelected:n,onSelect:r}),[n,r]);return(0,a.jsx)(p,{children:(0,a.jsx)(w.y,{children:(0,a.jsx)(x.W,{value:m,children:(0,a.jsx)(b.t,{children:(0,a.jsx)(f.O,{children:(0,a.jsx)(v.u,{children:(0,a.jsx)(h.F,{alignment:o,children:(0,a.jsx)(_,{...l,ref:e,children:t})})})})})})})})};S.displayName="ListItem"},4559:(e,t,n)=>{"use strict";n.d(t,{C:()=>s,i:()=>o});var a=n(56038),i=n(69599),r=n(46493);function s(e,t){(0,i.G7)("arianotify_comprehensive_migration")?o(l(e),{...t,element:t?.element??e}):(0,i.G7)("primer_live_region_element")&&t?.element===void 0?(0,r.Cj)(e,{politeness:t?.assertive?"assertive":"polite"}):o(l(e),t)}function o(e,t){let{assertive:n,element:s}=t??{};if((0,i.G7)("arianotify_comprehensive_migration"))try{(s?.isConnected?s:a.XC).ariaNotify(e,{priority:n?"high":"normal"})}catch(e){console.error("Error calling ariaNotify:",e)}else{var o,l;let t;(0,i.G7)("primer_live_region_element")&&void 0===s?(0,r.iP)(e,{politeness:n?"assertive":"polite"}):(o=e,l=n,(t=s??a.XC?.querySelector(l?"#js-global-screen-reader-notice-assertive":"#js-global-screen-reader-notice"))&&(t.textContent===o?t.textContent=`${o}\u00A0`:t.textContent=o))}}function l(e){return(e.getAttribute("aria-label")||e.innerText||"").trim()}n(89272)},4929:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var a=n(74848),i=n(29731),r=n(34164);function s({children:e,alignment:t,variant:n,...s}){return(0,a.jsx)("div",{...(0,i.G)("list-view-item-metadata-item"),...s,className:(0,r.$)("Metadata-module__metadata--ODMG0","primary"===n?"Metadata-module__primary--S8Orc":"Metadata-module__secondary--1te4w","right"===t&&"Metadata-module__alignRight--A1PHa",s.className),children:e})}try{s.displayName||(s.displayName="ListItemMetadata")}catch{}},5989:(e,t,n)=>{"use strict";n.d(t,{e$:()=>u,zW:()=>m});var a=n(74848),i=n(53627),r=n(76648),s=n(96459),o=n(96540),l=n(88315),c=n(41339);let d=(0,o.createContext)(void 0);function u({children:e}){let t=(0,s.Z)(),{workbench:n}=(0,r.B)(),{sparkFileUrl:u,sparkBaseUrl:m}=(0,c._C)(),[p,h]=(0,o.useState)(!1),[f,g]=(0,o.useState)(!0),[y,b]=(0,o.useState)(!1),[x,v]=(0,o.useState)(!1),w=(0,o.useRef)(null),[_,S]=(0,o.useState)("preview"),[C,k]=(0,o.useState)(!0),[E,j]=(0,o.useState)(null),N="preview"!==_;(0,o.useEffect)(()=>{let e=window.location.pathname;if((e.startsWith("/copilot/spark")||c.qE.test(e))&&!e.includes("file")&&N){let e=E||l.V8;E?(0,i.bj)(u({sparkId:n.id,path:e})):(j(e),t(u({sparkId:n.id,path:e})))}},[N,E,t,u,n.id]),(0,o.useEffect)(()=>{let e=window.location.pathname;if(e.includes("file")){let t=e.match(/file\/(.+)/);t&&t[1]&&j(decodeURIComponent(t[1]))}},[]);let A=(0,o.useCallback)(e=>{g("boolean"==typeof e?e:!f)},[f]),I=(0,o.useCallback)(e=>{k("boolean"==typeof e?e:!C)},[C]),T=(0,o.useCallback)(e=>{S(e),"preview"===e&&(0,i.bj)(m(n))},[m,n]),R=(0,o.useCallback)(()=>{let e=w.current?.src;w.current?.setAttribute("src",""),w.current?.setAttribute("src",e??"")},[]),M=(0,o.useMemo)(()=>({createRepositoryModelOpen:p,fileTreeShown:C,minimapEnabled:x,mobileViewActive:y,previewBrowserRef:w,refreshPreview:R,setCreateRepositoryModelOpen:h,setMinimapEnabled:v,setMobileViewActive:b,setWorkingMode:T,sidePanelOpen:f,toggleFileTree:I,toggleSidePanel:A,workingMode:_,setLastViewedFile:j}),[p,C,x,y,R,T,f,I,A,_]);return(0,a.jsx)(d,{value:M,children:e})}function m(){let e=(0,o.use)(d);if(!e)throw Error("useWorkbenchUI must be used within an WorkbenchUIContextProvider");return e}try{d.displayName||(d.displayName="WorkbenchUIContext")}catch{}try{u.displayName||(u.displayName="WorkbenchUIContextProvider")}catch{}},6665:(e,t,n)=>{"use strict";n.d(t,{T:()=>u});var a=n(78314),i=n(96518),r=n(59672),s=n(91747),o=n(30459),l=n(96379),c=n(96540),d=n(35898);function u(){let e,t,n,u,m,{sendAnalyticsEvent:p}=(0,o.s)(),h=(n=(e=(0,a.t)(),t=(0,d.i)(),(0,c.useMemo)(()=>({react_app:"code-view",repository_id:e.id,repository_nwo:`${e.ownerLogin}/${e.name}`,repository_public:e.public,repository_is_fork:e.isFork,actor_id:t?.id,actor_login:t?.login}),[e,t])),u=(0,a.t)(),m=(0,i.yH)(r.tTz,{owner:u.ownerLogin,repo:u.name}),(0,c.useCallback)((e,t,a)=>{let i={target:e,interaction:t,context:a,...n,...{url:window.location.href,user_agent:window.navigator.userAgent,browser_width:window.innerWidth,browser_languages:window.navigator.languages.join(",")}};(0,l.lS)(m,{method:"POST",body:i})},[n,m])),f=(0,s.u)("code_nav_ui_events");return{sendRepoClickEvent:(0,c.useCallback)((e,t={})=>{p("repository.click",e,t),f&&h(e,"click",t)},[p,h,f]),sendRepoKeyDownEvent:(0,c.useCallback)((e,t={})=>{p("repository.keydown",e,t),f&&h(e,"keydown",t)},[p,h,f]),sendStats:(0,c.useCallback)((e,t={})=>{p(e,"",t),f&&h(e,"stats",t)},[p,h,f]),sendMarketplaceActionEvent:(0,c.useCallback)((e,t={})=>{p("marketplace.action.click",e,t)},[p])}}},7808:(e,t,n)=>{"use strict";n.d(t,{z:()=>WebWorker});var a=n(35750),i=n(18150),r=n(85242),s=n(50467);let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){(0,s._)(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};var o=new WeakMap,l=new WeakMap;let MainThreadWorker=class MainThreadWorker{async postMessage(e){if((0,a._)(this,o))return;let t={data:(0,a._)(this,l).call(this,{data:e})};this.onmessage?.(t)}terminate(){(0,r._)(this,o,!0)}constructor(e){(0,i._)(this,o,{writable:!0,value:!1}),(0,s._)(this,"onmessage",void 0),(0,i._)(this,l,{writable:!0,value:void 0}),(0,r._)(this,l,e)}}},7812:(e,t,n)=>{"use strict";n.d(t,{Bx:()=>f,LU:()=>l,PO:()=>y,SI:()=>p,SX:()=>x,by:()=>u,g:()=>m,oR:()=>b,ov:()=>v,oy:()=>o,wN:()=>h,wt:()=>d,yA:()=>g});var a=n(1631),i=n(25641),r=n(51213),s=n(72994);function o(e){return e.split("#")[0]}function l(e,t,n){let a=n.get(e);if(a&&"duplicateOf"in a&&a.duplicateOf)return l(a.duplicateOf,t,n);let i=o(e),r=t.get(i)??[],s=r.indexOf(e);return r.length>1&&-1!==s?s+1:null}function c(e,t){return`file:${e.name}#${t}`}function d(e,t,n,a){switch(e.type){case"thread-scoped-file":return l(c(e,t),n,a)??void 0;case"draft-issue":case"draft-update-issue":return l(b({ref:e,messageIndex:t}).id,n,a)??void 0}}function u(e,t,n){return{type:"file",id:`file:${(0,i.Vb)(e)}#0`,reference:e,messageId:t??r.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function m(e,t,n){let a=e=>({type:"file",id:`file:empty:${e}#${Date.now()}`,messageId:t??r.Wp,name:e,language:"",value:"",isStreaming:!1,isUserEdited:!1,timestamp:n?new Date(n):new Date}),s=e.baseFile?u(e.baseFile):a(e.headFile?.path||""),o=e.headFile?u(e.headFile):a(e.baseFile?.path||""),l=e.headFile||e.baseFile,c=l?.path||"";return{type:"file-diff",id:`file-diff:${(0,i.Vb)(e)}#0`,baseFile:s,headFile:o,name:c,language:(e.headFile?o:s).language,isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date,messageId:t??r.Wp,reference:e}}function p(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??r.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function h(e,t){let{repoOwner:n,repoName:a,id:i}=e;return{type:"job-result",id:`job-result:${n}-${a}-${i}`,messageId:t??r.Wp,name:`Job #${i} in ${n}/${a}`,jobId:Number(i),workflowId:e.workflow?.id,repoOwner:n,repoName:a}}function f(e,t=r.Wp){return{type:"plugin-content",id:`plugin-content:${e.type}:${(0,i.Vb)(e)}`,name:(0,i.z$)(e),icon:(0,a.a_)(e),messageId:t,reference:e}}function g(e){return{type:e.type,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,title:e.name,state:e.state,url:e.href,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}function y(e){switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":case"update-issue":return{type:"update-issue"===e.type?"draft-update-issue":"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(0,s.t)(e.projects),rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,templateFormValuesById:e.defaultValuesById,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags,isBlockingTags:e.isBlockingTags};default:return null}}function b({ref:e,messageIndex:t,messageId:n,timestamp:a}){switch(e.type){case"thread-scoped-file":return function(e,t,n=r.Wp,a){return{type:"file",id:c(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:a?new Date(a):new Date,isStreaming:!1,isUserEdited:n===r.Wp}}(e,t,n,a);case"draft-issue":case"draft-update-issue":return function({ref:e,messageId:t=r.Wp,messageIndex:n}){let a=e.issueNumber?"update-issue":"new-issue";return{type:a,id:`${a}:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,bodyVersion:e.bodyVersion,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(0,s.c)(e.projects),rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,isUserEdited:t===r.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{},issueNumber:e.issueNumber,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}({ref:e,messageIndex:t,messageId:n});default:return null}}function x(e,t,n){let a=o(e.id),i=n.get(a),r=i?.findIndex(t=>t===e.id)??-1,s=i?.[r-1];return s&&t.get(s)}function v(e,t){let n=e=>({tag:e.tag,parentTag:e.parentTag,repository:e.repository,type:e.type,template:e.template,name:e.name,body:e.body,bodyVersion:e.bodyVersion,isUserEdited:e.isUserEdited,issueType:e.issueType,milestone:e.milestone,issueNumber:e.issueNumber,assignees:e.assignees?.slice().sort(),labels:e.labels?.slice().sort(),projects:e.projects?.slice().sort((e,t)=>{let n=`${e.id||""}:${e.title||""}`,a=`${t.id||""}:${t.title||""}`;return n.localeCompare(a)}),rawProjectsInput:e.rawProjectsInput?.slice().sort(),defaultValuesById:e.defaultValuesById,blockedByTags:e.blockedByTags?.slice().sort(),isBlockingTags:e.isBlockingTags?.slice().sort()});return JSON.stringify(n(e))===JSON.stringify(n(t))}},9214:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var a=n(74848),i=n(91230),r=n(29731),s=n(34164),o=n(96540),l=n(18377);let c=({anchorIcon:e,style:t,className:n,label:c="list item action bar",...d})=>{let{setAnyItemsWithActionBar:u,setHasResizableActionsWithActionBar:m}=(0,l.Z)();return(0,o.useEffect)(()=>u(!0),[u]),(0,o.useEffect)(()=>{d.actions&&m(!0)},[d.actions,m]),(0,a.jsx)("div",{className:(0,s.$)("ActionBar-module__container--8I2RB",d.actions&&"ActionBar-module__hasActions--HH0uB",n),style:t,...(0,r.G)("list-view-item-action-bar-container"),children:(0,a.jsx)(i.E7,{...d,label:c,variant:"menu",overflowMenuToggleProps:e?{icon:e}:void 0})})};try{c.displayName||(c.displayName="ListItemActionBar")}catch{}},11418:(e,t,n)=>{"use strict";let a;n.d(t,{H:()=>T});var i=n(35750),r=n(18150),s=n(85242),o=n(88243),l=n(16213),c=n(10204),d=new WeakMap,u=new WeakSet;let AliveSession=class AliveSession extends c.ib{constructor(e,t,n,a,i){super(e,()=>(0,o._)(this,u,m).call(this),n,a,void 0,i),(0,l._)(this,u),(0,r._)(this,d,{writable:!0,value:void 0}),(0,s._)(this,d,t)}};function m(){return p((0,i._)(this,d))}async function p(e){let t=await h(e);return t&&t.url&&t.token?f(t.url,t.token):null}async function h(e){let t=await fetch(e,{headers:{Accept:"application/json"}});if(t.ok)return t.json();if(404===t.status)return null;throw Error("fetch error")}async function f(e,t){let n=await fetch(e,{method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":t}});if(n.ok)return n.text();throw Error("fetch error")}var g=n(70170),y=n(34095),b=n(82075),x=n(23683);function v(e,{channel:t,type:n,data:a}){for(let i of e)i.dispatchEvent(new CustomEvent(`socket:${n}`,{bubbles:!1,cancelable:!1,detail:{name:t,data:a}}))}var w=new WeakMap,_=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,E=new WeakSet;let j=class AliveSessionProxy{subscribe(e){let t=(0,i._)(this,_).add(...e);t.length&&(0,i._)(this,w).port.postMessage({subscribe:t});let n=new Set(t.map(e=>e.name)),a=e.reduce((e,t)=>{let a=t.topic.name;return(0,c.JR)(a)&&!n.has(a)&&e.add(a),e},new Set);a.size&&(0,i._)(this,w).port.postMessage({requestPresence:Array.from(a)})}unsubscribeAll(...e){let t=(0,i._)(this,_).drain(...e);t.length&&(0,i._)(this,w).port.postMessage({unsubscribe:t});let n=(0,i._)(this,S).removeSubscribers(e);this.sendPresenceMetadataUpdate(n)}updatePresenceMetadata(e){let t=new Set;for(let n of e)(0,i._)(this,S).setMetadata(n),t.add(n.channelName);this.sendPresenceMetadataUpdate(t)}sendPresenceMetadataUpdate(e){if(!e.size)return;let t=[];for(let n of e)t.push({channelName:n,metadata:(0,i._)(this,S).getChannelMetadata(n)});(0,i._)(this,w).port.postMessage({updatePresenceMetadata:t})}online(){(0,i._)(this,w).port.postMessage({online:!0})}offline(){(0,i._)(this,w).port.postMessage({online:!1})}hangup(){(0,i._)(this,w).port.postMessage({hangup:!0})}constructor(e,t,n,a,d,u){(0,l._)(this,E),(0,r._)(this,w,{writable:!0,value:void 0}),(0,r._)(this,_,{writable:!0,value:new c.m0}),(0,r._)(this,S,{writable:!0,value:new c.VH}),(0,r._)(this,C,{writable:!0,value:void 0}),(0,r._)(this,k,{writable:!0,value:new Map}),(0,s._)(this,C,d),(0,s._)(this,w,new SharedWorker(`${e}?module=true`,{name:`github-socket-worker-v3-${a}`,type:"module"})),(0,i._)(this,w).port.onmessage=({data:e})=>(0,o._)(this,E,N).call(this,e),(0,i._)(this,w).port.postMessage({connect:{url:t,refreshUrl:n,options:u}})}};function N(e){let{channel:t}=e;if("presence"===e.type){let n=(0,i._)(this,k).get(t);n||(n=(0,g.s)((e,n)=>{(0,i._)(this,C).call(this,e,n),(0,i._)(this,k).delete(t)},100),(0,i._)(this,k).set(t,n)),n((0,i._)(this,_).subscribers(t),e);return}(0,i._)(this,C).call(this,(0,i._)(this,_).subscribers(t),e)}async function A(){let e,t=(e=document.head.querySelector("link[rel=shared-web-socket-src]")?.getAttribute("href"))&&e.startsWith("/")?e:null;if(!t)return;let n=document.head.querySelector("link[rel=shared-web-socket]")?.href??null;if(!n)return;let a=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-refresh-url")??null;if(!a)return;let i=document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-session-id")??null;if(!i)return;let r=(()=>{let e={};if(!(0,x.nr)()&&"SharedWorker"in window&&"true"!==(0,b.A)("localStorage").getItem("bypassSharedWorker"))try{return new j(t,n,a,i,v,e)}catch{}return new AliveSession(n,a,!1,v,e)})();return window.addEventListener("online",()=>r.online()),window.addEventListener("offline",()=>r.offline()),window.addEventListener("pagehide",()=>{"hangup"in r&&r.hangup()}),r}async function I(){return await y.G,A()}function T(){return a||(a=I())}},15518:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a={referenceToken:"ReferenceToken-module__referenceToken--WsIyo",small:"ReferenceToken-module__small--JKhUS",fullWidth:"ReferenceToken-module__fullWidth--b7qQo",implicitReference:"ReferenceToken-module__implicitReference--GPs6x",loadingName:"ReferenceToken-module__loadingName--tXmXP",name:"ReferenceToken-module__name--nPIg4",description:"ReferenceToken-module__description--Md3k_",trailingVisual:"ReferenceToken-module__trailingVisual--X22Ay",removeButton:"ReferenceToken-module__removeButton--BwDIm",icon:"ReferenceToken-module__icon--YHCrp",openIcon:"ReferenceToken-module__openIcon--SCaYN",closedIcon:"ReferenceToken-module__closedIcon--McXYG",pullRequestClosedIcon:"ReferenceToken-module__pullRequestClosedIcon--qLOQA",pullRequestMergedIcon:"ReferenceToken-module__pullRequestMergedIcon--yvGds",figmaIconOuter:"ReferenceToken-module__figmaIconOuter--sVqOV",figmaIcon:"ReferenceToken-module__figmaIcon--lsVAI",loopsIconOuter:"ReferenceToken-module__loopsIconOuter--Ydf4W",loopsIcon:"ReferenceToken-module__loopsIcon--mA94T",nodeIconOuter:"ReferenceToken-module__nodeIconOuter--ooSEn",jobIconOuter:"ReferenceToken-module__jobIconOuter--EyGdP"}},18377:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l,w:()=>o});var a=n(74848),i=n(73189),r=n(96540);let s=(0,r.createContext)({anyItemsWithActionBar:!1,setAnyItemsWithActionBar:i.l,hasResizableActionsWithActionBar:!1,setHasResizableActionsWithActionBar:i.l}),o=({children:e})=>{let[t,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),l=(0,r.useMemo)(()=>({anyItemsWithActionBar:t,setAnyItemsWithActionBar:n,hasResizableActionsWithActionBar:i,setHasResizableActionsWithActionBar:o}),[t,i]);return(0,a.jsx)(s,{value:l,children:e})};o.displayName="ListViewItemsProvider";let l=()=>(0,r.use)(s);try{s.displayName||(s.displayName="ItemsContext")}catch{}},18754:(e,t,n)=>{"use strict";n.d(t,{V:()=>O});var a=n(69599),i=n(76648),r=n(50899),s=n(96379),o=n(96540),l=n(58917),c=n(67225),d=n(18438),u=n(82037),m=n(56305),p=n(41339),h=n(15164),f=n(49080),g=n(24037),y=n(42914),b=n(52776),x=n(35750),v=n(18150),w=n(85242),_=n(25641),S=n(86339);let C={type:"workbench-state",step:"generate_title"};var k=new WeakMap;let FileStreamParser=class FileStreamParser{processTitleChunk(e){(0,w._)(this,k,(0,x._)(this,k)+e);let t=(0,x._)(this,k).split(`
`);(0,w._)(this,k,t.pop()||"")}finalizeTitle(){let e=(0,x._)(this,k).match(/\[\[\[title_start\]\]\](.*?)\[\[\[title_end\]\]\]/),t=(0,x._)(this,k).match(/\[\[\[description_start\]\]\](.*?)\[\[\[description_end\]\]\]/);return{name:e?.[1]?e[1].trim():"",description:t?.[1]?t[1].trim():""}}constructor(){(0,v._)(this,k,{writable:!0,value:""})}};async function E({prompt:e,apiURL:t,authTokenProvider:n,onEvent:a=()=>{},signal:i}){let r=await n.getAuthToken(),s=await (0,_.p)({authToken:r,basePath:t,body:{messages:[{role:"user",name:"topic_message",content:e,copilot_references:[{type:"github.workbenchState",data:C}]}]},integrationId:"spark-agent",method:"POST",path:"/agents/github-workbench",streamingResponse:!0,signal:i});if(!s.ok){let e=Error(`Failed to make CAPI request: ${s.status}`);throw a({type:"ERROR",error:e}),e}let o=s.body?.getReader();if(!o){let e=Error("No reader found in response body");throw a({type:"ERROR",error:e}),e}let l=new S.X(o),c=new FileStreamParser;try{for await(let e of l.stream()){let t=e.choices[0]?.delta.content;t&&c.processTitleChunk(t)}return c.finalizeTitle()}catch(e){throw i?.aborted||a({type:"ERROR",error:e instanceof Error?e:Error(String(e))}),e}}function j(e,t,n=1e3,a){return async function(...i){let r=0;for(;;)try{let t=await e(...i);return r=0,t}catch(o){if(a&&!a(o)||r>=t)throw o;let e=n*Math.pow(2,++r),i=.1*Math.random()*e,s=e+i;await new Promise(e=>setTimeout(e,s))}}}var N=n(17074),A=n(750),I=n(5813),T=n(22169),R=n(88243),M=n(16213),L=new WeakMap,P=new WeakMap,D=new WeakSet;let SecretScanningClient=class SecretScanningClient{async scanContent(e,t){let n=new URL("/api/v1/scan/multipart",(0,x._)(this,L)).toString(),a=new FormData,i=new Blob([e],{type:"text/plain"});a.append("file",i,"content.txt");let r=new Headers;r.set("Authorization",t.authorizationHeaderValue);let s=await (0,R._)(this,D,$).call(this,n,{method:"POST",body:a,headers:r});if(!s.ok)throw Error(`Secret scanning API failed with status ${s.status}`);return await s.json()}constructor(e){(0,M._)(this,D),(0,v._)(this,L,{writable:!0,value:void 0}),(0,v._)(this,P,{writable:!0,value:void 0}),(0,w._)(this,L,"https://scanning-api.github.com"),(0,w._)(this,P,e?.timeoutMs??1e4)}};async function $(e,t={}){try{return await fetch(e,{...t,signal:AbortSignal.timeout((0,x._)(this,P))})}catch(e){if(e instanceof Error&&"TimeoutError"===e.name)throw Error("Request timed out");if(e instanceof Error&&"AbortError"===e.name)throw Error("Request timed out or aborted by user");throw e}}let F=[];function O(){let{workbench:e,copilot:{apiURL:t,ssoOrganizations:n}}=(0,i.B)(),{previousRefinements:x,setPreviousRefinements:v,setCurrentRefinement:w,currentRefinementId:_,currentRefinementSha:S}=(0,d.P9)(),{getFileList:C}=(0,l.AU)(),k=(0,a.G7)("spark_prompt_secret_scanning"),{getFileSyncerV2:R,fileSyncerStarted:M,setFileContentsRef:L}=(0,c.d)(),P=(0,o.useRef)(F),D=(0,o.useRef)(null),{fetchFromCodespaceApi:$}=(0,T.l)(),{isServerConnected:O}=(0,u.sU)(),B=(0,f.s)(),{onError:U,onStatus:W,onSuccess:V,status:{[I.kl.AGENT]:G}}=(0,h.MY)(),{scanSecrets:z}=function(){let{copilot:{ssoOrganizations:e}}=(0,i.B)(),t=(0,o.useMemo)(()=>new y.wn(e.map(e=>e.id)),[e]);return{scanSecrets:(0,o.useCallback)(async e=>{let n=await t.getSecretScanningToken(),a=new SecretScanningClient({timeoutMs:15e3});return await a.scanContent(e,n)},[t])}}(),{id:H,createdAt:q,updatedAt:K,setUpdatedAt:Y,name:X,setName:Z,description:J,setDescription:Q,repositoryUrl:ee,setRepositoryUrl:et,runtimePermanentName:en,friendlyName:ea,setFriendlyName:ei,isMobileSidebarOpen:er,setIsMobileSidebarOpen:es,isLoadingFromModel:eo,setIsLoadingFromModel:el,initialPromptSubmittedRef:ec}=(0,p._C)(),{promptText:ed,setPromptText:eu,promptImage:em,clearImageAttachment:ep,setPromptImage:eh}=(0,m.Cq)(),ef=(0,o.useMemo)(()=>new y.wn(n.map(e=>e.id)),[n]),{snapshotUploadUri:eg}=(0,i.B)(),ey=async()=>{let e={};if(M){let t=R();if(t)for(let n of C()){let a={content:await t?.readFileString(n.path)||"",fileName:n.path};e[n.path]=a}}return e},eb=(0,o.useMemo)(()=>{let e=x.findIndex(e=>e.id===_),t=x;-1!==e&&(t=x.slice(0,e+1));let n=t.findLast(e=>"ai"===e.iteration_type);return n?.suggestions||P.current},[x,_]),ex=(0,r.K)(async(t,n,a)=>{await (0,s.lS)(`/copilot/spark/workbench/${e.id}`,{method:"POST",body:{files:t,previousRefinements:n,suggestions:a,shouldGenerateInitialPrompt:!1}})}),ev=(0,r.K)(async t=>{let n=await (0,s.lS)(`/copilot/spark/workbench/${e.id}/iterations`,{method:"POST",body:{iteration:{prompt:t.prompt,iteration_type:t.iteration_type,files:t.files,sha:t.sha,suggestions:t.suggestions,intent_summary:t.intentSummary,completion_summary:t.completionSummary}}});return await n.json()}),ew=async(t,n,a)=>{let i=await (0,s.lS)(`/copilot/spark/workbench/${e.id}`,{method:"POST",body:{name:t,description:n,runtime:{app:{friendlyName:a}}}});if(!i.ok)return;let r=await i.json();Y(r.updatedAt),Z(r.name),ei(r.runtime.app.friendlyName),Q(r.description)},e_=async t=>{let n=await (0,s.lS)(`/copilot/spark/workbench/${e.id}`,{method:"POST",body:{currentRefinementId:t}});n.ok&&Y((await n.json()).updatedAt)},eS=(0,r.K)(async e=>{}),eC=(0,o.useCallback)(async()=>{let e=x.find(e=>e.sha===S);if(!e||e.id||e.sha&&e.sha!==d.zJ||"user"!==e.iteration_type)return{refinements:x,updatedRefinementId:_,updatedRefinementSha:e?.sha||"",wasUserEdit:!1};let t=R();if(!t)return{refinements:x,updatedRefinementId:_,wasUserEdit:!1,updatedRefinementSha:""};let n=await t.createCommit("Edited Spark",eg,!0);if(!n.sha)return{refinements:x,updatedRefinementId:_,wasUserEdit:!1,updatedRefinementSha:""};e.sha=n.sha;let a=await ev(e),i={...e,id:a.iteration.id,parentId:a.iteration.parentId},r=x.map(e=>e.id===_?i:e);return v(r),w(i.id),{refinements:r,updatedRefinementId:i.id,wasUserEdit:!0,updatedRefinementSha:e.sha}},[_,S,R,x,ev,w,v,eg]),ek=(0,r.K)(async(n,i="refine",r="unknown",s)=>{let o=Date.now(),{attachments:l,shouldReplace:c=!1,additionalTelemetryProperties:d}=s||{};if(!n.trim()||G===I.i.WILL_GENERATE||G===I.i.GENERATING)return{success:!0};W({service:I.kl.AGENT,status:I.i.WILL_GENERATE}),D.current=new AbortController;let u=c?x.slice(0,-1):[...x];try{let s,m=(0,N.u)(),h=await ey();L(h);let f=performance.now(),{refinements:y,updatedRefinementId:b,wasUserEdit:x,updatedRefinementSha:S}=await (0,A.L)(async e=>{s=performance.now();let t=await eC();return B("save_edits",{attempt_number:3-e,success:!0,iteration_id:m,duration_ms:performance.now()-s,total_duration_ms:performance.now()-f}),t},{retries:2,shouldStopRetries:(e,t)=>(B("save_edits",{attempt_number:3-t,success:!1,iteration_id:m,duration_ms:performance.now()-s,total_duration_ms:performance.now()-f,error:e instanceof Error?e.message:String(e)}),!1)});el(!0),W({service:I.kl.AGENT,status:I.i.GENERATING}),x&&_!==b&&(w(_),await e_(_)),u=c?y.slice(0,-1):[...y];let C={prompt:n,iteration_type:"ai",parentId:b,parentSha:S,files:{}};v([...u,C]),w(void 0),ep();let T="generate"===i?"agent":"human",R={...d,source:"use-workbench.ts",iteration_start_time:o,iteration_step:i,iteration_method:r,iteration_uuid:m,prompt_chars:n.length,has_attachment:!!em,attachment_type:em?em.media_type:"",user_type:T};B("change_started",R),k&&(async()=>{await eA(n,T.toString(),R.iteration_uuid)})();let M=new Map(u.map(e=>[e.id,e])),P=u.find(e=>e.id===_)||u[u.length-1],F=[];for(let e=P;e;)F.push(e),e=e.parentId?M.get(e.parentId):void 0;let O=F.reverse().map(e=>e.prompt).filter(e=>null!=e),U=async()=>{if(!("generate"===i&&(!e.name||e.name===p.ew)&&(!e.description||e.description===p.nu)))return;let{name:a,description:r}=await E({prompt:n,apiURL:t,authTokenProvider:ef,onEvent:eS,signal:D.current?.signal});await ew(a,r,void 0)},V=(0,a.G7)("spark_agent_model_opus45")?g.iA.CLAUDE_OPUS_45:g.iA.CLAUDE_SONNET_45,G=async()=>{let t=await $("/iterate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:n,workbenchId:e.id,previousPrompts:O,attachments:l,snapshotUploadUri:eg,imageUrl:em?.url,model:V,featureFlags:{useSeparateSuggestionArgs:(0,a.G7)("copilot_spark_use_separate_suggestion_args"),useNewKv:(0,a.G7)("copilot_spark_new_data_layer"),enableShowPreviewTool:(0,a.G7)("copilot_workbench_show_preview_tool"),enableGitTool:(0,a.G7)("spark_agent_enable_git_tool")},telemetryProperties:R})});if(!t.ok)throw Error(`API request failed with status ${t.status}`);return t},z=j(G,3),H=j(U,3),[q]=await Promise.allSettled([z(),H()]);if("rejected"===q.status)throw q.reason;let K=q.value,{iterationId:Y,parentId:X}=await K.json(),Z=[...u,{...C,id:Y,parentId:X}];return v(Z),w(Y),ex(h,Z,eb),{success:!0}}catch(e){return v(u),w(_),eh(em),U({service:I.kl.AGENT}),{success:!1,error:Error(`Failed to submit prompt: ${e}`)}}finally{(0,b.Db)()}}),eE=(0,r.K)(async()=>{try{await $("/cancel",{method:"POST",headers:{"Content-Type":"application/json"}})}catch{U({service:I.kl.RUNTIME})}el(!1),eu(x.at(-1)?.prompt||""),V({service:I.kl.AGENT}),ec.current=!0;let e=x[x.length-2]||null;e?(w(e.id),v(x.slice(0,-1)),ex({},x.slice(0,-1),eb)):(w(void 0),v([]),ex({},[],eb))}),ej=(0,o.useCallback)(async()=>{ec.current=!0;let e=x[x.length-1];if(!e)return;let t=e.prompt;if(!t)return;let n=await ek(t,"generate","initial_prompt",{shouldReplace:!0});n?.success||eu(t)},[ec,x,eu,ek]);(0,o.useEffect)(()=>{if(!ec.current&&e.shouldGenerateInitialPrompt&&!eo){if(!_&&ed){let e={prompt:ed,iteration_type:"ai",files:{}};v([e]),w(e.id),eu(""),W({service:I.kl.AGENT,status:I.i.WILL_GENERATE_INITIAL})}O&&ej()}},[O]);let eN=(0,r.K)(async(e,t)=>{let n=Date.now(),a=null;try{a=await $("/publish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,isPrivate:"private"===t})})}catch(e){throw B("create_repo",{create_type:"repo",duration_ms:Date.now()-n,error_message:e?e.toString():"Unknown error",success:!1}),e}if(!a.ok)throw B("create_repo",{create_type:"repo",duration_ms:Date.now()-n,error_message:a.statusText,error_code:a.status,success:!1}),Error(`Failed to create repository: ${a.statusText} (${a.status})`);B("create_repo",{create_type:"repo",duration_ms:Date.now()-n,success:!0}),et((await a.json()).repository.url)}),eA=(0,r.K)(async(e,t,n)=>{let a,i=performance.now(),r=!1,s=0;try{let t=await z(e);return s=t.secrets.length,r=!0,{success:!0,scanResponse:t}}catch(e){return r=!1,{success:!1,error:a=e instanceof Error?e:Error("Unknown secret scanning error")}}finally{B("secret_scan_prompt",{source:"use-workbench.ts",duration_ms:performance.now()-i,success:r,prompt_chars:e.length,user_type:t,secrets_found:s,...n&&{iteration_uuid:n},...a&&{error_message:a.toString()}})}});return{id:H,name:X,description:J,updatedAt:K,createdAt:q,runtimePermanentName:en,friendlyName:ea,suggestions:eb,submitPrompt:ek,cancelPrompt:eE,workbench:e,updateWorkbenchSettings:ew,isMobileSidebarOpen:er,setIsMobileSidebarOpen:es,createRepository:eN,repositoryUrl:ee,updateWorkbenchCurrentRefinement:e_}}},19189:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(53552),i=n(78314),r=n(59672),s=n(11529),o=n(96540);function l(){let e=(0,i.t)(),{path:t,action:n,refInfo:l}=(0,a.eu)(),{isServer:c}=(0,s.V)();function d(e){return e?`?${e}`:""}function u(e){return c?"":void 0===e?window.location.hash:e?`#${e}`:""}return{getItemUrl:o.useCallback(t=>(0,r.IO9)({repo:e,commitish:l.name,action:"directory"===t.contentType?"tree":"blob",path:t.path}),[e.ownerLogin,e.name,l.name]),getUrl(a={}){let i=(0,r.IO9)({repo:e,commitish:a.commitish||l.name,action:a.action||n,path:a.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(a);return a.absolute?new URL(i,window.location.origin).href:i},createPermalink(a={}){let i=(0,r.IO9)({repo:e,commitish:l.currentOid,action:a.action||n,path:a.path||t})+function({params:e,hash:t}){return d(e)+u(t)}(a);return a.absolute?new URL(i,window.location.origin).href:i},isCurrentPagePermalink:()=>!c&&l.name===l.currentOid&&window.location.pathname.includes(l.currentOid)}}},20263:(e,t,n)=>{"use strict";n.d(t,{BC:()=>o,JU:()=>c,Pk:()=>s});var a=n(74848),i=n(12683),r=n(99418);let s=d(i.az),o=d(i.EY),l=({ref:e,...t})=>(0,a.jsx)("div",{...t,ref:e});l.displayName="Div";let c=d(l);function d(e){let t=t=>{let{sanitizedHTML:n,props:i}=function(e){let{html:t,domPurifyConfig:n,...a}=e,i={...n,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{sanitizedHTML:r.default.sanitize(t,i),props:a}}(t);return(0,a.jsx)(e,{...i,dangerouslySetInnerHTML:{__html:n}})};return t.displayName=`UnsafeHTML${e.displayName||e.name}`,t}try{s.displayName||(s.displayName="UnsafeHTMLBox")}catch{}try{o.displayName||(o.displayName="UnsafeHTMLText")}catch{}try{c.displayName||(c.displayName="UnsafeHTMLDiv")}catch{}},21017:(e,t,n)=>{"use strict";n.d(t,{Df:()=>d,Dy:()=>g,GV:()=>p,Hr:()=>y,Io:()=>h,Pb:()=>v,Rg:()=>u,Tc:()=>x,Tg:()=>l,Uh:()=>c,cb:()=>m,f7:()=>o,hz:()=>b,io:()=>_,mQ:()=>f});let a=[{extensions:["png","jpg","jpeg","gif","svg","webp"],category:"image",mimeTypes:["image/png","image/jpeg","image/gif","image/svg+xml","image/webp"]},{extensions:["pdf"],category:"document",mimeTypes:["application/pdf"]},{extensions:["mp3","ogg"],category:"audio",mimeTypes:["audio/mpeg","audio/ogg"]},{extensions:["mp4","webm"],category:"video",mimeTypes:["video/mp4","video/webm"]}],i="src/assets/";function r(e,t){return(t?a:a.filter(e=>"image"===e.category)).find(t=>t.extensions.includes(e.toLowerCase()))}function s(e){return e.includes(i)?e.substring(e.indexOf(i)+i.length):e}function o(e){let t=r(e.split(".").pop()?.toLowerCase()||"",!0);return t?.category||"document"}function l(e){return(e?a:a.filter(e=>"image"===e.category)).flatMap(e=>e.extensions).map(e=>`.${e}`)}function c(e){if(0===e)return"0 bytes";let t=["bytes","KB","MB","GB"],n=e,a=0;for(;n>=1024&&a<t.length-1;)n/=1024,a++;let i=0===a?n.toString():n.toFixed(+(1!==a));return`${i} ${t[a]}`}function d(e){return`${e.category} \xb7 ${e.sizePretty}`}function u(e){let t=e.split(".").pop()?.toLowerCase()||"";return a.some(e=>e.extensions.includes(t))}function m(e,t){let n=[],a=[];for(let i of e)i.size>t?a.push(`${i.name} (${c(i.size)})`):n.push(i);return{validFiles:n,invalidFiles:a}}async function p(e,t,n){let a=t.replace(/[/\\:*?"<>|]/g,"_").replace(/\.\./g,"_").replace(/\s+/g,"_").trim().substring(0,255),i=await n("/asset/upload",{method:"POST",headers:{"x-filename":a},body:e});if(!i.ok){let e;try{e=await i.json()}catch{throw Error(`Upload failed with status ${i.status}`)}let t=Error(e.message||`Upload failed with status ${i.status}`);throw e.code&&(t.code=e.code),e.data&&(t.data=e.data),t}}async function h(e){try{let t=await e("/asset/list",{method:"GET"});if(!t.ok)return[];let n=await t.json();return(n.data?.assets||[]).map(e=>{let t=e.path.split("/").pop()||"unknown";return{path:e.path,name:t,size:e.size,sizePretty:c(e.size),category:o(t)}})}catch{return[]}}async function f(e,t){try{let n=s(e),a=await t(`/asset/stream/${n}`,{method:"GET"});return a.ok?await a.blob():null}catch{return null}}async function g(e,t){let n=s(e),a=await t(`/asset/${n}`,{method:"DELETE"});if(!a.ok)throw Error((await a.json()).message||`Delete failed with status ${a.status}`)}async function y(e,t,n,a){let i=r(t.split(".").pop()?.toLowerCase()||"",n);if(i?.category!=="audio"&&i?.category!=="video"&&i?.category!=="document")return new Promise((t,n)=>{let a=new FileReader;a.onload=()=>t(a.result),a.onerror=n,a.readAsDataURL(e)});{let t=URL.createObjectURL(e);return a.add(t),t}}function b(e){if(e.content)try{let t,n=!1;if(e.content.startsWith("blob:"))t=e.content;else{let a=e.content.split(",");if(a.length<2||!a[1])return;let i=atob(a[1]),r=Array(i.length);for(let e=0;e<i.length;e++)r[e]=i.charCodeAt(e);let s=new Uint8Array(r),o=new Blob([s]);t=URL.createObjectURL(o),n=!0}let a=document.createElement("a");a.href=t,a.download=e.name,document.body.appendChild(a),a.click(),document.body.removeChild(a),n&&URL.revokeObjectURL(t)}catch{}}function x(e,t){e.content&&e.content.startsWith("blob:")&&(URL.revokeObjectURL(e.content),t.delete(e.content))}function v(e){for(let t of Array.isArray(e)?e:[e])t&&t.startsWith("blob:")&&URL.revokeObjectURL(t)}function w(e){if(e.startsWith("src/assets/"))return e;let t=e.indexOf("src/assets/");return -1!==t?e.substring(t):e}function _(e,t){let n=e.filter(e=>e.path.includes("/assets/")).map(e=>w(e.path)).sort(),a=t.map(e=>w(e.path)).sort(),i=a.length!==n.length,r=a.some((e,t)=>e!==n[t]);return i||r}},24037:(e,t,n)=>{"use strict";n.d(t,{Zk:()=>a,iA:()=>i});let a={THEME:"theme",AI:"ai",ASSETS:"assets",DATA:"data",ITERATE:"iterate"};({...a,HISTORY:"history",EDITOR:"editor",PREVIEW:"preview",TARGETED_EDITS:"targetedEdits",DEPLOY_BUTTON:"deployButton",SETTINGS:"settings"});let i={CLAUDE_SONNET_4:"claude-sonnet-4",CLAUDE_SONNET_45:"claude-sonnet-4.5",CLAUDE_OPUS_45:"claude-opus-4.5"}},24347:(e,t,n)=>{"use strict";n.d(t,{W:()=>d,v:()=>u});var a=n(74848),i=n(73189),r=n(96540),s=n(50205);let o="list item",l="list items",c=(0,r.createContext)({selectedCount:0,setSelectedCount:i.l,countOnPage:0,isSelectAllChecked:!1,anyItemsSelected:!1,singularUnits:o,pluralUnits:l,isSelectable:s.eX,hasDragHandle:s.os}),d=({children:e,countOnPage:t=0,singularUnits:n=o,pluralUnits:i=l,totalCount:d,selectedCount:u=0,isSelectable:m=s.eX,hasDragHandle:p=s.os}={singularUnits:o,pluralUnits:l,selectedCount:0,countOnPage:0,isSelectable:s.eX,hasDragHandle:s.os})=>{let[h,f]=(0,r.useState)(u);(0,r.useEffect)(()=>f(u),[u]);let g=h>0&&h>=t,y=h>0,b=(0,r.useMemo)(()=>({totalCount:d,countOnPage:t,selectedCount:h,setSelectedCount:f,isSelectAllChecked:g,anyItemsSelected:y,singularUnits:n,pluralUnits:i,isSelectable:m,hasDragHandle:p}),[d,t,h,f,g,y,n,i,m,p]);return(0,a.jsx)(c,{value:b,children:e})};d.displayName="ListViewSelectionProvider";let u=()=>(0,r.use)(c);try{c.displayName||(c.displayName="SelectionContext")}catch{}},25556:(e,t,n)=>{"use strict";n.d(t,{m:()=>f});var a=n(74848),i=n(97068),r=n(96540),s=n(56149),o=n(12683),l=n(34164);let c=n(38267).Ay.span.withConfig({displayName:"ControlledTooltip__TooltipBase",componentId:"sc-4009498c-0"})(["&::after{position:absolute;z-index:1000000;display:none;padding:0.5em 0.75em;font:normal normal 11px/1.5 ",";-webkit-font-smoothing:subpixel-antialiased;color:",";text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(data-visible-text);background:",";border-radius:",";opacity:0;}@keyframes tooltip-appear{from{opacity:0;}to{opacity:1;}}&.tooltipped-open,&:hover,&:active,&:focus{&::after{display:inline-block;text-decoration:none;animation-name:tooltip-appear;animation-duration:0.1s;animation-fill-mode:forwards;animation-timing-function:ease-in;animation-delay:0s;}}&.tooltipped-no-delay.tooltipped-open,&.tooltipped-no-delay:hover,&.tooltipped-no-delay:active,&.tooltipped-no-delay:focus{&::after{animation-delay:0s;}}&.tooltipped-s,&.tooltipped-se,&.tooltipped-sw{&::after{top:100%;right:50%;margin-top:6px;}}&.tooltipped-se{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-sw::after{margin-right:-",";}&.tooltipped-n,&.tooltipped-ne,&.tooltipped-nw{&::after{right:50%;bottom:100%;margin-bottom:6px;}}&.tooltipped-ne{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-nw::after{margin-right:-",";}&.tooltipped-s::after,&.tooltipped-n::after{transform:translateX(50%);}&.tooltipped-w{&::after{right:100%;bottom:50%;margin-right:6px;transform:translateY(50%);}}&.tooltipped-e{&::after{bottom:50%;left:100%;margin-left:6px;transform:translateY(50%);}}&.tooltipped-align-right-2::after{right:0;margin-right:0;}&.tooltipped-align-left-2::after{left:0;margin-left:0;}",";"],(0,o.yB)("fonts.normal"),(0,o.yB)("colors.fg.onEmphasis"),(0,o.yB)("colors.neutral.emphasisPlus"),(0,o.yB)("radii.2"),(0,o.yB)("space.3"),(0,o.yB)("space.3"),(0,o.yB)("space.3"),(0,o.yB)("space.3"),o.sx),d=()=>()=>void 0,u=()=>!1,m=()=>!0;function p({ref:e,direction:t="n",className:n,text:i,noDelay:o,align:p,wrap:h,open:f=!1,portalProps:g={},...y}){let b=(0,r.useSyncExternalStore)(d,m,u),x=(0,l.$)(n,`tooltipped-${t}`,p&&`tooltipped-align-${p}-2`,o&&"tooltipped-no-delay",h&&"tooltipped-multiline",f&&"tooltipped-open");return b?(0,a.jsx)(s.ZL,{...g,children:(0,a.jsx)(c,{ref:e,role:"tooltip","aria-label":i,"data-visible-text":i||y["aria-label"],...y,sx:{position:"fixed",zIndex:1,...y.sx},className:x})}):null}try{p.displayName||(p.displayName="ControlledTooltip")}catch{}var h=n(65787);function f({ref:e,contentRef:t,open:n,anchoredPositionAlignment:s,anchorSide:o,anchorOffset:l,alignmentOffset:c,allowOutOfBounds:d,...u}){let m=(0,r.useRef)(null);(0,r.useImperativeHandle)(e,()=>m.current);let f=(0,r.useRef)({left:0,top:0}),g=(0,r.useSyncExternalStore)((0,r.useCallback)(e=>{if(!m.current||!t.current||!n)return()=>void 0;let a=(0,h.U)(t.current);return a?.addEventListener("scroll",e),()=>{a?.removeEventListener("scroll",e)}},[t,n]),(0,r.useCallback)(()=>{if(!m.current||!t.current)return f.current;let e=(0,i.uG)(m.current,t.current,{align:s??"center",side:o??"outside-top",alignmentOffset:c??0,anchorOffset:l??0,allowOutOfBounds:d});return(e.left!==f.current.left||e.top!==f.current.top)&&(f.current=e),f.current},[t,c,l,s,o,d]),(0,r.useCallback)(()=>f.current,[]));return(0,a.jsx)(p,{...u,ref:m,open:n,style:{position:"absolute",...g,...u.style}})}try{f.displayName||(f.displayName="PortalTooltip")}catch{}},26100:(e,t,n)=>{"use strict";n.d(t,{g:()=>s});var a=n(74848),i=n(16522),r=n(72579);function s(e){let t,n=(0,i.c)(3),{"data-testid":s,version:o}=e;return n[0]!==s||n[1]!==o?(t=(0,a.jsxs)(r.A,{className:"VersionName-module__version--FC1cb",as:"span","data-testid":s,children:["v",o]}),n[0]=s,n[1]=o,n[2]=t):t=n[2],t}try{s.displayName||(s.displayName="VersionName")}catch{}},27603:(e,t,n)=>{"use strict";n.d(t,{u:()=>s,x:()=>o});var a=n(74848),i=n(96540);let r=(0,i.createContext)(void 0),s=({children:e})=>{let[t,n]=(0,i.useState)(""),s=(0,i.useMemo)(()=>({status:t,setStatus:n}),[t]);return(0,a.jsx)(r,{value:s,children:e})};s.displayName="ListItemStatusProvider";let o=()=>{let e=(0,i.use)(r);if(!e)throw Error("useListItemStatus must be used with StatusProvider.");return e};try{r.displayName||(r.displayName="StatusContext")}catch{}},29622:(e,t,n)=>{"use strict";n.d(t,{F:()=>s,m:()=>o});var a=n(74848),i=n(96540);let r=(0,i.createContext)({alignment:"top"}),s=({alignment:e,children:t})=>{let n=(0,i.useMemo)(()=>({alignment:e??"top"}),[e]);return(0,a.jsx)(r,{value:n,children:t})};s.displayName="ListItemAlignmentProvider";let o=()=>(0,i.use)(r);try{r.displayName||(r.displayName="AlignmentContext")}catch{}},31078:(e,t,n)=>{"use strict";n.d(t,{Ck:()=>o,JS:()=>s});var a=n(74848),i=n(96540);let r=(0,i.createContext)({query:"",setQuery:()=>void 0});function s(){return(0,i.use)(r)}function o({children:e}){let[t,n]=(0,i.useState)(""),s=(0,i.useMemo)(()=>({query:t,setQuery:n}),[n,t]);return(0,a.jsx)(r,{value:s,children:e})}try{r.displayName||(r.displayName="FileQueryContext")}catch{}try{o.displayName||(o.displayName="FileQueryProvider")}catch{}},32535:(e,t,n)=>{"use strict";n.d(t,{G:()=>i,P:()=>r});var a=n(96540);let i=(0,a.createContext)(null);function r(){let e=(0,a.use)(i);if(!e)throw Error("useTerminalContext must be used within a TerminalContextProvider");return e}},32850:(e,t,n)=>{"use strict";n.d(t,{U:()=>r,c:()=>s});var a=n(69599),i=n(15164);let r={DEFAULT:"default",GENERATE_ACTIONS:"generate-actions",EDITOR:"editor",ITERATION_HISTORY:"iteration-history",CREATE_REPOSITORY:"create-repository",AI_PANEL:"ai-panel",ASSETS_PANEL:"assets-panel",THEME_PANEL:"theme-panel",TARGETED_EDITS:"targeted-edits"};function s(e){let{status:{[i.kl.CODESPACE]:t,[i.kl.FILE_SYNCER]:n,[i.kl.VITE]:s}}=(0,i.MY)(),[o,l,c,d]=(0,i.RC)(),{isAgentBusy:u}=(0,i.dt)();if(!(0,a.G7)("workbench_store_readonly"))return!1;if(c)return!0;if(!e)throw Error("readOnlyKey is required");switch(e){case r.DEFAULT:return o;case r.GENERATE_ACTIONS:return d||u||t!==i.nW.CONNECTED&&t!==i.nW.IDLE;case r.ITERATION_HISTORY:case r.CREATE_REPOSITORY:case r.AI_PANEL:case r.ASSETS_PANEL:return o||n!==i.nW.CONNECTED;case r.EDITOR:return o||n!==i.nW.CONNECTED||u;case r.TARGETED_EDITS:case r.THEME_PANEL:return o||s!==i.nW.CONNECTED||n!==i.nW.CONNECTED||u;default:throw Error(`Unknown readOnlyKey: ${e}`)}}},33303:(e,t,n)=>{"use strict";function a(){return Promise.resolve()}function i(){return new Promise(window.requestAnimationFrame)}async function r(e,t){let n,a=new Promise(t=>{n=self.setTimeout(t,e)});if(!t)return a;try{var i;await Promise.race([a,(i=t,new Promise((e,t)=>{let n=Error("aborted");n.name="AbortError",i.aborted?t(n):i.addEventListener("abort",()=>t(n))}))])}catch(e){throw self.clearTimeout(n),e}}function s(e){let t=[];return function(n){t.push(n),1===t.length&&queueMicrotask(()=>{let n=t.slice(0);t.length=0,e(n)})}}n.d(t,{G$:()=>i,k2:()=>a,rK:()=>s,uk:()=>r})},34535:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(16522),i=n(96540);function r(e){let t,n,r=(0,a.c)(4),{focusRowRef:s,mouseRowRef:o}=e,[l,c]=(0,i.useState)(!1);return r[0]!==s||r[1]!==o?(t=()=>{let e=s.current,t=o.current;if(!e||!t)return;let n=()=>{let t=e.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&c(!0)},a=()=>n(),i=()=>c(!1),r=()=>n(),l=()=>c(!1);return e.addEventListener("focus",a),e.addEventListener("blur",i),t.addEventListener("mouseenter",r),t.addEventListener("mouseleave",l),()=>{e.removeEventListener("focus",a),e.removeEventListener("blur",i),t.removeEventListener("mouseenter",r),t.removeEventListener("mouseleave",l)}},n=[s,o],r[0]=s,r[1]=o,r[2]=t,r[3]=n):(t=r[2],n=r[3]),(0,i.useEffect)(t,n),l}},35220:(e,t,n)=>{"use strict";n.d(t,{H:()=>l,e:()=>c});var a=n(74848),i=n(73189),r=n(96540),s=n(50205);let o=(0,r.createContext)(void 0),l=({children:e,variant:t=s.tp,setVariant:n=i.l})=>{let l=(0,r.useMemo)(()=>({variant:t,setVariant:n}),[n,t]);return(0,a.jsx)(o,{value:l,children:e})};l.displayName="ListViewVariantProvider";let c=()=>{let e=(0,r.use)(o);if(!e)throw Error("useListViewVariant must be used with VariantProvider.");return e};try{o.displayName||(o.displayName="VariantContext")}catch{}},35898:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o,i:()=>l});var a=n(74848),i=n(16522),r=n(96540);let s=r.createContext(void 0);function o(e){let t,n=(0,i.c)(3),{user:r,children:o}=e;return n[0]!==o||n[1]!==r?(t=(0,a.jsxs)(s,{value:r,children:[" ",o," "]}),n[0]=o,n[1]=r,n[2]=t):t=n[2],t}function l(){return r.use(s)}try{s.displayName||(s.displayName="CurrentUserContext")}catch{}try{o.displayName||(o.displayName="CurrentUserProvider")}catch{}},37178:(e,t,n)=>{"use strict";n.d(t,{O:()=>_});var a=n(74848),i=n(16522),r=n(38621),s=n(5524),o=n(12683),l=n(10436),c=n(96540);function d(e){let t,n,r,s,l=(0,i.c)(5),{children:c}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={overflow:"auto",maxHeight:"calc(100dvh - 64px - 52px)"},l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n={overflow:"hidden",backgroundColor:"canvas.default"},l[1]=n):n=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(r={display:"flex",flexDirection:"column"},l[2]=r):r=l[2],l[3]!==c?(s=(0,a.jsx)(o.az,{sx:t,children:(0,a.jsx)(o.az,{sx:n,children:(0,a.jsx)(o.az,{sx:r,children:c})})}),l[3]=c,l[4]=s):s=l[4],s}function u(e){let t,n,s,l,c,d=(0,i.c)(9),{children:u,onDismiss:m}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"16px",fontSize:1},d[0]=t):t=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(n={display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,"@media screen and (max-width: 768px)":{maxWidth:"80%"}},d[1]=n):n=d[1],d[2]!==u?(s=(0,a.jsx)(o.az,{sx:n,children:u}),d[2]=u,d[3]=s):s=d[3],d[4]!==m?(l=m&&(0,a.jsx)(o.K0,{unsafeDisableTooltip:!0,"aria-label":"Dismiss",icon:r.XIcon,onClick:m,variant:"invisible",sx:{flexShrink:0}}),d[4]=m,d[5]=l):l=d[5],d[6]!==s||d[7]!==l?(c=(0,a.jsxs)(o.DZ,{as:"h3",sx:t,children:[s,l]}),d[6]=s,d[7]=l,d[8]=c):c=d[8],c}function m(e){let t,n,r=(0,i.c)(3),{children:s}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",borderTop:"1px solid var(--borderColor-default, var(--color-border-default))",backgroundColor:"canvas.subtle",px:3,py:2},r[0]=t):t=r[0],r[1]!==s?(n=(0,a.jsx)(o.az,{sx:t,children:s}),r[1]=s,r[2]=n):n=r[2],n}function p(e){let t,n,s,d,u,m,p=(0,i.c)(11),{children:f,title:g,initiallyOpen:y}=e,[b,x]=(0,c.useState)(y??!1);p[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>x(h),p[0]=t):t=p[0],p[1]===Symbol.for("react.memo_cache_sentinel")?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))",'[data-component="buttonContent"]':{justifyContent:"start"}},p[1]=n):n=p[1];let v=b?r.ChevronDownIcon:r.ChevronRightIcon;p[2]===Symbol.for("react.memo_cache_sentinel")?(s={mr:2},p[2]=s):s=p[2],p[3]!==v?(d=(0,a.jsx)(l.m4,{icon:v,sx:s}),p[3]=v,p[4]=d):d=p[4],p[5]!==d||p[6]!==g?(u=(0,a.jsxs)(o.$n,{onClick:t,sx:n,children:[d,g]}),p[5]=d,p[6]=g,p[7]=u):u=p[7];let w=b&&f;return p[8]!==u||p[9]!==w?(m=(0,a.jsxs)(a.Fragment,{children:[u,w]}),p[8]=u,p[9]=w,p[10]=m):m=p[10],m}function h(e){return!e}function f(e){let t,n,r=(0,i.c)(3),{children:s}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={padding:3},r[0]=t):t=r[0],r[1]!==s?(n=(0,a.jsx)(o.az,{sx:t,children:s}),r[1]=s,r[2]=n):n=r[2],n}function g(e){let t,n,s,c,d,u,m,p=(0,i.c)(14),{direction:h,onExpand:f}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t={justifyContent:"start"},p[0]=t):t=p[0],p[1]!==h?(n={borderRadius:0,backgroundColor:"canvas.default",border:"none",px:3,py:2,width:"100%",fontSize:0,fontWeight:"normal",color:"fg.muted",'[data-component="buttonContent"]':t,..."above"===h?{borderBottom:"1px solid var(--borderColor-default, var(--color-border-default))"}:{borderTop:"1px solid var(--borderColor-default, var(--color-border-default))"}},p[1]=h,p[2]=n):n=p[2],p[3]===Symbol.for("react.memo_cache_sentinel")?(s={display:"flex",alignItems:"center"},p[3]=s):s=p[3];let g="below"===h?r.FoldDownIcon:r.FoldUpIcon;return p[4]===Symbol.for("react.memo_cache_sentinel")?(c={mr:2},p[4]=c):c=p[4],p[5]!==g?(d=(0,a.jsx)(l.m4,{icon:g,sx:c}),p[5]=g,p[6]=d):d=p[6],p[7]!==h||p[8]!==d?(u=(0,a.jsxs)(o.az,{sx:s,children:[d,"Show content ",h]}),p[7]=h,p[8]=d,p[9]=u):u=p[9],p[10]!==f||p[11]!==n||p[12]!==u?(m=(0,a.jsx)(o.$n,{onClick:f,sx:n,children:u}),p[10]=f,p[11]=n,p[12]=u,p[13]=m):m=p[13],m}function y(e){let t,n,r=(0,i.c)(3),{children:o}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(s.l.GroupHeading,{as:"h3",children:"Reference details"}),r[0]=t):t=r[0],r[1]!==o?(n=(0,a.jsx)(s.l,{children:(0,a.jsxs)(s.l.Group,{children:[t,o]})}),r[1]=o,r[2]=n):n=r[2],n}function b(e){let t,n,r=(0,i.c)(6),{children:o,href:c,icon:d}=e;return r[0]!==d?(t=(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)(l.m4,{icon:d})}),r[0]=d,r[1]=t):t=r[1],r[2]!==o||r[3]!==c||r[4]!==t?(n=(0,a.jsxs)(s.l.LinkItem,{href:c,children:[t,o]}),r[2]=o,r[3]=c,r[4]=t,r[5]=n):n=r[5],n}function x(){let e,t,n=(0,i.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",flexDirection:"column",alignItems:"center",m:"auto",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsxs)(o.az,{sx:e,children:[(0,a.jsx)(o.y$,{sx:{mb:2}}),(0,a.jsx)("div",{children:"Loading..."})]}),n[1]=t):t=n[1],t}function v(){let e,t,n=(0,i.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"center",p:3},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(o.az,{sx:e,children:(0,a.jsx)(o.az,{sx:{color:"danger.fg",fontWeight:"bold"},children:"Failed to load reference details"})}),n[1]=t):t=n[1],t}function w(e){let t,n=(0,i.c)(4),{children:r,detailsError:s,detailsLoading:o}=e;return n[0]!==r||n[1]!==s||n[2]!==o?(t=s?(0,a.jsx)(v,{}):o?(0,a.jsx)(x,{}):(0,a.jsx)(a.Fragment,{children:r}),n[0]=r,n[1]=s,n[2]=o,n[3]=t):t=n[3],t}let _={Frame:d,Header:u,Body:w,Content:f,CollapsibleSubsection:p,ContentExpander:g,Details:y,DetailLink:b,SectionDivider:m};try{d.displayName||(d.displayName="Frame")}catch{}try{u.displayName||(u.displayName="Header")}catch{}try{m.displayName||(m.displayName="SectionDivider")}catch{}try{p.displayName||(p.displayName="CollapsibleSubsection")}catch{}try{f.displayName||(f.displayName="Content")}catch{}try{g.displayName||(g.displayName="ContentExpander")}catch{}try{y.displayName||(y.displayName="Details")}catch{}try{b.displayName||(b.displayName="DetailLink")}catch{}try{x.displayName||(x.displayName="Loading")}catch{}try{v.displayName||(v.displayName="Error")}catch{}try{w.displayName||(w.displayName="Body")}catch{}},37272:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var a=n(74848),i=n(64375);function r({children:e}){return(0,i.P)()?(0,a.jsx)(a.Fragment,{children:e}):null}try{r.displayName||(r.displayName="AllShortcutsEnabled")}catch{}},38102:(e,t,n)=>{"use strict";let a;n.d(t,{AW:()=>b,fE:()=>y,ff:()=>S,N7:()=>x});var i=n(36301),r=n(77065),s=n(24212);function o(e){return(0,s.q)(e.stack||"").map(e=>({filename:e.file||"",function:String(e.methodName),lineno:(e.lineNumber||0).toString(),colno:(e.column||0).toString()}))}function l(e){let t=document.querySelectorAll(e);if(t.length>0)return t[t.length-1]}var c=n(99223),d=n(56038),u=n(94416),m=n(69599),p=n(88057);let h=!1,f=0,g=Date.now(),y=new Set(["AbortError","AuthSessionExpiredError","TypeError","RateLimitError","NotAcceptableError","SecFetchHeaderError","FetchNetworkError","ServiceUnavailableError"]),b=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","Unable to perform this operation. Please try again later."]);function x(e,t={}){if(!(e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"message"in e&&"string"==typeof e.message)){if(function(e){if(!e||"boolean"==typeof e||"number"==typeof e)return!0;if("string"==typeof e){if(k.some(t=>e.includes(t)))return!0}else if("object"==typeof e&&"string"==typeof e.message&&"number"==typeof e.code)return!0;return!1}(e))return;let n=Error(),a=function(e){try{return JSON.stringify(e)}catch{return"Unserializable"}}(e);v(w({type:"UnknownError",value:`Unable to report error, due to a thrown non-Error type: ${typeof e}, with value ${a}`,stacktrace:o(n),catalogService:document.head?.querySelector('meta[name="current-catalog-service"]')?.content,catalogServiceHash:document.head?.querySelector('meta[name="current-catalog-service-hash"]')?.content},t));return}e.name&&("AbortError"===e.name||"RateLimitError"===e.name||"NotAcceptableError"===e.name||"SecFetchHeaderError"===e.name||"FetchNetworkError"===e.name||"ServiceUnavailableError"===e.name&&(0,m.G7)("failbot_ignore_503_for_anonymous_users")&&S()||y.has(e.name)&&b.has(e.message)||e.name.startsWith("ApiError")&&b.has(e.message))||v(w({type:e.name,value:e.message,stacktrace:o(e),catalogService:e.catalogService||document.head?.querySelector('meta[name="current-catalog-service"]')?.content,catalogServiceHash:e.catalogServiceHash||document.head?.querySelector('meta[name="current-catalog-service-hash"]')?.content},t))}async function v(e){if(!(!C&&!h&&f<10&&(a??(a=(0,r.TT)()&&function(){let e=d.cg?.history,t=d.cg?.location;if(!e||!t)return!1;try{return e.replaceState(e.state,document.title,t.href),!0}catch{return!1}}()))))return;let t=document.head?.querySelector('meta[name="browser-errors-url"]')?.content;if(t){if(e.error.stacktrace.some(e=>_.test(e.filename)||_.test(e.function))){h=!0;return}f++;try{await fetch(t,{method:"post",body:JSON.stringify({context:e,target:document.head?.querySelector('meta[name="ui-target"]')?.content||"full"})})}catch{}}}function w(e,t={}){let n,a={...t};return(0,m.G7)("failbot_report_error_react_apps_on_page")&&!a.reactAppName&&(a.reactAppName=function(e){let t=function(){let e=new Set;for(let[t,n]of E)for(let a of document.querySelectorAll(t))if(a instanceof HTMLElement){let t=a.getAttribute(n);t&&e.add(t)}return Array.from(e)}();if(!t||!t.length||!e||!e.length)return;let n=new Set;for(let a of e){if(!a||!a.filename)continue;let e=a.filename.split(/[\\/]/).pop();if(!e||n.has(e))continue;n.add(e);let i=t.find(t=>e.toLowerCase().includes(t.toLowerCase()));if(i)return i}}(e.stacktrace)),Object.assign({error:e,sanitizedUrl:`${window.location.protocol}//${window.location.host}${((n=l("meta[name=analytics-location]"))?n.content:window.location.pathname)+function(){let e=l("meta[name=analytics-location-query-strip]"),t="";e||(t=window.location.search);let n=l("meta[name=analytics-location-params]");for(let e of(n&&(t+=(t?"&":"?")+n.content),document.querySelectorAll("meta[name=analytics-param-rename]"))){let n=e.content.split(":",2);t=t.replace(RegExp(`(^|[?&])${n[0]}($|=)`,"g"),`$1${n[1]}$2`)}return t}()}`||window.location.href,readyState:document.readyState,referrer:(0,u.dR)(),timeSinceLoad:Math.round(Date.now()-g),user:function(){let e=document.head?.querySelector('meta[name="user-login"]')?.content;if(e)return e;let t=(0,i.y)();return`anonymous-${t}`}()||void 0,actorId:document.head?.querySelector('meta[name="octolytics-actor-id"]')?.content,bundler:c.v,ui:"vite-tss"===c.v,release:document.head?.querySelector('meta[name="release"]')?.content,pastRequestIds:(0,p.xA)()},a)}let _=/(chrome|moz|safari)-extension:\/\//;function S(){return!document.head?.querySelector('meta[name="user-login"]')?.content}let C=!1;d.cg?.addEventListener("pageshow",()=>C=!1),d.cg?.addEventListener("pagehide",()=>C=!0),"function"==typeof BroadcastChannel&&new BroadcastChannel("shared-worker-error").addEventListener("message",e=>{x(e.data.error)});let k=["Object Not Found Matching Id","Not implemented on this platform","provider because it's not your default extension"],E=[["react-app","app-name"],["react-partial","partial-name"]]},39467:(e,t,n)=>{"use strict";n.d(t,{Gy:()=>k,LB:()=>A,nn:()=>I,lm:()=>N});var a=n(74848),i=n(96540),r=n(35750),s=n(18150),o=n(85242),l=n(88243),c=n(16213),d=n(50467),u=new WeakMap,m=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,y=new WeakSet,b=new WeakSet,x=new WeakSet,v=new WeakSet;let ScreenSizeStore=class ScreenSizeStore{computeSize(e){return(0,l._)(this,y,w).call(this,e)}constructor(e,t){(0,c._)(this,y),(0,c._)(this,b),(0,c._)(this,x),(0,c._)(this,v),(0,s._)(this,u,{writable:!0,value:null}),(0,s._)(this,m,{writable:!0,value:null}),(0,s._)(this,p,{writable:!0,value:new Set}),(0,s._)(this,h,{writable:!0,value:void 0}),(0,s._)(this,f,{writable:!0,value:void 0}),(0,d._)(this,"subscribe",e=>{if("u"<typeof document)throw Error("ScreenSizeStore.subscribe() cannot be called on the server");return(0,r._)(this,p).add(e),(0,l._)(this,x,S).call(this),()=>{(0,r._)(this,p).delete(e),(0,l._)(this,v,C).call(this)}}),(0,d._)(this,"getSnapshot",()=>{if("u"<typeof document)throw Error("ScreenSizeStore.getSnapshot() cannot be called on the server");return null===(0,r._)(this,u)?(0,l._)(this,b,_).call(this):(0,r._)(this,u)}),(0,s._)(this,g,{writable:!0,value:e=>{let t=e[0];if(!t)return;let n=(0,l._)(this,y,w).call(this,t.contentRect.width);if(null===(0,r._)(this,u)||n!==(0,r._)(this,u))for(let e of((0,o._)(this,u,n),(0,r._)(this,p)))e()}}),(0,o._)(this,h,[...e].sort((e,t)=>t-e)),(0,o._)(this,f,t)}};function w(e){for(let t of(0,r._)(this,h))if(e>=t)return t;return(0,r._)(this,f)}function _(){if("u"<typeof document||!document.documentElement)return(0,o._)(this,u,(0,r._)(this,f)),(0,r._)(this,f);let e=document.documentElement.clientWidth;0===e&&"u">typeof window&&"number"==typeof window.innerWidth&&(e=window.innerWidth);let t=(0,l._)(this,y,w).call(this,e);return(0,o._)(this,u,t),t}function S(){(0,r._)(this,m)||((0,o._)(this,m,new ResizeObserver((0,r._)(this,g))),(0,r._)(this,m).observe(document.documentElement),null===(0,r._)(this,u)&&(0,l._)(this,b,_).call(this))}function C(){0===(0,r._)(this,p).size&&(0,r._)(this,m)&&((0,r._)(this,m).disconnect(),(0,o._)(this,m,null))}let k={small:1,medium:544,large:768,xlarge:1012,xxlarge:1280,xxxlarge:1350,xxxxlarge:1440},E=new ScreenSizeStore([k.xxxxlarge,k.xxxlarge,k.xxlarge,k.xlarge,k.large,k.medium,k.small],k.small),j=i.createContext({screenSize:k.small});function N(){return i.use(j)}function A({children:e,initialValue:t=k.small}){let n=(0,i.useSyncExternalStore)(E.subscribe,E.getSnapshot,()=>t),r=(0,i.useMemo)(()=>({screenSize:n}),[n]);return(0,a.jsx)(j,{value:r,children:e})}function I(e){return E.computeSize(e)}try{j.displayName||(j.displayName="ScreenContext")}catch{}try{A.displayName||(A.displayName="ScreenSizeProvider")}catch{}},39671:(e,t,n)=>{"use strict";function a({friendlyName:e,deployLogin:t,domainBase:n}){return`https://${e}--${t}.${n}`}n.d(t,{A:()=>a})},40235:(e,t,n)=>{"use strict";n.d(t,{x:()=>p});var a,i=n(96540),r=n(70263),s=n(11418),o=n(73056),l=n(74848),c=n(10204);let d=(0,i.createContext)(null),u=null;function m(e,t){let n=c.KK.parse(e);if(!n)throw Error(`Invalid channel name. Did you forget to sign it with \`signChannel("${e}")\`?`);return u||(u=new c.m0),u.add({topic:n,subscriber:t}),{unsubscribe:()=>{u?.delete({topic:n,subscriber:t})}}}try{d.displayName||(d.displayName="AliveTestContext")}catch{}try{(a=function({children:e,initialMessages:t}){return(0,i.useEffect)(()=>{let e=[];if(t)for(let[n,a]of t){let t=window.setTimeout(()=>{var e=n,t=a;if(null===u)throw Error('Test helper `dispatchAliveTestMessage` called outside `AliveTestProvider`. Please wrap your component under test in `AliveTestProvider` from "@github-ui/use-alive/test-utils".');for(let n of Array.from(u.subscribers(e)))n(t)},0);e.push(t)}return()=>{for(let t of(u=null,e))window.clearTimeout(t)}}),(0,l.jsx)(d,{value:m,children:e})}).displayName||(a.displayName="AliveTestProvider")}catch{}function p(e,t){let n=(0,r.A)(),a=(0,i.use)(d);(0,i.useEffect)(()=>{let i=()=>{},r=!1;return async function(){if(e){if("function"==typeof a){let n=await a(e,t);n&&(i=n.unsubscribe);return}try{let a=await (0,s.H)();if(r)return;let l=(0,o.$)(a,e,t);l?.unsubscribe&&(n()?i=l.unsubscribe:l.unsubscribe())}catch(e){console.error(e)}}}(),()=>{r=!0,i()}},[e,t,n,a])}},41738:(e,t,n)=>{"use strict";n.d(t,{_:()=>c,I:()=>o});var a=n(74848),i=n(16522),r=n(12683),s=n(37178);function o(e){let t,n,o,d,u,m,p,h,f,g,y,b=(0,i.c)(19),{reference:x,onDismiss:v}=e;b[0]===Symbol.for("react.memo_cache_sentinel")?(t={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:2},n=(0,a.jsx)(c,{}),b[0]=t,b[1]=n):(t=b[0],n=b[1]),b[2]===Symbol.for("react.memo_cache_sentinel")?(o={fontSize:0,fontWeight:400,color:"fg.muted"},b[2]=o):o=b[2],b[3]===Symbol.for("react.memo_cache_sentinel")?(d={fontSize:1,fontWeight:600,color:"fg.default"},b[3]=d):d=b[3];let w=1===x.results.length?" result ":" results ";return b[4]!==x.results.length||b[5]!==w?(u=(0,a.jsxs)(r.az,{sx:t,children:[n,(0,a.jsxs)(r.EY,{sx:o,children:[(0,a.jsxs)(r.EY,{sx:d,children:[x.results.length," ",w]}),"from Bing search."]})]}),b[4]=x.results.length,b[5]=w,b[6]=u):u=b[6],b[7]!==v||b[8]!==u?(m=(0,a.jsx)(s.O.Header,{onDismiss:v,children:u}),b[7]=v,b[8]=u,b[9]=m):m=b[9],b[10]===Symbol.for("react.memo_cache_sentinel")?(p={display:"flex",flexDirection:"column",px:3,gap:3,pb:3},b[10]=p):p=b[10],b[11]!==x.results?(h=x.results.map(l),b[11]=x.results,b[12]=h):h=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsx)(r.EY,{sx:{fontSize:0,fontWeight:400},children:(0,a.jsx)(r.N_,{href:"https://privacy.microsoft.com/en-us/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})}),b[13]=f):f=b[13],b[14]!==h?(g=(0,a.jsx)(s.O.Body,{detailsError:!1,detailsLoading:!1,children:(0,a.jsxs)(r.az,{sx:p,children:[h,f]})}),b[14]=h,b[15]=g):g=b[15],b[16]!==g||b[17]!==m?(y=(0,a.jsxs)(s.O.Frame,{children:[m,g]}),b[16]=g,b[17]=m,b[18]=y):y=b[18],y}function l(e,t){return(0,a.jsxs)(r.az,{sx:{display:"flex",flexDirection:"column",gap:1,border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"6px",padding:3},children:[(0,a.jsx)(r.N_,{sx:{fontWeight:600,fontSize:2},href:e.url,rel:"nofollow",children:e.title}),(0,a.jsx)("div",{children:e.excerpt}),(0,a.jsx)(r.az,{sx:{fontSize:0,color:"fg.muted"},children:e.url})]},t)}let c=()=>{let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"WebSearchReferencePreview-module__bing-icon--lhPED"}),t[0]=e):e=t[0],e};try{o.displayName||(o.displayName="WebSearchReferencePreview")}catch{}try{c.displayName||(c.displayName="BingIcon")}catch{}},42038:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var a=n(74848),i=n(84098),r=n(40090),s=n(34164);function o({fadeIn:e=!1}){return(0,a.jsx)("div",{className:(0,s.$)("EditorLoadingSkeleton-module__container--_DhZo",e&&"EditorLoadingSkeleton-module__fadeIn--XTpNt"),children:[50,60,70].map(e=>(0,a.jsxs)("div",{className:"EditorLoadingSkeleton-module__line--Tf36_",children:[(0,a.jsx)(i.N,{square:!0,size:14,className:"EditorLoadingSkeleton-module__lineNumber--V4p9i"}),(0,a.jsx)("div",{style:{width:`${e}%`},children:(0,a.jsx)(r.r,{lines:1})})]},e))})}try{o.displayName||(o.displayName="EditorLoadingSkeleton")}catch{}},42255:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(70263),i=n(96540);let r=function(e){let t=(0,a.A)(),[n,r]=(0,i.useState)(e);return[n,(0,i.useCallback)(e=>{t()&&r(e)},[t])]}},42634:()=>{},43258:(e,t,n)=>{"use strict";n.d(t,{Qn:()=>l,T8:()=>d,Y6:()=>m,k6:()=>u});var a=n(74848),i=n(52870),r=n(96540),s=n(73189),o=n(42255);let l=5e3,c=(0,r.createContext)({addToast:s.l,addPersistedToast:s.l,clearPersistedToast:s.l}),d=(0,r.createContext)({toasts:[],persistedToast:null});function u({children:e}){let[t,n]=(0,o.A)([]),[s,u]=(0,r.useState)(null),{safeSetTimeout:m}=(0,i.A)(),p=(0,r.useCallback)(function(e){n([...t,e]),m(()=>n(t.slice(1)),l)},[t,m,n]),h=(0,r.useCallback)(function(e){u(e)},[u]),f=(0,r.useCallback)(function(){u(null)},[u]),g=(0,r.useMemo)(()=>({addToast:p,addPersistedToast:h,clearPersistedToast:f}),[h,p,f]),y=(0,r.useMemo)(()=>({toasts:t,persistedToast:s}),[t,s]);return(0,a.jsx)(c,{value:g,children:(0,a.jsx)(d,{value:y,children:e})})}function m(){return(0,r.use)(c)}try{c.displayName||(c.displayName="ToastContext")}catch{}try{d.displayName||(d.displayName="InternalToastsContext")}catch{}try{u.displayName||(u.displayName="ToastContextProvider")}catch{}},43617:(e,t,n)=>{"use strict";n.d(t,{Q:()=>l});var a=n(74848),i=n(29731),r=n(34164),s=n(35220),o=n(29622);function l({children:e}){let{variant:t}=(0,s.e)(),{alignment:n}=(0,o.m)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{...(0,i.G)("list-view-item-main-content"),className:"MainContent-module__container--NyRpm",children:(0,a.jsx)("div",{className:(0,r.$)("MainContent-module__inner--qD0Pb","compact"===t&&"MainContent-module__compact--S3brA","center"===n&&"MainContent-module__centerAligned--kUOEP"),children:e})})})}try{l.displayName||(l.displayName="ListItemMainContent")}catch{}},44104:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>a});let a={log:(...e)=>{console.log(...e)},error:(...e)=>{console.error(...e)}}},47620:(e,t,n)=>{"use strict";n.d(t,{e:()=>c});var a=n(76648),i=n(96459),r=n(96540),s=n(55552),o=n(41339),l=n(5989);let c=()=>{let e=(0,i.Z)(),{workbench:t}=(0,a.B)(),{sparkFileUrl:n}=(0,o._C)(),{setWorkingMode:c,workingMode:d,setLastViewedFile:u}=(0,l.zW)(),{setEditorMode:m,setEditorPath:p}=(0,s.m)();return(0,r.useCallback)((a,i)=>{let{editorMode:r,showCode:s}=i||{};m(r||"editor"),s&&c("code"===d?"code":"split"),e(n({sparkId:t.id,path:a})),p(a),u(a)},[e,m,p,u,c,n,t.id,d])}},47927:(e,t,n)=>{"use strict";n.d(t,{I:()=>i,_:()=>a});let a=e=>{if("number"==typeof e)return{data:e,type:"number"};try{let t=JSON.parse(e);if("number"==typeof t)return{data:t,type:"number"};if(Array.isArray(t)){if(t.length>0&&t.every(e=>"object"==typeof e)){let e=t.map(e=>({...e,id:e.id??crypto.randomUUID().substring(0,8)}));return{data:e,type:"table",allKeys:e.reduce((e,t)=>{for(let n of Object.keys(t))e.includes(n)||e.push(n);return e},[])}}return{data:t,type:"array"}}if("object"==typeof t)return{data:t,type:"object"};return{data:t,type:"string"}}catch{return{data:e,type:"string"}}},i={keyString:"some value",keyNumber:42,keySimpleObject:{keyA:"nested value",keyB:24,keyC:!1},keySimpleArray:["a","b","c","d"],keySimpleTableArray:[...Array(10).keys()].map(e=>({keyA:`Object ${e+1}`,keyB:e+10,keyC:`${97+e}`})),keyNestedObject:{keyA:"valueA",keyB:10,keyC:!0,keyD:!1,keyE:{nestedKeyA:"nestedValueA",nestedKeyB:20},keyF:{nestedKeyA:"nestedValueA",nestedKeyB:{doubleNestedKeyA:"doubleNestedValueA",doubleNestedKeyB:30}}},keyComplexTableArray:[...Array(20).keys()].map(e=>({keyA:`Object ${e+1}`,keyB:e+10,keyC:`${97+e}`,keyD:{nestedKeyA:`nestedValueA-${e}`,nestedKeyB:2*e,nestedKeyC:{doubleNestedKeyA:`doubleNestedValueA-${e}`,doubleNestedKeyB:3*e}},keyE:e%2==0||void 0}))}},49744:(e,t,n)=>{"use strict";n.d(t,{I:()=>o,t:()=>s});var a=n(74848),i=n(96540);let r=(0,i.createContext)(void 0),s=({children:e})=>{let[t,n]=(0,i.useState)(!1),s=(0,i.useMemo)(()=>({hasNewActivity:t,setHasNewActivity:n}),[t]);return(0,a.jsx)(r,{value:s,children:e})};s.displayName="ListItemNewActivityProvider";let o=()=>{let e=(0,i.use)(r);if(!e)throw Error("useListItemNewActivity must be used with NewActivityProvider.");return e};try{r.displayName||(r.displayName="NewActivityContext")}catch{}},50205:(e,t,n)=>{"use strict";n.d(t,{Dy:()=>i,O1:()=>s,QL:()=>d,eX:()=>l,n1:()=>a,os:()=>c,tD:()=>r,tp:()=>o});let a=["h1","h2","h3","h4","h5","h6"],i=["list-view","list-view-metadata","listitem"],r="h2",s={"list-view":r,"list-view-metadata":"h3",listitem:"h3"},o="default",l=!1,c=!1,d="List view"},51625:(e,t,n)=>{"use strict";n.d(t,{_x:()=>i,cP:()=>r,eu:()=>a,pI:()=>s});let a="spark",i="Spark",r="/spark",s="Create web apps with React and TypeScript to prototype ideas, build tools, and more"},51880:(e,t,n)=>{"use strict";n.d(t,{B:()=>l});var a=n(74848),i=n(29731),r=n(34164),s=n(24347),o=n(29622);let l=({style:e,className:t,children:n})=>{let{isSelectable:l}=(0,s.v)(),{alignment:c}=(0,o.m)();return(0,a.jsx)("div",{className:(0,r.$)("LeadingContent-module__container--cui6v",l&&"LeadingContent-module__isSelectable--EzWvg","center"===c&&"LeadingContent-module__centerAligned--f1Pzo",t),...(0,i.G)("list-view-item-leading-content"),style:e,children:n})};try{l.displayName||(l.displayName="ListItemLeadingContent")}catch{}},53053:(e,t,n)=>{"use strict";n.d(t,{j1:()=>l,tR:()=>s});var a=n(44104),i=n(48287).hp;let r=[{extension:"png",mimeType:"image/png",category:"Image",description:"PNG"},{extension:"jpg",mimeType:"image/jpeg",category:"Image",description:"JPG"},{extension:"jpeg",mimeType:"image/jpeg",category:"Image",description:"JPEG"},{extension:"gif",mimeType:"image/gif",category:"Image",description:"GIF"},{extension:"svg",mimeType:"image/svg+xml",category:"Image",description:"SVG"},{extension:"webp",mimeType:"image/webp",category:"Image",description:"WebP"},{extension:"pdf",mimeType:"application/pdf",category:"Document",description:"PDF"},{extension:"mp3",mimeType:"audio/mpeg",category:"Audio",description:"MP3"},{extension:"ogg",mimeType:"audio/ogg",category:"Audio",description:"OGG"},{extension:"mp4",mimeType:"video/mp4",category:"Video",description:"MP4"},{extension:"webm",mimeType:"video/webm",category:"Video",description:"WebM"}];function s(e){let t,n=e.split(".").pop()?.toLowerCase()||"",a=r.find(e=>e.extension===n);if(!a)return{type:"unknown",mimeType:"application/octet-stream"};switch(a.category){case"Image":t="image";break;case"Document":t="pdf";break;case"Audio":t="audio";break;case"Video":t="video";break;default:t="unknown"}return{type:t,mimeType:a.mimeType}}async function o(e,t,n=!0){let a,r,{mimeType:l}=s(t);if(e instanceof Uint8Array)a=e;else if(Array.isArray(e))a=new Uint8Array(e);else if("object"==typeof e&&null!==e){let t=Object.keys(e),n=-1;for(let e of t){let t=Number(e);t>n&&(n=t)}let i=n+1,r=Array(i);for(let t=0;t<i;t++)r[t]=e[t]||0;a=new Uint8Array(r)}else throw Error("Unexpected bytes format");if(n){let e=new Blob([a],{type:l});return URL.createObjectURL(e)}if(void 0!==i)r=i.from(a).toString("base64");else{let e=[];for(let t=0;t<a.length;t+=4096){let n=a.slice(t,Math.min(t+4096,a.length)),i="";for(let e=0;e<n.length;e++){let t=n[e];void 0!==t&&(i+=String.fromCharCode(t))}e.push(i)}r=btoa(e.join(""))}return`data:${l};base64,${r}`}async function l(e,t){try{let{type:n}=s(e);if("image"===n||"pdf"===n||"audio"===n||"video"===n){let a=await t.readFileBytes(e),i=function(e,t,n){if("svg"===(t.split(".").pop()?.toLowerCase()||""))return!1;if("pdf"===n||"audio"===n||"video"===n)return!0;if("image"===n){let t=0;return e instanceof Uint8Array||Array.isArray(e)?t=e.length:"object"==typeof e&&null!==e&&(t=Object.keys(e).length),t>=32768}return!0}(a,e,n);return await o(a,e,i)}return await t.readFileString(e)}catch(e){return a.Ay.error("Error reading media file:",e),null}}},53242:(e,t,n)=>{"use strict";n.d(t,{JU:()=>b,yO:()=>x});var a=n(74848),i=n(69599),r=n(76648),s=n(96379),o=n(96540),l=n(49080),c=n(96104),d=n(39671),u=n(44048),m=n(18438),p=n(82037),h=n(32535),f=n(41339),g=n(15164);let y=(0,o.createContext)(void 0),b=({children:e})=>{let{codespaceData:{codespaceState:t}}=(0,u.M)(),{executeCommand:n,stopCommand:b,state:{history:x}}=(0,h.P)(),v=x[c.P_.Deploy],{friendlyName:w}=(0,f._C)(),{isAgentBusy:_}=(0,g.dt)(),{status:{[g.kl.AGENT]:S}}=(0,g.MY)(),{workbench:C,organizations:k,canDeployToAllGithub:E=!0}=(0,r.B)(),{isServerConnected:j}=(0,p.KY)(),{deploy:N,refetch:A}=(0,f._C)(),{previousRefinements:I}=(0,m.P9)(),T=(0,o.useMemo)(()=>(e=>{for(let t=e.length-1;t>=0;t-=1){let n=e[t]?.sha;if(n&&n!==m.zJ)return n}})(I),[I]),[R,M]=(0,o.useState)("unpublished"),[L,P]=(0,o.useState)(void 0),[D,$]=(0,o.useState)(void 0),[F,O]=(0,o.useState)({setting:C?.runtime?.app?.deploymentVisibility?.setting||"only_owner",organizationId:C?.runtime?.app?.deploymentVisibility?.organizationId||null}),[B,U]=(0,o.useState)(C?.runtime?.app?.readOnlyKv??!1),W=(0,o.useRef)(!1),V=N?(0,d.A)({friendlyName:w,deployLogin:N.deployLogin,domainBase:N.domainBase}):"",G=N?`https://${N.displayName}--${w}--${N.deployLogin}.${N.domainBase}`:"",z=N?"success":"failure";(0,o.useEffect)(()=>{N&&(M("published"),P(V))},[N,V,w]);let H=(0,o.useCallback)(()=>N?V:(0,d.A)({friendlyName:w,deployLogin:C.runtime.owner.deployLogin,domainBase:C.runtime.owner.deploymentDomainBase}),[N,w,V,C]),q=(0,l.s)(),K=(0,o.useCallback)(async()=>{let e=Date.now();try{let t="unpublished"===R?"publishingFirstTime":"republishing";M(t),$(e),q("spark_deployed",{publishing_status:t,url:H(),visibility:F.setting,visibility_organization_id:F.organizationId});await n("/usr/local/bin/deploy.sh | tee -a /var/log/spark-publishing.log",c.P_.Deploy),A()}catch{let t="publishingFirstTime"===R?"unpublished":W.current?"republishCanceled":"republishFailed";M(t),q("deploy_status",{duration_ms:Date.now()-e,publishing_status:t,success:!1,url:H(),visibility:F.setting,visibility_organization_id:F.organizationId}),W.current=!1}},[R,q,H,F,C,n,A]),Y=(0,o.useCallback)(async()=>{},[]),X=(0,o.useCallback)(()=>{W.current=!0,b(v)},[b,v]),{output:Z,loading:J,startTime:Q,endTime:ee,stopped:et}=v,en=(0,o.useCallback)(async e=>{O(e);let t={visibility:e.setting,visibility_organization_id:e.organizationId},n=Date.now();return(await (0,s.DI)(`/copilot/spark/runtime/deployment/${C.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok?(q("spark_shared",{duration_ms:Date.now()-n,visibility:e.setting,visibility_organization_id:e.organizationId,success:!0}),!0):(O(F),q("spark_shared",{duration_ms:Date.now()-n,visibility:e.setting,visibility_organization_id:e.organizationId,success:!1}),!1)},[C.id,q,F]),ea=(0,o.useCallback)(async e=>{U(e);let t=Date.now();try{return await (0,s.DI)(`/copilot/spark/runtime/deployment/${C.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({read_only_kv:e})}),q("data_access_updated",{duration_ms:Date.now()-t,is_readonly:e,success:!0}),!0}catch(n){return U(B),q("data_access_updated",{duration_ms:Date.now()-t,is_readonly:e,success:!1,error:n instanceof Error?n.message:String(n)}),!1}},[C.id,q,B]);(0,o.useEffect)(()=>{if("publishingFirstTime"===R||"republishing"===R){let e=!!(Q&&!ee)||J,t=Z.includes("[--Build: Complete--]"),n=Z.includes("[--Deployment: Complete--]"),a=Z.match(/https:\/\/.*\.github\.app/),i=!e&&a?a[0]:"",r=V||i,s=Q?e||t?t?"success":"pending":"failure":z,o=Q?e?"pending":n?"success":"failure":z;if(!e||et)if($(void 0),"success"===o&&"success"===s)M("published"),P(r),q("deploy_status",{duration_ms:D?Date.now()-D:0,publishing_status:status,success:!0,url:r,visibility:F.setting,visibility_organization_id:F.organizationId});else{let e="republishing"===R?W.current?"republishCanceled":"republishFailed":"unpublished";M(e),q("deploy_status",{duration_ms:D?Date.now()-D:0,publishing_status:e,success:!1,url:r,visibility:F.setting,visibility_organization_id:F.organizationId}),W.current=!1}}},[R,Q,ee,J,Z,z,et,q,D,F,V]);let ei=!J&&!_&&((0,i.G7)("spark_server_connection_status")?j:"ready"===t&&S===g.i.CONNECTED),er=N?.createdAt,es=N?.revision,eo=T===es,el=(0,o.useMemo)(()=>({publishingStatus:R,publishedUrl:L,canCurrentlyPublish:ei,startDeploymentPipeline:K,visibility:F.setting,visibilityOrganizationId:F.organizationId,readOnlyKv:B,updateVisibility:en,updateDataAccess:ea,unpublish:Y,cancelPublishing:X,previewUrl:G,isPublishUpToDate:eo,deployedAt:er,deploymentSha:es,organizationsPublishableTo:k,canPublishToAllGithub:E}),[R,L,ei,K,F,B,en,ea,Y,X,G,eo,er,es,k,E]);return(0,a.jsx)(y,{value:el,children:e})},x=()=>{let e=(0,o.use)(y);if(!e)throw Error("usePublishing must be used within a PublishingProvider");return e};try{y.displayName||(y.displayName="PublishingContext")}catch{}try{b.displayName||(b.displayName="PublishingProvider")}catch{}},53552:(e,t,n)=>{"use strict";n.d(t,{eu:()=>l,qV:()=>o,sq:()=>c});var a=n(74848),i=n(79634),r=n(96540);let s=r.createContext({});function o({children:e,...t}){return(0,a.jsx)(s,{value:t,children:e})}function l(){return r.use(s)}function c(){return(0,i.X)()}try{s.displayName||(s.displayName="FilesPageInfoContext")}catch{}try{o.displayName||(o.displayName="FilesPageInfoProvider")}catch{}},53627:(e,t,n)=>{"use strict";n.d(t,{C3:()=>l,JV:()=>r,K3:()=>m,MM:()=>c,OE:()=>p,Zu:()=>u,bj:()=>s,jc:()=>d,kd:()=>o});var a=n(56038);let i=null;function r(){return a.Kn?.state||{}}function s(e){h(r(),"",e)}function o(e){a.Kn?.pushState({appId:r().appId},"",e),f()}function l(e){let t={...r(),...e};i&&(i=t),h(t,"",location.href)}function c(e){s(`?${e.toString()}${a.fV.hash}`)}function d(){s(a.fV.pathname+a.fV.hash)}function u(e){s(e.startsWith("#")?e:`#${e}`),(i=r())&&requestIdleCallback(()=>{!history.state&&i&&(l(i),i=null)})}function m(){s(a.fV.pathname+a.fV.search)}function p(){a.Kn?.back()}function h(e,t,n){a.Kn?.replaceState(e,t,n),f()}function f(){a.cg?.dispatchEvent(new CustomEvent("statechange",{bubbles:!1,cancelable:!1}))}},53687:(e,t,n)=>{"use strict";n.d(t,{P:()=>o,e:()=>s});var a=n(74848),i=n(96540);let r=(0,i.createContext)({multiPageSelectionAllowed:!1}),s=({children:e,multiPageSelectionAllowed:t=!1})=>{let[n,s]=(0,i.useState)(t),o=(0,i.useMemo)(()=>({multiPageSelectionAllowed:n,setMultiPageSelectionAllowed:s}),[n]);return(0,a.jsx)(r,{value:o,children:e})};s.displayName="ListViewMultiPageSelectionProvider";let o=()=>(0,i.use)(r);try{r.displayName||(r.displayName="MultiPageSelectionContext")}catch{}},54030:(e,t,n)=>{"use strict";n.d(t,{o:()=>u});var a=n(5225),i=n(78314),r=n(59672),s=n(96379),o=n(96540);async function l(e){let t=await (0,s.lS)(e);return t.ok?await t.json():void 0}let c=new Map,d=(0,a.A)(l,{cache:c});function u(e,t,n){let a=(0,i.t)(),[s,l]=(0,o.useState)({list:[],directories:[],loading:!0}),c=(0,r.ClY)({repo:a,commitOid:e,includeDirectories:!n});return(0,o.useEffect)(()=>{let e=!1,n=async()=>{l({list:[],directories:[],loading:!0});let t=await d(c);if(e)return;let n=t?.paths||[],a=t?.directories||[];l({list:n.concat(a).sort(),directories:a,error:!t})};return t&&n(),function(){e=!0}},[c,t,n]),s}},55552:(e,t,n)=>{"use strict";n.d(t,{m:()=>r,p:()=>i});var a=n(96540);let i=(0,a.createContext)(void 0);function r(){let e=(0,a.use)(i);if(!e)throw Error("useEditorContext must be used within a EditorContextProvider");return e}},56557:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(96540);let i=function(e){let t=(0,a.useRef)(null);return(0,a.useEffect)(()=>{t.current=e},[e]),t.current}},56634:(e,t,n)=>{"use strict";n.d(t,{JU:()=>r,KY:()=>d,MP:()=>u,Qv:()=>c,V4:()=>o,dS:()=>p,eF:()=>i,ft:()=>l,nQ:()=>s,t5:()=>m});var a=n(74848);let i=e=>(0,a.jsx)("svg",{...e,width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M3 12.248V3H12.25C12.6642 3 13 3.33579 13 3.75C13 4.16421 12.6642 4.5 12.25 4.5H4.5V12.248C4.5 12.6623 4.16421 12.998 3.75 12.998C3.33579 12.998 3 12.6623 3 12.248Z",fill:"currentColor"})}),r=e=>(0,a.jsx)("svg",{...e,"aria-hidden":"true",viewBox:"0 0 16 16",width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M3 12.2549V4.75C3 3.7835 3.7835 3 4.75 3H12.2471C12.6613 3 12.9971 3.33579 12.9971 3.75C12.9971 4.16421 12.6613 4.5 12.2471 4.5H4.75C4.61193 4.5 4.5 4.61193 4.5 4.75V12.2549C4.49994 12.669 4.16418 13.0049 3.75 13.0049C3.33582 13.0049 3.00006 12.669 3 12.2549Z",fill:"currentColor"})}),s=e=>(0,a.jsx)("svg",{...e,"aria-hidden":"true",viewBox:"0 0 16 16",width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M3 12.2529V6.75C3 4.67893 4.67893 3 6.75 3H12.25L12.3262 3.00391C12.7046 3.0421 13 3.36152 13 3.75C13 4.13848 12.7046 4.4579 12.3262 4.49609L12.25 4.5H6.75C5.50736 4.5 4.5 5.50736 4.5 6.75V12.2529C4.5 12.6671 4.16421 13.0029 3.75 13.0029C3.33579 13.0029 3 12.6671 3 12.2529Z",fill:"currentColor"})}),o=e=>(0,a.jsx)("svg",{...e,"aria-hidden":"true",viewBox:"0 0 16 16",width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M3 12.249V8.75C3 5.57436 5.57436 3 8.75 3H12.25L12.3262 3.00391C12.7044 3.04227 13 3.36164 13 3.75C13 4.13836 12.7044 4.45773 12.3262 4.49609L12.25 4.5H8.75C6.40279 4.5 4.5 6.40279 4.5 8.75V12.249C4.5 12.6632 4.16421 12.999 3.75 12.999C3.33579 12.999 3 12.6632 3 12.249Z",fill:"currentColor"})}),l=e=>(0,a.jsx)("svg",{...e,"aria-hidden":"true",viewBox:"0 0 16 16",width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M3 12.252V10.75C3 6.46979 6.46979 3 10.75 3H12.2539C12.6681 3 13.0039 3.33579 13.0039 3.75C13.0039 4.16421 12.6681 4.5 12.2539 4.5H10.75C7.29822 4.5 4.5 7.29822 4.5 10.75V12.252C4.5 12.6662 4.16421 13.002 3.75 13.002C3.33579 13.002 3 12.6662 3 12.252Z",fill:"currentColor"})}),c=e=>(0,a.jsxs)("svg",{...e,"aria-hidden":!0,width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M5.75 7.75H10.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M13 4.75H3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M13 10.75H3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),d=e=>(0,a.jsxs)("svg",{...e,"aria-hidden":!0,width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M5.75 7.75H10.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M13 3.75H3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M13 11.75H3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),u=e=>(0,a.jsxs)("svg",{...e,"aria-hidden":!0,width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M5.75 7.75H10.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M13 2.75H3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M13 12.75H3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]}),m=e=>(0,a.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,a.jsx)("path",{d:"M14.5 2.74976C14.4999 2.6118 14.388 2.49976 14.25 2.49976H8.75V13.4998H14.25C14.3881 13.4998 14.5 13.3878 14.5 13.2498V2.74976ZM1.5 13.2498L1.50488 13.3005C1.52823 13.4144 1.62923 13.4998 1.75 13.4998H7.25V2.49976H1.75C1.61201 2.49976 1.50013 2.6118 1.5 2.74976V13.2498ZM16 13.2498C16 14.2163 15.2165 14.9998 14.25 14.9998H1.75C0.843742 14.9998 0.098183 14.3111 0.00878906 13.4285L0 13.2498V2.74976C0.000133863 1.78337 0.783585 0.999756 1.75 0.999756H14.25C15.2164 0.999756 15.9999 1.78337 16 2.74976V13.2498Z",fill:"currentColor"})}),p=e=>(0,a.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("g",{clipPath:"url(#clip0_1934_35984)",children:(0,a.jsx)("path",{d:"M8 0a.75.75 0 01.75.75v.793a6.503 6.503 0 015.707 5.707h.793a.75.75 0 110 1.5h-.793a6.503 6.503 0 01-5.707 5.707v.793a.75.75 0 11-1.5 0v-.793A6.503 6.503 0 011.543 8.75H.75a.75.75 0 010-1.5h.793A6.503 6.503 0 017.25 1.543V.75A.75.75 0 018 0zm-.75 3.056A5.004 5.004 0 003.056 7.25H5.25a.75.75 0 010 1.5H3.056a5.003 5.003 0 004.194 4.194V10.75a.75.75 0 111.5 0v2.194a5.002 5.002 0 004.194-4.194H10.75a.75.75 0 110-1.5h2.194A5.003 5.003 0 008.75 3.056V5.25a.75.75 0 01-1.5 0V3.056z",fill:"currentColor"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_1934_35984",children:(0,a.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})})]})},56825:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var a=n(96540),i=n(50205),r=n(61015);function s(e){let{titleHeaderTag:t,hasMetadataTitle:n}=(0,r.t)();return(0,a.useMemo)(()=>{let a=i.Dy.findIndex(t=>t===e),r=i.n1.indexOf(t)+(n?a:a-1);return r>i.n1.length-1?"h6":i.n1[r]||i.O1[e]},[t,n,e])}},58639:(e,t,n)=>{"use strict";function a(){return crypto.randomUUID()}n.d(t,{v4:()=>a})},58917:(e,t,n)=>{"use strict";n.d(t,{AU:()=>d,Ac:()=>c});var a=n(74848),i=n(96540),r=n(93515),s=n(44104),o=n(67225);let l=(0,i.createContext)(void 0);function c({children:e}){let{fileSyncerStarted:t,fileTreeStateStamp:n,getFileSyncerV2:r,notifyEdited:c}=(0,o.d)(),[d,u]=(0,i.useState)([]),m=(0,i.useCallback)(()=>{if(t)return r()},[t,r]);(0,i.useEffect)(()=>{t&&e();async function e(){let e=r();if(e)try{u(await e.getDirectoryContents("."))}catch(e){s.Ay.error("Error fetching file entries:",e)}}},[n,t,r]);let p=(0,i.useCallback)(async({filePath:e,newFileContent:t})=>{await m()?.writeFileString(e,t??""),c()},[c,m]),h=(0,i.useCallback)(async({filePath:e,content:t})=>{await m()?.writeFileBytes(e,t),c()},[c,m]),f=(0,i.useCallback)(()=>d,[d]),g=(0,i.useMemo)(()=>({editFile:p,getFileList:f,writeFileBytes:h}),[p,f,h]);return(0,a.jsx)(l,{value:g,children:e})}function d(){let e=(0,i.use)(l);return(0,r.iY)(e,"useFilesContext must be used within a FilesContextProvider."),e}try{l.displayName||(l.displayName="FilesContext")}catch{}try{c.displayName||(c.displayName="FilesContextProvider")}catch{}},60257:(e,t,n)=>{"use strict";n.d(t,{W:()=>c,r:()=>d});var a=n(74848),i=n(4559),r=n(73189),s=n(96540),o=n(74501);let l=(0,s.createContext)({isSelected:!1,onSelect:r.l}),c=({children:e,value:{isSelected:t,onSelect:n}})=>{let{title:r}=(0,o.J)(),c=(0,s.useMemo)(()=>({isSelected:t,onSelect:e=>{(0,i.i)(e?`Selected. ${r}.`:`Unselected. ${r}.`),n(e)}}),[t,n,r]);return(0,a.jsx)(l,{value:c,children:e})};c.displayName="ListItemSelectionProvider";let d=()=>(0,s.use)(l);try{l.displayName||(l.displayName="SelectionContext")}catch{}},61015:(e,t,n)=>{"use strict";n.d(t,{t:()=>l,y:()=>o});var a=n(74848),i=n(96540),r=n(50205);let s=(0,i.createContext)(void 0),o=({children:e,title:t,titleHeaderTag:n=r.tD})=>{let[o,l]=(0,i.useState)(!1),c=(0,i.useMemo)(()=>({title:t.trim()||r.QL,titleHeaderTag:n,hasMetadataTitle:o,setHasMetadataTitle:l}),[o,t,n]);return(0,a.jsx)(s,{value:c,children:e})};o.displayName="ListViewTitleProvider";let l=()=>{let e=(0,i.use)(s);if(!e)throw Error("useListViewTitle must be used with TitleProvider.");return e};try{s.displayName||(s.displayName="TitleContext")}catch{}},63279:(e,t,n)=>{"use strict";n.d(t,{I:()=>s});var a=n(74848),i=n(34164),r=n(96540);let s=({scrollingRef:e})=>{let[t,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let t=e=>{e.currentTarget.scrollTop>0?n(!0):n(!1)},a=e.current;return a?.addEventListener("scroll",t),()=>{a?.removeEventListener("scroll",t)}},[e]),(0,a.jsx)("div",{className:(0,i.$)("Overscroll-module__overscroll--donNL",{"Overscroll-module__showOverscroll--oyMGi":t})})};try{s.displayName||(s.displayName="Overscroll")}catch{}},64375:(e,t,n)=>{"use strict";n.d(t,{$:()=>s,P:()=>o});var a=n(74848),i=n(96540);let r=i.createContext(!0);function s({allShortcutsEnabled:e,children:t}){return(0,a.jsxs)(r,{value:e,children:[" ",t," "]})}function o(){return i.use(r)}try{r.displayName||(r.displayName="AllShortcutsEnabledContext")}catch{}try{s.displayName||(s.displayName="AllShortcutsEnabledProvider")}catch{}},64642:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var a=n(5225),i=n(91385);let r=(0,a.A)(i.fN);function s({data:e}){let{query:t,baseList:n,startTime:a}=e,s=t.replaceAll("\\","");return{query:t,list:n.filter(e=>{var t,n;return t=e,""===(n=s)||(0,i.qA)(n,t)&&r(n,t)>0}).sort((e,t)=>r(s,t)-r(s,e)),baseCount:n.length,startTime:a}}},65787:(e,t,n)=>{"use strict";n.d(t,{U:()=>r});let a=e=>{let t=getComputedStyle(e,null);return!!t&&"function"==typeof t.getPropertyValue&&["overflow","overflow-y","overflow-x"].some(e=>{let n=t.getPropertyValue(e);return"auto"===n||"scroll"===n})},i=(e,t)=>e&&null!==e.parentNode?i(e.parentNode,t.concat([e])):t;function r(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(let t of i(e.parentNode,[]))if((t instanceof HTMLElement||t instanceof SVGElement)&&a(t))return t;return document.scrollingElement||document.documentElement}}},65964:(e,t,n)=>{"use strict";n.d(t,{e:()=>h});var a=n(74848),i=n(29731),r=n(9141),s=n(10436),o=n(34164),l=n(96540),c=n(35220),d=n(29622),u=n(49744),m=n(27603);let p=()=>(0,a.jsx)("div",{className:"UnreadIndicator-module__container--X6F4o",children:(0,a.jsx)("span",{className:"sr-only",...(0,i.G)("list-view-item-unread-indicator"),children:"New activity."})});try{p.displayName||(p.displayName="ListItemUnreadIndicator")}catch{}function h({icon:e,color:t,description:n,newActivity:h=!1,className:f,children:g,size:y=16,...b}){let{variant:x}=(0,c.e)(),{setStatus:v}=(0,m.x)(),{setHasNewActivity:w}=(0,u.I)(),_=n?.trim(),{alignment:S}=(0,d.m)(),C=(0,r.tv)(y,16);(0,l.useEffect)(()=>{w(h)},[h,w]),(0,l.useEffect)(()=>{_&&v(_)},[v,_]);let k="center"===S?0:("compact"===x?18:h?13:22)-C/2;return(0,a.jsxs)("div",{className:(0,o.$)("LeadingVisual-module__outer--qS9Ac",f),style:{marginTop:`${k}px`},...b,children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{...(0,i.G)("list-view-leading-visual"),className:"LeadingVisual-module__inner--GeEeG",style:{width:`${C}px`,height:`${C}px`},children:[e&&(0,a.jsx)(s.m4,{"aria-label":"",icon:e,color:t}),g,_&&(0,a.jsx)("span",{className:"sr-only",...(0,i.G)("leading-visual-text-description"),children:_})]})}),h&&(0,a.jsx)(p,{})]})}try{h.displayName||(h.displayName="ListItemLeadingVisual")}catch{}},68556:(e,t,n)=>{"use strict";n.d(t,{Nz:()=>u,tp:()=>m});var a=n(74848),i=n(96540),r=n(49080),s=n(44048),o=n(18438),l=n(15164);let c=(0,i.createContext)(void 0),d={frameContentLoaded:!1,pingReceived:!1,errorReceived:!1,viteServerReady:!1,viteWsConnected:!1,viteServerConnectionTimedOut:!1,viteError:!1,viteUpdated:!1,rootElementEmpty:!0,rootElementExists:!1,viteSessionId:"unknown"},u=({children:e})=>{let t=(0,r.s)(),{codespaceData:n}=(0,s.M)(),{status:{[l.kl.RUNTIME]:u},onConnected:m,onDisconnected:p,onError:h,onSuccess:f}=(0,l.MY)(),[g,y]=(0,i.useState)({...d}),{currentRefinementId:b}=(0,o.P9)(),[x,v]=(0,i.useState)([]),[w,_]=(0,i.useState)([]),S=(0,i.useCallback)(e=>{y(n=>{let a={...n,...e},i=Object.keys(e).some(t=>n[t]!==e[t]);return i&&t("preview.state",{state:JSON.stringify(a),timestamp:Date.now()}),i?a:n})},[t]),C=(0,i.useCallback)(e=>{t("spark_rendered",{error:e,iteration_id:b||null})},[b,t]),k=(0,i.useCallback)(e=>{switch(e.data?.type){case"sparkRuntimeError":S({errorReceived:!0}),C(!0),v(t=>[...t,{type:"runtimeError",error:e.data.payload}]),h({service:l.kl.RUNTIME}),_(t=>[...t,{path:e.data.payload.path,line:e.data.payload.line,column:e.data.payload.column,message:e.data.payload.message}]);break;case"sparkRuntimePing":S({pingReceived:!0}),u===l.nW.DISCONNECTED&&m({service:l.kl.RUNTIME}),t("preview.tools-version",{version:e.data.payload?.version,timestamp:Date.now()});break;case"sparkRuntimeLoaded":C(!1);break;case"sparkViteWsConnect":{let{viteServerSessionId:t}=e.data.payload;S({viteWsConnected:!0,viteServerConnectionTimedOut:!1,viteSessionId:t}),m({service:l.kl.RUNTIME}),m({service:l.kl.VITE}),m({service:l.kl.DESIGNER});break}case"sparkViteWsDisconnect":{let{viteServerSessionId:n}=e.data.payload;t("preview.viteWsDisconnect",{rootElementEmpty:g.rootElementEmpty,timestamp:Date.now()}),m({service:l.kl.RUNTIME}),p({service:l.kl.VITE}),m({service:l.kl.DESIGNER}),S({viteWsConnected:!1,viteSessionId:n});break}case"sparkViteError":{let{viteServerSessionId:t}=e.data.payload;S({viteError:!0,viteSessionId:t}),C(!0),h({service:l.kl.VITE}),v(t=>[...t,{type:"buildError",error:e.data.payload}]);break}case"sparkViteAfterUpdate":{let{viteServerSessionId:t}=e.data.payload;S({viteUpdated:!0,viteSessionId:t}),_([]),f({service:l.kl.VITE});break}case"rootElementStatus":{let{isEmpty:t,exists:n}=e.data.payload;S({rootElementEmpty:t,rootElementExists:n})}}},[S,C,h,u,m,t,g.rootElementEmpty,p,f]);(0,i.useEffect)(()=>{let e=e=>{k(e)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,i.useEffect)(()=>{let e=null;return g.frameContentLoaded&&!g.viteWsConnected&&(e=window.setTimeout(()=>{y(e=>e.viteWsConnected?e:{...e,viteServerConnectionTimedOut:!0})},2e3)),g.viteWsConnected&&S({viteServerConnectionTimedOut:!1}),()=>{null!==e&&window.clearTimeout(e)}},[g.frameContentLoaded,g.viteWsConnected,S]),(0,i.useEffect)(()=>{if("ready"!==n.codespaceState){g.viteServerReady&&(S({...d}),v([]),_([]));return}if(g.viteServerReady)return;let{friendlyName:e}=n.codespaceInfo?.environment_data||{},t=n.remoteProvider?.tunnelProps.domain??"app.github.dev",a=n.codespaceInfo?.environment_data.connection.tunnelProperties?.connectAccessToken;if(!e||!t||!a)return;let i=null,r=async()=>{try{let n=`https://${e}-5000.${t}`,r=new Headers;r.set("X-Tunnel-Authorization",`tunnel ${a}`),(await fetch(n,{signal:AbortSignal.timeout(500),headers:r})).ok&&(S({viteServerReady:!0}),i&&window.clearInterval(i))}catch{}};return r(),i=window.setInterval(r,500),()=>{i&&window.clearInterval(i)}},[S,n,n.codespaceState,g.viteServerReady]);let E=(0,i.useCallback)(()=>{S({frameContentLoaded:!0})},[S]),j=(0,i.useMemo)(()=>({state:{viteServerReady:g.viteServerReady,viteWsConnected:g.viteWsConnected,viteUpdated:g.viteUpdated,viteError:g.viteError,viteSessionId:g.viteSessionId,rootElementEmpty:g.rootElementEmpty,rootElementExists:g.rootElementExists},errorQueue:x,runtimeErrors:w,onIFrameLoaded:E}),[g.viteServerReady,g.viteWsConnected,g.rootElementEmpty,g.rootElementExists,g.viteUpdated,g.viteError,g.viteSessionId,x,w,E]);return(0,a.jsx)(c,{value:j,children:e})},m=()=>{let e=(0,i.use)(c);if(void 0===e)throw Error("useWorkbenchPreview must be used within a WorkbenchPreviewProvider");return e};try{c.displayName||(c.displayName="WorkbenchPreviewContext")}catch{}try{u.displayName||(u.displayName="WorkbenchPreviewProvider")}catch{}},72931:(e,t,n)=>{"use strict";function a(){return{favicon:document.querySelector('.js-site-favicon[type="image/svg+xml"]'),faviconFallback:document.querySelector('.js-site-favicon[type="image/png"]')}}function i(e){let{favicon:t,faviconFallback:n}=a();if(!t||!n)return;let i=l();e=e.substr(0,e.lastIndexOf(".")),t.href=e=`${e}${i}.svg`;let r=t.href.substr(0,t.href.lastIndexOf("."));n.href=`${r}.png`}function r(){let{favicon:e,faviconFallback:t}=a();if(!e||!t)return;let n=l(),i=e.href.indexOf("-dark.svg"),r=e.href.substr(0,-1!==i?i:e.href.lastIndexOf("."));e.href=`${r}${n}.svg`,t.href=`${r}${n}.png`}function s(e){let{favicon:t,faviconFallback:n}=a();if(!t||!n)return;let i=t.getAttribute("data-base-href"),r="default"===e?"":`-${e}`,s=l();i&&(t.href=`${i}${r}${s}.svg`,n.href=`${i}${r}${s}.png`)}function o(){s("default")}function l(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"-dark":""}n.d(t,{Ow:()=>i,gd:()=>o,iD:()=>s,uQ:()=>r})},72994:(e,t,n)=>{"use strict";function a(e){return e&&0!==e.length?e.filter(e=>!!e.title||!!e.id):[]}function i(e){return e&&0!==e.length?e.filter(e=>"string"==typeof e?""!==e.trim():!!e.title||!!e.id).map(e=>"string"==typeof e?{title:e}:e):[]}n.d(t,{c:()=>i,t:()=>a})},73017:(e,t,n)=>{"use strict";n.d(t,{$6:()=>l,JR:()=>s,Jg:()=>d,vb:()=>r});var a=n(74848),i=n(12683);let r=u(i.az),s=u(i.EY),o=({ref:e,...t})=>(0,a.jsx)("div",{...t,ref:e});o.displayName="Div";let l=u(o),c=({ref:e,...t})=>(0,a.jsx)("bdi",{...t,ref:e});c.displayName="Bdi";let d=u(c);function u(e){let t=({html:t,...n})=>(0,a.jsx)(e,{...n,dangerouslySetInnerHTML:t?{__html:t}:void 0});return t.displayName=`SafeHTML${e.displayName||e.name}`,t}try{r.displayName||(r.displayName="VerifiedHTMLBox")}catch{}try{s.displayName||(s.displayName="VerifiedHTMLText")}catch{}try{l.displayName||(l.displayName="VerifiedHTMLDiv")}catch{}try{d.displayName||(d.displayName="VerifiedHTMLBdi")}catch{}},73056:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});var a=n(10204),i=n(33303);let r=new WeakMap;function s(e,t,n){let s;if(!e)throw Error("Not connected to alive");if(!t)throw Error("No channel name");let o=a.KK.parse(t);if(!o)throw Error("Invalid channel name");let l={subscriber:{dispatchEvent:e=>{e instanceof CustomEvent&&n(e.detail.data)}},topic:o},c=((s=r.get(e))||(s={subscribe:(0,i.rK)(t=>e.subscribe(t.flat())),unsubscribeAll:(0,i.rK)(t=>e.unsubscribeAll(...t))},r.set(e,s)),s);return c.subscribe([l]),{unsubscribe:()=>c.unsubscribeAll(l.subscriber)}}},74501:(e,t,n)=>{"use strict";n.d(t,{J:()=>o,y:()=>s});var a=n(74848),i=n(96540);let r=(0,i.createContext)(void 0),s=({children:e})=>{let[t,n]=(0,i.useState)(""),[s,o]=(0,i.useState)(null),l=(0,i.useRef)(null);(0,i.useEffect)(()=>{l?.current?.textContent&&n(l.current.textContent.trim())},[l,n]);let c=(0,i.useMemo)(()=>({title:t,titleAction:s,setTitleAction:o,headingRef:l}),[t,s]);return(0,a.jsx)(r,{value:c,children:e})};s.displayName="ListItemTitleProvider";let o=()=>{let e=(0,i.use)(r);if(!e)throw Error("useListItemTitle must be used with TitleProvider.");return e};try{r.displayName||(r.displayName="TitleContext")}catch{}},75564:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(74848),i=n(53053),r=n(38621),s=n(73077),o=n(76720);function l({path:e,value:t}){return(0,a.jsx)("div",{className:"UnsupportedFile-module__unsupportedFileContainer--nB7S2",children:(0,a.jsxs)(o.E,{children:[(0,a.jsx)(o.E.Visual,{children:(0,a.jsx)(r.AlertIcon,{size:"medium"})}),(0,a.jsx)(o.E.Heading,{children:"Unsupported file type"}),(0,a.jsx)(o.E.Description,{children:"We aren't able to preview this file in the editor. You can download it to view it locally."}),(0,a.jsx)(s.z,{as:"a",href:t,download:e.split("/").pop(),variant:"primary",className:"mt-3",children:"Download File"})]})})}try{l.displayName||(l.displayName="UnsupportedFile")}catch{}function c({src:e,className:t,onError:n}){return e&&(e.startsWith("blob:")||e.startsWith("data:audio/"))?(0,a.jsx)("div",{className:"d-flex flex-justify-center flex-items-center height-full p-4",children:(0,a.jsx)("audio",{controls:!0,src:e,className:`width-full ${t||""}`,onError:e=>{let t=Error("Audio loading failed");n&&n(t)},children:"Your browser does not support the audio element."})}):(0,a.jsx)("div",{className:"d-flex flex-column flex-justify-center flex-items-center height-full p-4",children:(0,a.jsx)("p",{children:"Error loading audio file. The file may be corrupted or not a valid audio format."})})}try{c.displayName||(c.displayName="AudioPreview")}catch{}function d({src:e,alt:t="Image preview",className:n}){return(0,a.jsx)("div",{className:"d-flex flex-justify-center flex-items-center height-full p-4",children:(0,a.jsx)("img",{src:e,alt:t,className:`width-full height-full ${n||""}`,style:{objectFit:"contain"}})})}try{d.displayName||(d.displayName="ImagePreview")}catch{}function u({src:e,className:t,onDownload:n}){return e&&(e.startsWith("data:application/pdf")||e.startsWith("blob:"))?(0,a.jsx)("div",{className:"d-flex flex-justify-center flex-items-center height-full p-4",children:(0,a.jsx)("object",{data:e,type:"application/pdf",className:`width-full height-full border-0 rounded-1 ${t||""}`,title:"PDF Viewer",children:(0,a.jsxs)("div",{className:"d-flex flex-column flex-justify-center flex-items-center height-full p-4",children:[(0,a.jsx)("p",{className:"mb-2",children:"Your browser does not support embedded PDFs."}),n?(0,a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:n,children:"Download PDF"}):(0,a.jsx)("a",{href:e,download:!0,className:"btn btn-primary",children:"Download PDF"})]})})}):(0,a.jsxs)("div",{className:"d-flex flex-column flex-justify-center flex-items-center height-full p-4",children:[(0,a.jsx)("p",{className:"mb-2",children:"Unable to preview PDF"}),n&&(0,a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:n,children:"Download PDF"})]})}try{u.displayName||(u.displayName="PdfPreview")}catch{}function m({src:e,className:t,onError:n}){return e&&(e.startsWith("blob:")||e.startsWith("data:video/"))?(0,a.jsx)("div",{className:"d-flex flex-justify-center flex-items-center height-full p-4",children:(0,a.jsx)("video",{controls:!0,src:e,className:`width-full ${t||""}`,onError:e=>{let t=Error("Video loading failed");n&&n(t)},children:"Your browser does not support the video element."})}):(0,a.jsx)("div",{className:"d-flex flex-column flex-justify-center flex-items-center height-full p-4",children:(0,a.jsx)("p",{children:"Error loading video file. The file may be corrupted or not a valid video format."})})}try{m.displayName||(m.displayName="VideoPreview")}catch{}function p({src:e,filePath:t,alt:n,className:r,onError:s,onDownload:o}){let{type:p}=(0,i.tR)(t);return"image"===p?(0,a.jsx)(d,{src:e,alt:n,className:r}):"pdf"===p?(0,a.jsx)(u,{src:e,className:r,onDownload:o}):"audio"===p?(0,a.jsx)(c,{src:e,className:r,onError:s}):"video"===p?(0,a.jsx)(m,{src:e,className:r,onError:s}):(0,a.jsx)(l,{path:t,value:e})}try{p.displayName||(p.displayName="MediaPreview")}catch{}},75846:()=>{},75986:(e,t,n)=>{"use strict";n.d(t,{If:()=>o,JE:()=>s});var a=n(74848),i=n(96540);let r=(0,i.createContext)(void 0),s=({children:e})=>{let t=(0,i.useId)(),n=(0,i.useMemo)(()=>({idPrefix:t}),[t]);return(0,a.jsx)(r,{value:n,children:e})};s.displayName="ListViewIdProvider";let o=()=>{let e=(0,i.use)(r);if(!e)throw Error("useListViewId must be used with IdProvider.");return e};try{r.displayName||(r.displayName="IdContext")}catch{}},77177:(e,t,n)=>{"use strict";n.d(t,{L:()=>o,O:()=>s});var a=n(74848),i=n(96540);let r=(0,i.createContext)(void 0),s=({children:e})=>{let[t,n]=(0,i.useState)(""),s=(0,i.useMemo)(()=>({description:t,setDescription:n}),[t]);return(0,a.jsx)(r,{value:s,children:e})};s.displayName="ListItemDescriptionProvider";let o=()=>{let e=(0,i.use)(r);if(!e)throw Error("useListItemDescription must be used with DescriptionProvider.");return e};try{r.displayName||(r.displayName="DescriptionContext")}catch{}},78314:(e,t,n)=>{"use strict";n.d(t,{d:()=>o,t:()=>l});var a=n(74848),i=n(16522),r=n(96540);let s=r.createContext({});function o(e){let t,n=(0,i.c)(3),{repository:r,children:o}=e;return n[0]!==o||n[1]!==r?(t=(0,a.jsxs)(s,{value:r,children:[" ",o," "]}),n[0]=o,n[1]=r,n[2]=t):t=n[2],t}function l(){return r.use(s)}try{s.displayName||(s.displayName="CurrentRepositoryContext")}catch{}try{o.displayName||(o.displayName="CurrentRepositoryProvider")}catch{}},79941:(e,t,n)=>{"use strict";let a;var i,r=n(70103),s=n(1723),o=n(96540),l=n(74848),c=n(16522),d=n(2635),u=n(79634),m=n(39467),p=n(15164),h=n(96459),f=n(96379),g=n(38621),y=n(34164);let b={sparkleSpinner:"SparkleSpinner-module__sparkleSpinner--qp5X_",small:"SparkleSpinner-module__small--bGiAU",medium:"SparkleSpinner-module__medium--GZiQj",large:"SparkleSpinner-module__large--sHRbZ",normal:"SparkleSpinner-module__normal--iL7VM","normal-spin":"SparkleSpinner-module__normal-spin--Nm2Tt",slow:"SparkleSpinner-module__slow--BVhxE","slow-spin":"SparkleSpinner-module__slow-spin--DKLC1"};function x(e){let{size:t="medium",speed:n="normal"}=e;return(0,l.jsx)(g.SparkleFillIcon,{"aria-hidden":"true",className:(0,y.$)(b.sparkleSpinner,b[t],b[n])})}let v=(0,o.memo)(x);try{x.displayName||(x.displayName="UnmemoizedSparkleSpinner")}catch{}try{v.displayName||(v.displayName="SparkleSpinner")}catch{}var w=n(56305),_=n(38835),S=n(58301),C=n(48582),k=n(46251),E=n(81960),j=n(19579),N=n(69599);let A=()=>{let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={showUrl:I},t[0]=e):e=t[0],e};function I(e,t,n){return(0,N.G7)("copilot_spark_handle_nil_friendly_name")?t?n&&n!==e&&n.length<=20?`/spark/${t}/${encodeURIComponent(n)}`:`/spark/${t}/${encodeURIComponent(e)}`:`/copilot/spark/${e}`:n&&t?`/spark/${t}/${encodeURIComponent(n)}`:t?`/spark/${t}/${encodeURIComponent(e)}`:`/copilot/spark/${e}`}var T=n(31993),R=n(97286);let M=(0,T.j)({queryKey:["workbenches"],queryFn:async()=>{let e=await (0,f.lS)("/copilot/spark/workbench",{method:"GET"});return e.ok?(await e.json()).workbenches:[]}});var L=n(11680),P=n(10576),D=n(26108),$=n(51625),F=n(84268);let O=()=>{let e,t,n=(0,c.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(F.A,{href:"https://gh.io/responsible-use-of-github-spark",inline:!0,muted:!0,children:"Spark"}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsxs)("p",{className:"LegalDisclaimer-module__container--dE6Rw",children:[e," ","uses AI. Check for mistakes."," ",(0,l.jsx)(F.A,{href:"https://docs.github.com/site-policy/github-terms/github-pre-release-license-terms",inline:!0,muted:!0,children:"Terms of service"}),"."]}),n[1]=t):t=n[1],t};try{O.displayName||(O.displayName="LegalDisclaimer")}catch{}var B=n(79064),U=n(18651);function W({attachImageFromFile:e,isDisabled:t=!1,onSuccess:n,onError:a}){let[i,r]=(0,o.useState)(!1),s=(0,o.useCallback)(e=>{let t=["image/jpeg","image/png","image/webp"];return!!e.items&&Array.from(e.items).some(e=>"file"===e.kind&&t.includes(e.type))},[]),l=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),s(e.dataTransfer)&&r(!0)},[s]),c=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),d=(0,o.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget===e.target&&r(!1)},[]);return{isDragOver:i,handleDragEnter:l,handleDragOver:c,handleDragLeave:d,handleDrop:(0,o.useCallback)(async i=>{if(i.preventDefault(),i.stopPropagation(),r(!1),t)return;let s=Array.from(i.dataTransfer.files);if(0===s.length)return;let o=s[0];if(o)try{await e(o),n?.("drop")}catch{a?.("drop")}},[t,e,n,a]),handlePaste:(0,o.useCallback)(async i=>{if(t)return;let r=Array.from(i.clipboardData.items).find(e=>e.type.startsWith("image/"));if(!r)return;i.preventDefault();let s=r.getAsFile();if(s)try{await e(s),n?.("paste")}catch{a?.("paste")}},[t,e,n,a])}}let V=["image/jpeg","image/png","image/webp"];var G=n(21373),z=n(26607),H=n(64138);let q="PromptArea-module__formContainer--jDccJ",K="PromptArea-module__disabledPromptInputContainer--RHvDU",Y="PromptArea-module__disabledFormContainerActions--MIOqS",X="PromptArea-module__alertBanner--oJfxe",Z=()=>{let{setPromptText:e,pendingSubmission:t,attachImage:n,attachImageFromFile:a,promptImage:i,clearImageAttachment:r,imageUploadError:s,setImageUploadError:c}=(0,w.Cq)(),[d,u]=(0,o.useState)(!1),[m,b]=(0,o.useState)(!1),[x,v]=(0,o.useState)(!1),_=(0,o.useRef)(null),C=(0,o.useRef)(null),E=(0,o.useRef)(null),j=(0,o.useRef)(null),[I,T]=(0,o.useState)(!1),{showUrl:R}=A(),M=(0,h.Z)(),F=(0,o.useMemo)(()=>(0,U.Fr)(),[]),{isDragOver:O,handleDragEnter:K,handleDragOver:Y,handleDragLeave:Z,handleDrop:J,handlePaste:Q}=W({attachImageFromFile:a,isDisabled:m}),ee=(0,p.MY)(),et=(0,S.x)(),en=et?.oldestSparkName,ea=(0,N.G7)("spark_allow_beta_env"),ei=(0,o.useCallback)((e="")=>{let t=_.current;if(!t)return;t.value=e,t.style.height="auto",t.style.height=`${Math.min(Math.max(t.scrollHeight,64),252)}px`;let n=e.trim().length;0===n&&d?u(!1):n>0&&!d&&u(!0)},[_,d,u]);(0,o.useEffect)(()=>{_.current&&t?.promptText&&ei(t.promptText)},[_,t?.promptText,ei]),(0,o.useEffect)(()=>{s&&j.current?.focus()},[s]);let er=(0,o.useCallback)(async t=>{if(m)return;let n=t??_.current?.value??"";if(""===n.trim())return;if(ee.reloadQuota(),_.current.value=n,e(n),b(!0),T(!1),(et?.activeSparksCount??0)>0)try{await (0,f.DI)(`/codespaces/${en}/suspend`,{method:"POST"})}catch(e){throw Error(`Failed to deactivate spark: ${String(e)}`)}let a=i?[i.media_type]:null;try{let e=await (0,f.lS)("/copilot/spark",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:{createSource:"index",fileTypes:a,filesAttached:!!i,numFiles:a?.length??0,promptLength:n.length,...ea&&{useBetaEnvironment:x}}});if(e.ok){let{id:t,billableOwner:n}=await e.json(),a=R(t,n?.login);M(a)}else T(!0),b(!1)}catch{T(!0),b(!1)}},[m,ee,e,et?.activeSparksCount,i,ea,x,en,R,M]),es=(0,o.useRef)(er);(0,o.useEffect)(()=>{es.current=er},[er]),(0,o.useEffect)(()=>{let e=B.Jt.getSparkEntrypointMessage();e&&(B.Jt.setSparkEntrypointMessage(null),es.current(e.message))},[]);let eo=(0,o.useCallback)(e=>{let t=_.current;if(!t||t.value.length>0)return!1;let n=t.scrollHeight-t.clientHeight;if(n<=0)return!1;let a=.8*t.clientHeight,i="down"===e?Math.min(t.scrollTop+a,n):Math.max(t.scrollTop-a,0);return i!==t.scrollTop&&(t.scrollTop=i,!0)},[]),el=(0,o.useCallback)(async e=>{if((0,N.G7)("spark_prompt_recall")){let t="ArrowDown"===e.key||"Down"===e.key,n="ArrowUp"===e.key||"Up"===e.key;if((t||n)&&eo(t?"down":"up"))return void e.preventDefault()}let t="Enter"===e.key;!t||e.shiftKey||F||t&&e.nativeEvent.isComposing||(e.preventDefault(),await er())},[F,er,eo]),ec=(0,o.useCallback)(()=>{r(),E.current?.focus()},[r,E]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{className:q,onSubmit:e=>{e.preventDefault()},children:[(0,l.jsx)(P.Ay,{className:(0,y.$)("PromptArea-module__promptInputContainer--VDDK2",O&&"PromptArea-module__promptInputContainerDragOver--LVBw5"),placeholder:$.pI,ref:_,rows:2,onChange:e=>ei(e.target.value),onKeyDown:el,onPaste:Q,onDragEnter:K,onDragOver:Y,onDragLeave:Z,onDrop:J,resize:"none"}),(0,l.jsxs)("div",{className:"PromptArea-module__formContainerActions--WUy5g",children:[i?(0,l.jsx)("div",{role:"toolbar","aria-label":"Attachments",className:"PromptArea-module__attachmentToolbar--JXvfF",children:(0,l.jsxs)("div",{className:"PromptArea-module__referenceToken--dFs5b",children:[(0,l.jsx)(g.ImageIcon,{className:"fgColor-muted"}),(0,l.jsx)("span",{className:"PromptArea-module__referenceTokenLabel--vQPKL",children:i.name}),(0,l.jsx)(D.K,{icon:g.XIcon,variant:"invisible",size:"small","aria-label":"Remove image",onClick:ec})]})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(G.Q,{variant:"invisible",leadingVisual:g.PaperclipIcon,ref:E,onClick:()=>C.current?.click(),className:"PromptArea-module__attachImageButton--v0kz5",children:"Attach image"}),(0,l.jsx)("input",{id:"image-uploader",hidden:!0,ref:C,type:"file",accept:V.join(","),onChange:n})]}),(0,l.jsx)(D.K,{onClick:d?()=>er():void 0,icon:g.PaperAirplaneIcon,"aria-label":"Submit prompt","data-testid":"submit-prompt",tooltipDirection:"n",variant:"invisible",loading:m,loadingAnnouncement:"Generating spark"})]})]}),ea&&(0,l.jsxs)(k.B,{direction:"horizontal",className:"PromptArea-module__betaContainer--cMMfg",children:[(0,l.jsx)(z.A,{variant:"attention",children:"Staff"}),(0,l.jsx)("div",{id:"beta-toggle-label",children:"ACA Beta Environment"}),(0,l.jsx)(H.A,{size:"small","aria-labelledby":"beta-toggle-label",onClick:()=>v(!x),checked:x,disabled:!1})]}),I&&(0,l.jsx)(L.l,{className:X,variant:"critical",title:"Error creating spark",description:"Unable to create Spark. Please try again.",hideTitle:!0,onDismiss:()=>{T(!1)}}),s&&(0,l.jsx)(L.l,{className:X,ref:j,variant:"critical",description:`Error attaching image: ${s}`,onDismiss:()=>{E.current?.focus(),c(void 0)}})]})};try{Z.displayName||(Z.displayName="PromptArea")}catch{}let J=()=>{let e,t,n,a,i,r,s=(0,c.c)(6),d=(0,o.useRef)(null),u=(0,o.useRef)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{if(!d.current||!u.current)return;let e=u.current.scrollTop;d.current.style.height="0";let t=Math.min(Math.max(d.current.scrollHeight,64),252);d.current.style.height=`${t-48}px`,u.current.style.height=`${t}px`,u.current.scrollTop=e},s[0]=e):e=s[0];let m=e;return s[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{m()},n=[m],s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,o.useLayoutEffect)(t,n),s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(L.l,{"aria-label":"Spark access is disabled.",title:"Spark access is disabled.",hideTitle:!0,description:"Spark access has been disabled by the admin of your organization or enterprise."}),i=(0,l.jsx)(P.Ay,{autoFocus:!0,className:K,placeholder:$.pI,ref:d,resize:"none",disabled:!0}),s[3]=a,s[4]=i):(a=s[3],i=s[4]),s[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("form",{className:q,children:(0,l.jsxs)("div",{className:"PromptArea-module__accessDisabledContainer--Dui6p",children:[a,(0,l.jsxs)("div",{children:[i,(0,l.jsx)("div",{className:Y,children:(0,l.jsx)(D.K,{icon:g.PaperAirplaneIcon,"aria-label":"Submit prompt","data-testid":"submit-prompt",tooltipDirection:"n",variant:"invisible",inactive:!0,"aria-disabled":!0})})]})]})}),s[5]=r):r=s[5],r},Q=()=>{let e,t,n,a=(0,c.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(J,{}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"vertical",regular:"horizontal",wide:"horizontal"},a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(k.B,{direction:t,wrap:"wrap",gap:{narrow:"normal",regular:"condensed",wide:"condensed"},align:{narrow:"stretch",regular:"center",wide:"center"},children:(0,l.jsx)(O,{})})]}),a[2]=n):n=a[2],n};try{J.displayName||(J.displayName="DisabledPromptArea")}catch{}try{Q.displayName||(Q.displayName="AccessDisabled")}catch{}let ee="Banner-module__SparkBanner--I2eX0";function et(){let e,t=(0,c.c)(1);if(t[0]===Symbol.for("react.memo_cache_sentinel")){let n=(0,l.jsxs)(l.Fragment,{children:["You have reached your editing limit for sparks this month. If you would like higher usage limits,"," ",(0,l.jsx)(F.A,{inline:!0,href:"https://gh.io/spark-higher-limits-request",target:"_blank",rel:"noopener noreferrer",children:"contact our team"}),"."]});e=(0,l.jsx)(L.l,{className:ee,description:n,hideTitle:!0,title:"Spark editing limit reached.",variant:"warning"}),t[0]=e}else e=t[0];return e}try{et.displayName||(et.displayName="ComputeLimitBanner")}catch{}function en(){let e,t=(0,c.c)(1);if(t[0]===Symbol.for("react.memo_cache_sentinel")){let n=(0,l.jsxs)(l.Fragment,{children:["Before you can use GitHub Spark, you need to pick a \u201CUsage billed to\u201D option in your Copilot settings."," ",(0,l.jsx)(F.A,{inline:!0,href:"https://github.com/settings/copilot/features",target:"_blank",rel:"noopener noreferrer",children:"Update your settings"}),", then try again."]});e=(0,l.jsx)(L.l,{className:ee,description:n,hideTitle:!0,title:"Billing issue with your account.",variant:"critical"}),t[0]=e}else e=t[0];return e}try{en.displayName||(en.displayName="CopilotBillingAssignmentBanner")}catch{}function ea(){let e,t=(0,c.c)(1);if(t[0]===Symbol.for("react.memo_cache_sentinel")){let n=(0,l.jsxs)(l.Fragment,{children:["We are having a problem billing your account. Please"," ",(0,l.jsx)(F.A,{inline:!0,href:"https://github.com/settings/billing/budgets/new",target:"_blank",rel:"noopener noreferrer",children:"update your payment method"})," ","to keep Copilot Pro limits available on Spark."]});e=(0,l.jsx)(L.l,{className:ee,description:n,hideTitle:!0,title:"Billing issue with your account.",variant:"critical"}),t[0]=e}else e=t[0];return e}try{ea.displayName||(ea.displayName="CopilotBillingBanner")}catch{}function ei(){let e,t=(0,c.c)(1);if(t[0]===Symbol.for("react.memo_cache_sentinel")){let n=(0,l.jsxs)(l.Fragment,{children:["You have reached your monthly consumption limit for deployed sparks. If you would like to request a higher limit,"," ",(0,l.jsx)(F.A,{inline:!0,href:"https://gh.io/spark-higher-limits-request",target:"_blank",rel:"noopener noreferrer",children:"contact our team"}),"."]});e=(0,l.jsx)(L.l,{className:ee,description:n,hideTitle:!0,title:"Maximum viewer limit reached.",variant:"warning"}),t[0]=e}else e=t[0];return e}try{ei.displayName||(ei.displayName="RuntimeLimitBanner")}catch{}function er(){let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(L.l,{className:ee,description:"Spark is currently at capacity. Editing sparks is temporarily disabled. Please try again later.",hideTitle:!0,title:"Spark editor is at capacity.",variant:"info"}),t[0]=e):e=t[0],e}try{er.displayName||(er.displayName="SparkInfraLimitBanner")}catch{}function es(e){let t,n,a,i=(0,c.c)(10),{className:r}=e,s=(0,o.useRef)(null),d=(0,_.h)();if(i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{if(s.current){let e=window.setTimeout(()=>{s.current?.focus()},0);return()=>{window.clearTimeout(e)}}},n=[s],i[0]=t,i[1]=n):(t=i[0],n=i[1]),(0,o.useEffect)(t,n),!d)return null;let u=null;switch(d){case C.x1.SPARK_INFRA_LIMIT:{let e;i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(er,{}),i[2]=e):e=i[2],u=e;break}case C.x1.COPILOT_BILLING_MEMBERSHIP:{let e;i[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(en,{}),i[3]=e):e=i[3],u=e;break}case C.x1.COPILOT_BILLING:{let e;i[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(ea,{}),i[4]=e):e=i[4],u=e;break}case C.x1.RUNTIME_LIMIT:{let e;i[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(ei,{}),i[5]=e):e=i[5],u=e;break}case C.x1.COMPUTE_LIMIT:{let e;i[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(et,{}),i[6]=e):e=i[6],u=e}}return i[7]!==u||i[8]!==r?(a=u?(0,l.jsx)("div",{ref:s,tabIndex:-1,className:(0,y.$)("width-full",r),children:u}):null,i[7]=u,i[8]=r,i[9]=a):a=i[9],a}try{es.displayName||(es.displayName="BannerContainer")}catch{}let eo=()=>{let e,t,n,a,i,r,s=(0,c.c)(6),d=(0,o.useRef)(null),u=(0,o.useRef)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{if(!d.current||!u.current)return;let e=u.current.scrollTop;d.current.style.height="0";let t=Math.min(Math.max(d.current.scrollHeight,64),252);d.current.style.height=`${t-48}px`,u.current.style.height=`${t}px`,u.current.scrollTop=e},s[0]=e):e=s[0];let m=e;return s[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{m()},n=[m],s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,o.useLayoutEffect)(t,n),s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(L.l,{"aria-label":"Upgrade to access Spark.",title:"Upgrade to access Spark.",hideTitle:!0,description:(0,l.jsxs)(l.Fragment,{children:["Spark is currently only available to Copilot Pro+ and Enterprise users."," ",(0,l.jsx)("a",{href:"https://github.com/github-spark/pro-plus?utm_source=web-spark-pro-cta&utm_campaign=spark-launch-sep-2025&locale=en-US",target:"_blank",rel:"noopener noreferrer",children:"Upgrade now to access Spark"}),"."]})}),i=(0,l.jsx)(P.Ay,{autoFocus:!0,className:K,placeholder:$.pI,ref:d,resize:"none",disabled:!0}),s[3]=a,s[4]=i):(a=s[3],i=s[4]),s[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("form",{className:q,children:(0,l.jsxs)("div",{className:"PromptArea-module__comingSoonContainer--BcSff",children:[a,i,(0,l.jsx)("div",{className:Y,children:(0,l.jsx)(D.K,{icon:g.PaperAirplaneIcon,"aria-label":"Submit prompt","data-testid":"submit-prompt",tooltipDirection:"n",variant:"invisible",inactive:!0,"aria-disabled":!0})})]})}),s[5]=r):r=s[5],r},el=()=>{let e,t,n,a=(0,c.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(eo,{}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t={narrow:"vertical",regular:"horizontal",wide:"horizontal"},a[1]=t):t=a[1],a[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsxs)(l.Fragment,{children:[e,(0,l.jsx)(k.B,{direction:t,wrap:"wrap",gap:{narrow:"normal",regular:"condensed",wide:"condensed"},align:{narrow:"stretch",regular:"center",wide:"center"},children:(0,l.jsx)(O,{})})]}),a[2]=n):n=a[2],n};try{eo.displayName||(eo.displayName="DisabledPromptArea")}catch{}try{el.displayName||(el.displayName="ComingSoon")}catch{}let ec="Layout-module__headerBlock--MCMId";var ed=n(97174),eu=n(2970),em=n(9214),ep=n(98994),eh=n(51880),ef=n(65964),eg=n(43617),ey=n(4929),eb=n(95378),ex=n(75202),ev=n(35750),ew=n(18150),e_=n(85242),eS=n(88243),eC=n(16213),ek=n(50467),eE=new WeakMap,ej=new WeakMap,eN=new WeakMap,eA=new WeakMap,eI=new WeakSet,eT=new WeakSet,eR=new WeakSet,eM=new WeakMap;function eL(){let e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=e>0?e:window.innerWidth;return{height:t>0?t:window.innerHeight,isLandscape:window.matchMedia("(orientation: landscape)").matches,isTouchDevice:"ontouchstart"in window||navigator.maxTouchPoints>0,pixelDensity:window.devicePixelRatio,width:n}}function eP(e,t){return e.height===t.height&&e.width===t.width&&e.isLandscape===t.isLandscape&&e.isTouchDevice===t.isTouchDevice&&e.pixelDensity===t.pixelDensity}function eD(){!(0,ev._)(this,ej)&&"u">typeof document&&((0,e_._)(this,ej,!0),(0,e_._)(this,eE,(0,eS._)(this,eI,eL).call(this)),null===(0,ev._)(this,eA)&&(0,e_._)(this,eA,requestAnimationFrame(()=>{(0,e_._)(this,eA,null);let e=(0,eS._)(this,eI,eL).call(this);if(!(0,eS._)(this,eT,eP).call(this,e,(0,ev._)(this,eE)))for(let t of((0,e_._)(this,eE,e),(0,ev._)(this,eN)))t()})))}let e$=new class ViewportStore{_reset(){(0,ev._)(this,eN).size>0&&(window.removeEventListener("resize",(0,ev._)(this,eM)),window.removeEventListener("orientationchange",(0,ev._)(this,eM))),null!==(0,ev._)(this,eA)&&(cancelAnimationFrame((0,ev._)(this,eA)),(0,e_._)(this,eA,null)),(0,e_._)(this,eE,{}),(0,e_._)(this,ej,!1),(0,ev._)(this,eN).clear()}constructor(){(0,eC._)(this,eI),(0,eC._)(this,eT),(0,eC._)(this,eR),(0,ew._)(this,eE,{writable:!0,value:{}}),(0,ew._)(this,ej,{writable:!0,value:!1}),(0,ew._)(this,eN,{writable:!0,value:new Set}),(0,ew._)(this,eA,{writable:!0,value:null}),(0,ew._)(this,eM,{writable:!0,value:()=>{let e=(0,eS._)(this,eI,eL).call(this);if(!(0,eS._)(this,eT,eP).call(this,e,(0,ev._)(this,eE)))for(let t of((0,e_._)(this,eE,e),(0,ev._)(this,eN)))t()}}),(0,ek._)(this,"subscribe",e=>{(0,eS._)(this,eR,eD).call(this);let t=0===(0,ev._)(this,eN).size;return(0,ev._)(this,eN).add(e),t&&(window.addEventListener("resize",(0,ev._)(this,eM)),window.addEventListener("orientationchange",(0,ev._)(this,eM))),()=>{(0,ev._)(this,eN).delete(e),0===(0,ev._)(this,eN).size&&(window.removeEventListener("resize",(0,ev._)(this,eM)),window.removeEventListener("orientationchange",(0,ev._)(this,eM)))}}),(0,ek._)(this,"getSnapshot",()=>((0,eS._)(this,eR,eD).call(this),(0,ev._)(this,eE))),(0,ek._)(this,"getServerSnapshot",()=>({}))}};function eF(){return(0,o.useSyncExternalStore)(e$.subscribe,e$.getSnapshot,e$.getServerSnapshot)}var eO=n(39671),eB=n(69726),eU=n(5524),eW=n(62935),eV=n(97665),eG=n(94747);async function ez(e){if(!(await (0,f.lS)(`/copilot/spark/workbench/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete");return e}async function eH(e){if(!(await (0,f.lS)(`/spark/favorites/${e.id}`,{method:e.favorite?"POST":"DELETE"})).ok)throw Error("Failed to favorite");return e.id}var eq=n(39414);let eK=e=>{let t,n=(0,c.c)(4),{workbench:a,onConfirm:i,onCancel:r}=e;return n[0]!==r||n[1]!==i||n[2]!==a?(t=(0,l.jsx)(eq.K,{title:"Delete spark",onClose:e=>{"confirm"===e?a&&i(a.id):r()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this spark? This action cannot be undone."}),n[0]=r,n[1]=i,n[2]=a,n[3]=t):t=n[3],t};try{eK.displayName||(eK.displayName="DeleteSparkDialog")}catch{}let eY=e=>{let t,n,a,i,r,s,d,u,m,h,f,g=(0,c.c)(30),{items:y,sparkEnabled:b}=e,[x,v]=(0,o.useState)(null),w=(0,o.useRef)(null),{width:_}=eF(),{showUrl:S}=A(),[,,,C]=(0,p.RC)(),{favoriteWorkbench:k}=function(){let e,t,n=(0,c.c)(4),a=(0,eV.jE)();n[0]!==a?(e={mutationFn:eH,onMutate:async e=>{await a.cancelQueries({queryKey:M.queryKey});let t=a.getQueryData(M.queryKey);return a.setQueryData(M.queryKey,t=>t?.map(t=>t.id===e.id?{...t,favorite:e.favorite}:t)),{previous:t}},onError:(e,t,n)=>{n?.previous&&a.setQueryData(M.queryKey,n.previous)},onSettled:()=>a.invalidateQueries({queryKey:M.queryKey})},n[0]=a,n[1]=e):e=n[1];let{mutate:i}=(0,eG.n)(e);return n[2]!==i?(t={favoriteWorkbench:i},n[2]=i,n[3]=t):t=n[3],t}(),{deleteWorkbench:E}=function(){let e,t,n=(0,c.c)(4),a=(0,eV.jE)();n[0]!==a?(e={mutationFn:ez,onMutate:async e=>{await a.cancelQueries({queryKey:M.queryKey});let t=a.getQueryData(M.queryKey);return a.setQueryData(M.queryKey,t=>t?.filter(t=>t.id!==e)),{previous:t}},onError:(e,t,n)=>{n?.previous&&a.setQueryData(M.queryKey,n.previous)},onSettled:()=>a.invalidateQueries({queryKey:M.queryKey})},n[0]=a,n[1]=e):e=n[1];let{mutate:i}=(0,eG.n)(e);return n[2]!==i?(t={deleteWorkbench:i},n[2]=i,n[3]=t):t=n[3],t}();g[0]!==x?(t=()=>{if(x)return;let e=w.current;e&&(e.isConnected&&e.focus(),w.current=null)},n=[x],g[0]=x,g[1]=t,g[2]=n):(t=g[1],n=g[2]),(0,o.useLayoutEffect)(t,n),g[3]!==E?(a=e=>{E(e),v(null)},g[3]=E,g[4]=a):a=g[4];let j=a;g[5]===Symbol.for("react.memo_cache_sentinel")?(i=(e,t)=>{v(e),w.current=t},g[5]=i):i=g[5];let N=i;g[6]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{v(null)},g[6]=r):r=g[6];let I=r,T=void 0===y;g[7]!==y?(s=[...y??[]].sort(eZ),g[7]=y,g[8]=s):s=g[8];let R=s;return g[9]!==T?(d=T&&(0,l.jsx)("div",{className:"SparksList-module__spinner--y93vz",children:(0,l.jsx)(eB.A,{size:"small",srText:"Loading"})}),g[9]=T,g[10]=d):d=g[10],g[11]!==T||g[12]!==R?(u=!T&&0===R.length&&(0,l.jsx)("span",{className:"SparksList-module__blankslate--K0tRm",children:"Nothing to see here\u2026 yet."}),g[11]=T,g[12]=R,g[13]=u):u=g[13],g[14]!==C||g[15]!==k||g[16]!==T||g[17]!==S||g[18]!==R||g[19]!==b||g[20]!==_?(m=!T&&R.length>0&&(0,l.jsx)(ed.u,{title:"List of sparks",className:"SparksList-module__sparksList--fUoIE",children:R.map(e=>(0,l.jsx)(eX,{item:e,sparkEnabled:b,entitlementsQuotaReadOnly:C,width:_,showUrl:S,favoriteWorkbench:k,onDeleteClick:N},e.id))}),g[14]=C,g[15]=k,g[16]=T,g[17]=S,g[18]=R,g[19]=b,g[20]=_,g[21]=m):m=g[21],g[22]!==j||g[23]!==x?(h=x&&(0,l.jsx)(eK,{workbench:x,onCancel:I,onConfirm:j}),g[22]=j,g[23]=x,g[24]=h):h=g[24],g[25]!==h||g[26]!==d||g[27]!==u||g[28]!==m?(f=(0,l.jsxs)(l.Fragment,{children:[d,u,m,h]}),g[25]=h,g[26]=d,g[27]=u,g[28]=m,g[29]=f):f=g[29],f},eX=e=>{let t,n,a,i,r,s,d,u,m,p,h,f,y,b,x,v,w,_,S=(0,c.c)(57),{item:C,sparkEnabled:k,entitlementsQuotaReadOnly:E,width:j,showUrl:N,favoriteWorkbench:A,onDeleteClick:I}=e,T=(0,o.useRef)(null);S[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>T.current?T.current instanceof HTMLButtonElement?T.current:T.current.querySelector('button[data-test-id="overflow-menu-anchor"]'):null,S[0]=t):t=S[0];let R=t;return S[1]!==C.billableOwner||S[2]!==C.id||S[3]!==C.runtime.app.friendlyName||S[4]!==N||S[5]!==k?(n=k?N(C.id,C.billableOwner.login,C.runtime.app.friendlyName):void 0,S[1]=C.billableOwner,S[2]=C.id,S[3]=C.runtime.app.friendlyName,S[4]=N,S[5]=k,S[6]=n):n=S[6],S[7]!==C.deploy?(a=C.deploy&&(0,l.jsx)(z.A,{variant:"success",className:"ml-2",children:"Published"}),S[7]=C.deploy,S[8]=a):a=S[8],S[9]!==E?(i=E&&(0,l.jsx)(z.A,{variant:"primary",className:"ml-2",children:"Read-only"}),S[9]=E,S[10]=i):i=S[10],S[11]!==k?(r=!k&&(0,l.jsx)(z.A,{variant:"attention",className:"ml-2",children:"Not available"}),S[11]=k,S[12]=r):r=S[12],S[13]!==C.runtime.app.isInBetaEnvironment?(s=C.runtime.app.isInBetaEnvironment&&(0,l.jsx)(z.A,{variant:"accent",className:"ml-2",children:"Beta"}),S[13]=C.runtime.app.isInBetaEnvironment,S[14]=s):s=S[14],S[15]!==C.name||S[16]!==n||S[17]!==a||S[18]!==i||S[19]!==r||S[20]!==s?(d=(0,l.jsxs)(eb.ao,{value:C.name,href:n,children:[a,i,r,s]}),S[15]=C.name,S[16]=n,S[17]=a,S[18]=i,S[19]=r,S[20]=s,S[21]=d):d=S[21],S[22]!==A||S[23]!==C.favorite||S[24]!==C.id||S[25]!==C.name||S[26]!==j?(u=void 0!==j&&j>=768&&(0,l.jsx)(ey.V,{children:C.favorite?(0,l.jsx)(D.K,{variant:"invisible",icon:g.StarFillIcon,title:`Unfavorite ${C.name}`,"aria-label":"Unfavorite this spark",className:"SparksList-module__starfillIcon--5MSCJ",onClick:()=>A({id:C.id,favorite:!1})}):(0,l.jsx)(D.K,{variant:"invisible",icon:g.StarIcon,title:`Unfavorite ${C.name}`,"aria-label":"Favorite this spark",onClick:()=>A({id:C.id,favorite:!0})})}),S[22]=A,S[23]=C.favorite,S[24]=C.id,S[25]=C.name,S[26]=j,S[27]=u):u=S[27],S[28]!==A||S[29]!==C.favorite||S[30]!==C.id||S[31]!==j?(m={key:"favorite-spark",render:()=>{if(j&&j<768)if(C.favorite)return(0,l.jsxs)(eU.l.Item,{onSelect:()=>A({id:C.id,favorite:!1}),children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.StarFillIcon,{})}),"Unfavorite"]});else return(0,l.jsxs)(eU.l.Item,{onSelect:()=>A({id:C.id,favorite:!0}),children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.StarIcon,{})}),"Favorite"]})}},S[28]=A,S[29]=C.favorite,S[30]=C.id,S[31]=j,S[32]=m):m=S[32],S[33]!==C.deploy||S[34]!==C.runtime.app.friendlyName?(p={key:"live-deployment-url",render:()=>{if(C.deploy)return(0,l.jsxs)(eU.l.LinkItem,{href:(0,eO.A)({friendlyName:C.runtime.app.friendlyName,deployLogin:C.deploy.deployLogin,domainBase:C.deploy.domainBase}),children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.LinkExternalIcon,{})}),"Visit spark"]})}},S[33]=C.deploy,S[34]=C.runtime.app.friendlyName,S[35]=p):p=S[35],S[36]!==C.repositoryUrl?(h={key:"view-repository",render:()=>{if(C.repositoryUrl)return(0,l.jsxs)(eU.l.LinkItem,{href:C.repositoryUrl,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.RepoIcon,{})}),"View repository"]})}},S[36]=C.repositoryUrl,S[37]=h):h=S[37],S[38]===Symbol.for("react.memo_cache_sentinel")?(f={key:"divider",render:eJ},S[38]=f):f=S[38],S[39]!==C||S[40]!==I?(y={key:"delete-spark",render:()=>(0,l.jsxs)(eU.l.Item,{variant:"danger",onSelect:()=>I(C,R()),children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.TrashIcon,{})}),"Delete"]})},S[39]=C,S[40]=I,S[41]=y):y=S[41],S[42]!==p||S[43]!==h||S[44]!==y||S[45]!==m?(b=(0,l.jsx)(em.L,{label:"Options",anchorRef:T,staticMenuActions:[m,p,h,f,y]}),S[42]=p,S[43]=h,S[44]=y,S[45]=m,S[46]=b):b=S[46],S[47]===Symbol.for("react.memo_cache_sentinel")?(x=(0,l.jsx)(eh.B,{children:(0,l.jsx)(ef.e,{description:"Sparkle icon",icon:g.SparkleFillIcon,className:"fgColor-muted"})}),S[47]=x):x=S[47],S[48]!==C.updatedAt?(v=C.updatedAt&&(0,l.jsxs)(l.Fragment,{children:["Last updated ",(0,l.jsx)(eW.A,{date:new Date(C.updatedAt)})]}),S[48]=C.updatedAt,S[49]=v):v=S[49],S[50]!==v?(w=(0,l.jsx)(eg.Q,{children:(0,l.jsx)(ep.U,{children:(0,l.jsx)(ex.t,{fallback:null,children:v})})}),S[50]=v,S[51]=w):w=S[51],S[52]!==b||S[53]!==w||S[54]!==d||S[55]!==u?(_=(0,l.jsxs)(eu.c,{title:d,metadataContainerClassName:"SparksList-module__ListItemMetadataContainer--_tBVW",metadata:u,secondaryActions:b,children:[x,w]}),S[52]=b,S[53]=w,S[54]=d,S[55]=u,S[56]=_):_=S[56],_};try{eY.displayName||(eY.displayName="SparksList")}catch{}try{eX.displayName||(eX.displayName="SparkListItem")}catch{}function eZ(e,t){return e.updatedAt?t.updatedAt?new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime():-1:1}function eJ(){return(0,l.jsx)(eU.l.Divider,{})}var eQ=n(73017);function e0(e){var t;let n,a,i,r,s,o=(0,c.c)(11),{titleHtml:d,icon:u,color:m,onClick:p}=e;o[0]!==u?(t=u,a=(n=`${t.replaceAll(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}Icon`)in g?g[n]:void 0,o[0]=u,o[1]=a):a=o[1];let h=a;return o[2]!==h||o[3]!==m?(i=h&&(0,l.jsx)("div",{className:"Suggestion-module__icon--Qdvqj",style:{color:m},children:(0,l.jsx)(h,{})}),o[2]=h,o[3]=m,o[4]=i):i=o[4],o[5]!==d?(r=(0,l.jsx)(eQ.$6,{html:d}),o[5]=d,o[6]=r):r=o[6],o[7]!==p||o[8]!==i||o[9]!==r?(s=(0,l.jsxs)("button",{className:"Suggestion-module__suggestionButton--RxxiE",onClick:p,children:[i,r]}),o[7]=p,o[8]=i,o[9]=r,o[10]=s):s=o[10],s}try{e0.displayName||(e0.displayName="SuggestionCard")}catch{}try{(i=Icon).displayName||(i.displayName="Icon")}catch{}var e1=n(51213),e2=n(53419),e3=n(52776),e5=n(5813),e4=n(73077);let e6="WorkbenchBanner-module__WbBanner--h0Tl3",e7="Enable additional requests",e9="Manage billing",e8="Upgrade",te="utm_source=github&utm_medium=site&utm_content=spark&utm_campaign=spark_dashboard_cta",tt={[e7]:`/settings/billing/budgets/new?${te}`,[e9]:`/settings/billing/budgets/new?${te}`,[e8]:`/features/copilot/plans?cft=copilot_li.features_copilot&${te}`},tn=()=>{let e,t=(0,c.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(F.A,{inline:!0,href:"https://docs.github.com/en/copilot/managing-copilot/monitoring-usage-and-entitlements/about-premium-requests",children:"premium requests"}),t[0]=e):e=t[0],e},ta=e=>{var t;let n,a=(0,c.c)(2),{resetDate:i}=e;return a[0]!==i?(n=i?(0,l.jsxs)(l.Fragment,{children:[" Limit resets on ",(t=i,new Date(`${t}T12:00:00Z`).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),"."]}):null,a[0]=i,a[1]=n):n=a[1],n},ti=(e,t)=>{if(!e)return;let n=`COPILOT_WORKBENCH_BANNER_LINK_${e.label.split(" ").join("_").toUpperCase()}`;return(0,l.jsx)(e4.z,{as:"a",href:e.url,onClick:()=>{(0,e2.BI)("dotcom_chat.activate",{target:n,action:"click"})},variant:t,children:e.label})};function tr(){var e,t,n,a,i;let[r,s]=(0,o.useState)(()=>(0,e3.v5)()??!1),{entitlement:c,isModelThrottled:d}=(0,p.MY)(),u=c[e5.Xq.COPILOT]??e5.ue.entitlement[e5.Xq.COPILOT],{plan:m,licenseType:h,quotas:f=u.quotas}=u,{remaining:g,resetDate:y,overagesEnabled:b}=f,x=c[e5.Xq.USER_STATUS]?.admin??e5.ue.entitlement[e5.Xq.USER_STATUS].admin,v=c[e5.Xq.USER_STATUS]?.billingUrl,w=c[e5.Xq.USER_STATUS]?.type??e5.ue.entitlement[e5.Xq.USER_STATUS].type,_=h===e1.mF.LicensedLimited,S=m===e1.UH.IndividualPro||m===e1.UH.IndividualProPlus||m===e1.UH.Business||m===e1.UH.Enterprise,C=(g.chatPercentage??0)<=0,k=g.chatPercentage??0,E=(g.premiumInteractionsPercentage??0)<=0,j=g.premiumInteractionsPercentage??0,N=j<=20&&j>0,A=_||m===e1.UH.IndividualPro||m===e1.UH.Business,I=!_&&S,T=_&&k<=50&&k>0||S&&N,R=_&&C||S&&E,M=(e=R,t=b,e&&t?"info":e&&!t?"upsell":"info"),P=(n=T,a=R,i=b,!!n||!!a&&!!i),D=function(e,t,n,a,i,r,s){let o=null;if(!(o=t&&!n?e8:n&&a?e9:e?e7:e8))return null;let l=ts(i,r);return"Organization"===i&&l?{label:o,url:`${s}?${te}`}:"Organization"!==i||l?{label:o,url:tt[o]}:null}(I,A,b,E,w,x,v),$=function(e,t,n,a,i,r,s){let o=null;if((n===e1.UH.IndividualPro&&a&&!t||n===e1.UH.Business&&e)&&(o=e7),!o)return null;let l=ts(i,r);return"Organization"===i&&l?{label:o,url:`${s}?${te}`}:"Organization"!==i||l?{label:o,url:tt[o]}:null}(I,b,m,E,w,x,v),F=function(e,t,n,a,i,r,s,o){switch(a){case e1.UH.IndividualFree:if(t)return(0,l.jsxs)(l.Fragment,{children:["You have reached your free plan limit. Upgrade to continue editing sparks."," ",(0,l.jsx)(ta,{resetDate:s})]});if(e)return(0,l.jsxs)(l.Fragment,{children:["You have used 50% of your ",(0,l.jsx)(tn,{})," this month."]});break;case e1.UH.IndividualPro:if(i&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have used 80% of your ",(0,l.jsx)(tn,{})," this month. Upgrade to increase your limit for editing sparks."]});if(r&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have reached your monthly limit for ",(0,l.jsx)(tn,{}),". Select an upgrade option to continue editing sparks. ",(0,l.jsx)(ta,{resetDate:s})]});if(r&&n)return(0,l.jsxs)(l.Fragment,{children:["You have used all ",(0,l.jsx)(tn,{})," available this month. You will be charged per additional prompt",(0,l.jsx)("span",{children:""!==s?` until the limit resets on ${s}`:null}),"."]});break;case e1.UH.IndividualProPlus:if(i&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have used 80% of your ",(0,l.jsx)(tn,{})," this month. Enable additional requests to increase your limit for editing sparks."]});if(r&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have reached your monthly limit for ",(0,l.jsx)(tn,{}),". Enable additional requests to increase your limit for editing sparks. ",(0,l.jsx)(ta,{resetDate:s})]});if(r&&n)return(0,l.jsxs)(l.Fragment,{children:["You have used all ",(0,l.jsx)(tn,{})," available this month. You will be charged per additional prompt",(0,l.jsx)("span",{children:""!==s?` until the limit resets on ${s}`:null}),"."]});break;case e1.UH.Business:if(o){if(i&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have used 80% of your ",(0,l.jsx)(tn,{})," this month. Select an upgrade option to increase your limit for editing sparks."]});if(r&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have reached your monthly limit for ",(0,l.jsx)(tn,{}),". Select an upgrade option to continue editing sparks. ",(0,l.jsx)(ta,{resetDate:s})]})}else{if(i&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have used 80% of your ",(0,l.jsx)(tn,{})," this month. Ask your admin to"," ",(0,l.jsx)("b",{children:"enable additional requests"})," to increase your limit for editing sparks."]});if(r&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have reached your monthly limit for ",(0,l.jsx)(tn,{}),". Ask your admin to"," ",(0,l.jsx)("b",{children:"upgrade to Copilot Enterprise"})," to continue editing sparks."," ",(0,l.jsx)(ta,{resetDate:s})]})}break;case e1.UH.Enterprise:if(o){if(i&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have used 80% of your ",(0,l.jsx)(tn,{})," this month. Enable additional requests to increase your limit for editing sparks."]});if(r&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have reached your monthly limit for ",(0,l.jsx)(tn,{}),". Enable additional requests to continue editing sparks. ",(0,l.jsx)(ta,{resetDate:s})]})}else{if(i&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have used 80% of your ",(0,l.jsx)(tn,{})," this month. Ask your admin to"," ",(0,l.jsx)("b",{children:"enable additional requests"})," to increase your limit for editing sparks."]});if(r&&!n)return(0,l.jsxs)(l.Fragment,{children:["You have reached your monthly limit for ",(0,l.jsx)(tn,{}),". Ask your admin to"," ",(0,l.jsx)("b",{children:"enable additional requests"})," to continue editing sparks. ",(0,l.jsx)(ta,{resetDate:s})]})}}}(T,R,b,m,N,E,y,x);(0,o.useEffect)(()=>{let e=(0,e3.v5)();T?null===e?((0,e3.$t)(!0),s(!0)):s(e):((0,e3.n_)(),s(!0))},[T]);let O=(0,o.useCallback)(()=>{(0,e3.$t)(!1),s(!1)},[]);return((0,o.useEffect)(()=>{d&&(s(!0),(0,e2.BI)("spark.model_throttle",{isModelThrottled:d}))},[d]),r)?F?(0,l.jsx)(L.l,{className:e6,hideTitle:!0,title:D?.label||"Copilot status",variant:M,onDismiss:P?O:void 0,primaryAction:ti(D),secondaryAction:ti($,"invisible"),description:F}):d?(0,l.jsx)(L.l,{className:e6,hideTitle:!0,title:"Our system is at capacity",variant:"info",description:"Our system is at capacity. You may see interruptions while building."}):null:null}function ts(e,t){return"Organization"===e&&t}try{tn.displayName||(tn.displayName="PremiumRequestsLink")}catch{}try{ta.displayName||(ta.displayName="ResetDateMessage")}catch{}try{tr.displayName||(tr.displayName="WorkbenchBanner")}catch{}let to=()=>{let e,t,n,a,i,r,s,d,m,b,x,N,I,T,L,P=(0,c.c)(53),D=(0,_.h)(),{icebreakers:$,sparkEnabled:F,partOfSparkRollout:B}=(0,u.X)();P[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],P[0]=e):e=P[0];let[U,W]=(0,o.useState)(e),{setPromptText:V}=(0,w.Cq)(),[G,z]=(0,o.useState)(!1),[H,q]=(0,o.useState)("Recent"),{showUrl:K}=A(),Y=(0,h.Z)(),X=(0,p.MY)(),J=(0,S.x)(),ee=J?.oldestSparkName;P[1]!==$?(t=()=>{if(Array.isArray($)&&$.every(e=>"type"in e&&"data"in e)){let e=$.find(tl);e&&e.data.length>0&&W(e.data.sort(()=>.5-Math.random()).slice(0,3))}},n=[$],P[1]=$,P[2]=t,P[3]=n):(t=P[2],n=P[3]),(0,o.useEffect)(t,n);let{data:et}=(0,R.I)(M);P[4]!==B||P[5]!==et?(a=et&&(et.length>0||et.some(tc))&&B,P[4]=B,P[5]=et,P[6]=a):a=P[6];let en=!!a;P[7]!==H?(i=(e,t)=>{e.preventDefault(),H!==t&&q(t)},P[7]=H,P[8]=i):i=P[8];let ea=i;J?.activeSparksCount;e:{let e,t,n,a,i,s,o,c,d,u,m;if(!F&&B){let e;P[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(Q,{}),P[9]=e):e=P[9],r=e;break e}if(!F&&!B){let e;P[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(el,{}),P[10]=e):e=P[10],r=e;break e}P[11]!==J?.activeSparksCount||P[12]!==G||P[13]!==Y||P[14]!==ee||P[15]!==V||P[16]!==K||P[17]!==X?(e=async e=>{if(G||""===e.trim())return;if(X.reloadQuota(),V(e),z(!0),(J?.activeSparksCount??0)>0)try{await (0,f.DI)(`/codespaces/${ee}/suspend`,{method:"POST"})}catch(e){throw Error(`Failed to deactivate spark: ${String(e)}`)}let t=await (0,f.lS)("/copilot/spark",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:{}});if(t.ok){let{id:e,billableOwner:n}=await t.json();Y(K(e,n?.login))}},P[11]=J?.activeSparksCount,P[12]=G,P[13]=Y,P[14]=ee,P[15]=V,P[16]=K,P[17]=X,P[18]=e):e=P[18];let p=e;P[19]!==D?(t=D!==C.x1.RUNTIME_LIMIT&&D!==C.x1.COMPUTE_LIMIT&&(0,l.jsx)(es,{}),P[19]=D,P[20]=t):t=P[20],P[21]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(tr,{}),a=(0,l.jsx)(Z,{}),P[21]=n,P[22]=a):(n=P[21],a=P[22]),P[23]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"vertical",regular:"horizontal",wide:"horizontal"},P[23]=i):i=P[23],P[24]===Symbol.for("react.memo_cache_sentinel")?(s={narrow:"normal",regular:"condensed",wide:"condensed"},o={narrow:"stretch",regular:"center",wide:"center"},P[24]=s,P[25]=o):(s=P[24],o=P[25]),P[26]!==p||P[27]!==U?(c=U&&U.map(e=>(0,l.jsx)(e0,{titleHtml:e.titleHtml,icon:e.icon,color:e.color,onClick:()=>p(e.message)},e.id)),P[26]=p,P[27]=U,P[28]=c):c=P[28],P[29]!==c?(d=(0,l.jsx)(k.B,{direction:i,wrap:"wrap",gap:s,align:o,children:c}),P[29]=c,P[30]=d):d=P[30],P[31]===Symbol.for("react.memo_cache_sentinel")?(u=(0,l.jsx)(O,{}),P[31]=u):u=P[31],P[32]!==d||P[33]!==t?(m=(0,l.jsxs)(l.Fragment,{children:[" ",t,n,a,d,u]}),P[32]=d,P[33]=t,P[34]=m):m=P[34],r=m}let ei=r;return P[35]===Symbol.for("react.memo_cache_sentinel")?(s=(0,y.$)("Layout-module__innerContent--FhmSV","my-md-10"),P[35]=s):s=P[35],P[36]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)(v,{size:"large",speed:"slow"}),P[36]=d):d=P[36],P[37]===Symbol.for("react.memo_cache_sentinel")?(m=(0,l.jsx)("span",{className:ec,children:"Dream it."}),P[37]=m):m=P[37],P[38]===Symbol.for("react.memo_cache_sentinel")?(b=(0,l.jsx)("span",{className:ec,children:"See it."}),P[38]=b):b=P[38],P[39]===Symbol.for("react.memo_cache_sentinel")?(x=(0,l.jsxs)(E.A,{as:"h1",className:"text-center",children:[m," ",b," ",(0,l.jsx)("span",{className:ec,children:"Ship it."})]}),N=(0,l.jsx)("p",{className:"Layout-module__description--SJU4r",children:"Transform ideas into full-stack intelligent apps in a snap. Publish with a click."}),P[39]=x,P[40]=N):(x=P[39],N=P[40]),P[41]!==ei?(I=(0,l.jsxs)(k.B,{direction:"vertical",align:"center",padding:"normal",children:[d,x,N,ei]}),P[41]=ei,P[42]=I):I=P[42],P[43]!==D||P[44]!==ea||P[45]!==H||P[46]!==en||P[47]!==F||P[48]!==et?(T=en&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(j.O,{"aria-label":"Spark apps",className:"Layout-module__UnderlineNav--IS6rX",children:[(0,l.jsx)(j.O.Item,{"aria-current":"Recent"===H?"page":void 0,onSelect:e=>ea(e,"Recent"),icon:(0,l.jsx)(g.HistoryIcon,{}),children:"Recent"}),(0,l.jsx)(j.O.Item,{"aria-current":"Favorites"===H?"page":void 0,onSelect:e=>ea(e,"Favorites"),icon:"Favorites"===H?(0,l.jsx)(g.StarFillIcon,{}):(0,l.jsx)(g.StarIcon,{}),children:"Favorites"})]}),(D===C.x1.RUNTIME_LIMIT||D===C.x1.COMPUTE_LIMIT)&&(0,l.jsx)(es,{className:"mt-4"}),"Recent"===H&&(0,l.jsx)(eY,{items:et,sparkEnabled:F}),"Favorites"===H&&(0,l.jsx)(eY,{items:et?.filter(td),sparkEnabled:F})]}),P[43]=D,P[44]=ea,P[45]=H,P[46]=en,P[47]=F,P[48]=et,P[49]=T):T=P[49],P[50]!==I||P[51]!==T?(L=(0,l.jsx)("div",{className:"Layout-module__container--uT7Jz","data-testid":"dashboard-layout","data-hpc":!0,children:(0,l.jsx)("div",{className:"Layout-module__main--iHZfp",children:(0,l.jsx)("div",{className:"Layout-module__content--ijDqX",children:(0,l.jsxs)("div",{className:s,children:[I,T]})})})}),P[50]=I,P[51]=T,P[52]=L):L=P[52],L};try{to.displayName||(to.displayName="Layout")}catch{}function tl(e){return"functional"===e.type}function tc(e){return e.favorite}function td(e){return!0===e.favorite}let tu=()=>{let e,t,n=(0,c.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],n[0]=e):e=n[0],(0,o.useEffect)(tp,e),n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(tm,{children:(0,l.jsx)(to,{})}),n[1]=t):t=n[1],t};function tm(e){let t,n,a,i=(0,c.c)(6),{children:r}=e,s=(0,u.X)();return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],i[0]=t):t=i[0],i[1]!==r?(n=(0,l.jsx)(p.c8,{children:r}),i[1]=r,i[2]=n):n=i[2],i[3]!==s||i[4]!==n?(a=(0,l.jsx)(m.LB,{children:(0,l.jsx)(d.Mj,{workerPath:s.searchWorkerFilePath,threadId:null,refs:t,mode:"immersive",ssoOrganizations:s.ssoOrganizations,copilotChatPayload:s,children:n})}),i[3]=s,i[4]=n,i[5]=a):a=i[5],a}try{tu.displayName||(tu.displayName="Spark")}catch{}try{tm.displayName||(tm.displayName="CopilotChatProviders")}catch{}function tp(){let e;(e=document.getElementById("serverstats"))&&(e.style.display="none")}var th=n(70170),tf=n(40260),tg=n(87161),ty=n(76648),tb=n(66070),tx=n(46747),tv=n(90342),tw=n(13480),t_=n(96428),tS=n(93330),tC=n(12683),tk=n(16598),tE=n(55552),tj=n(67225),tN=n(18438),tA=n(95507),tI=n(5989),tT=n(22169),tR=n(66486),tM=n(6670),tL=n(44104);let tP=async()=>{try{let e=await fetch(tM);if(!e.ok)throw Error(`Failed to fetch WASM: ${e.status} ${e.statusText}`);let t=await e.arrayBuffer();return await (0,tR.loadWASM)(t),{createOnigScanner:e=>new tR.OnigScanner(e),createOnigString:e=>new tR.OnigString(e)}}catch(e){throw tL.Ay.error("WASM loading failed:",e),e}};var tD=n(32850);let t$=JSON.parse('{"name":"TypeScriptReact","scopeName":"source.tsx","fileTypes":["tsx"],"uuid":"805375ec-d614-41f5-8993-5843fe63ea82","patterns":[{"include":"#directives"},{"include":"#statements"},{"name":"comment.line.shebang.ts","match":"\\\\A(#!).*(?=$)","captures":{"1":{"name":"punctuation.definition.comment.ts"}}}],"repository":{"statements":{"patterns":[{"include":"#string"},{"include":"#template"},{"include":"#comment"},{"include":"#literal"},{"include":"#declaration"},{"include":"#switch-statement"},{"include":"#for-loop"},{"include":"#after-operator-block"},{"include":"#decl-block"},{"include":"#control-statement"},{"include":"#expression"},{"include":"#punctuation-semicolon"}]},"var-expr":{"name":"meta.var.expr.tsx","begin":"(?<!\\\\.|\\\\$)(?:(\\\\bexport)\\\\s+)?\\\\b(var|let|const(?!\\\\s+enum\\\\b))\\\\b(?!\\\\$)","beginCaptures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"storage.type.tsx"}},"end":"(?=$|;|}|(\\\\s+(of|in)\\\\s+))","patterns":[{"include":"#destructuring-variable"},{"include":"#var-single-variable"},{"include":"#variable-initializer"},{"include":"#comment"},{"include":"#punctuation-comma"}]},"var-single-variable":{"patterns":[{"name":"meta.var-single-variable.expr.tsx","begin":"(?x)([_$[:alpha:]][_$[:alnum:]]*)(?=\\\\s* (=\\\\s*( (async\\\\s+) | (function\\\\s*[(<]) | (function\\\\s+) | ([_$[:alpha:]][_$[:alnum:]]*\\\\s*=>) | ((<([^<>]|\\\\<[^<>]+\\\\>)+>\\\\s*)?\\\\(([^()]|\\\\([^()]*\\\\))*\\\\)(\\\\s*:\\\\s*(.)*)?\\\\s*=>)) ) | (:\\\\s*( (<) | ([(]\\\\s*( ([)]) | (\\\\.\\\\.\\\\.) | ([_$[:alnum:]]+\\\\s*( ([:,?=])| ([)]\\\\s*=>) )) ))) ))","beginCaptures":{"1":{"name":"entity.name.function.tsx"}},"end":"(?=$|[;,=}]|(\\\\s+(of|in)\\\\s+))","patterns":[{"include":"#type-annotation"},{"include":"#string"},{"include":"#comment"}]},{"name":"meta.var-single-variable.expr.tsx","begin":"([_$[:alpha:]][_$[:alnum:]]*)","beginCaptures":{"1":{"name":"variable.other.readwrite.tsx"}},"end":"(?=$|[;,=}]|(\\\\s+(of|in)\\\\s+))","patterns":[{"include":"#type-annotation"},{"include":"#string"},{"include":"#comment"}]}]},"destructuring-variable":{"patterns":[{"name":"meta.object-binding-pattern-variable.tsx","begin":"(?<!=|:|of|in)\\\\s*(?=\\\\{)","end":"(?=$|[;,=}]|(\\\\s+(of|in)\\\\s+))","patterns":[{"include":"#object-binding-pattern"},{"include":"#type-annotation"},{"include":"#comment"}]},{"name":"meta.array-binding-pattern-variable.tsx","begin":"(?<!=|:|of|in)\\\\s*(?=\\\\[)","end":"(?=$|[;,=}]|(\\\\s+(of|in)\\\\s+))","patterns":[{"include":"#array-binding-pattern"},{"include":"#type-annotation"},{"include":"#comment"}]}]},"object-binding-element":{"patterns":[{"include":"#comment"},{"begin":"(?=(([_$[:alpha:]][_$[:alnum:]]*)|(\\\\\'[^\']*\\\\\')|(\\\\\\"[^\\"]*\\\\\\")|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\]))\\\\s*(:))","end":"(?=,|\\\\})","patterns":[{"include":"#object-binding-element-propertyName"},{"include":"#binding-element"}]},{"include":"#object-binding-pattern"},{"include":"#destructuring-variable-rest"},{"include":"#variable-initializer"},{"include":"#punctuation-comma"}]},"object-binding-element-propertyName":{"begin":"(?=(([_$[:alpha:]][_$[:alnum:]]*)|(\\\\\'[^\']*\\\\\')|(\\\\\\"[^\\"]*\\\\\\")|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\]))\\\\s*(:))","end":"(:)","endCaptures":{"0":{"name":"punctuation.destructuring.tsx"}},"patterns":[{"include":"#string"},{"include":"#array-literal"},{"name":"variable.object.property.tsx","match":"([_$[:alpha:]][_$[:alnum:]]*)"}]},"binding-element":{"patterns":[{"include":"#comment"},{"include":"#object-binding-pattern"},{"include":"#array-binding-pattern"},{"include":"#destructuring-variable-rest"},{"include":"#variable-initializer"}]},"destructuring-variable-rest":{"match":"(?:(\\\\.\\\\.\\\\.)\\\\s*)?([_$[:alpha:]][_$[:alnum:]]*)","captures":{"1":{"name":"keyword.operator.rest.tsx"},"2":{"name":"variable.other.readwrite.tsx"}}},"object-binding-pattern":{"begin":"(?:(\\\\.\\\\.\\\\.)\\\\s*)?(\\\\{)","beginCaptures":{"1":{"name":"keyword.operator.rest.tsx"},"2":{"name":"punctuation.definition.binding-pattern.object.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.binding-pattern.object.tsx"}},"patterns":[{"include":"#object-binding-element"}]},"array-binding-pattern":{"begin":"(?:(\\\\.\\\\.\\\\.)\\\\s*)?(\\\\[)","beginCaptures":{"1":{"name":"keyword.operator.rest.tsx"},"2":{"name":"punctuation.definition.binding-pattern.array.tsx"}},"end":"\\\\]","endCaptures":{"0":{"name":"punctuation.definition.binding-pattern.array.tsx"}},"patterns":[{"include":"#binding-element"},{"include":"#punctuation-comma"}]},"ternary-expression":{"begin":"(?=\\\\?)","end":"(?=$|[;,})\\\\]])","patterns":[{"include":"#ternary-operator"},{"include":"#expression"}]},"ternary-operator":{"begin":"(\\\\?)","beginCaptures":{"0":{"name":"keyword.operator.ternary.tsx"}},"end":"(:)","endCaptures":{"0":{"name":"keyword.operator.ternary.tsx"}},"patterns":[{"include":"#expression"}]},"expression":{"name":"meta.expression.tsx","patterns":[{"include":"#jsx"},{"include":"#string"},{"include":"#regex"},{"include":"#template"},{"include":"#comment"},{"include":"#literal"},{"include":"#function-declaration"},{"include":"#class-or-interface-declaration"},{"include":"#arrow-function"},{"include":"#cast"},{"include":"#ternary-expression"},{"include":"#new-expr"},{"include":"#object-literal"},{"include":"#expression-operators"},{"include":"#function-call"},{"include":"#support-objects"},{"include":"#identifiers"},{"include":"#paren-expression"},{"include":"#punctuation-comma"},{"include":"#punctuation-accessor"}]},"control-statement":{"patterns":[{"name":"keyword.control.trycatch.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(catch|finally|throw|try)\\\\b(?!\\\\$)"},{"name":"keyword.control.loop.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(break|continue|do|goto|while)\\\\b(?!\\\\$)"},{"name":"keyword.control.flow.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(return)\\\\b(?!\\\\$)"},{"match":"(?<!\\\\.|\\\\$)\\\\b(yield)\\\\b(?!\\\\$)(?:\\\\s*(\\\\*))?","captures":{"1":{"name":"keyword.control.flow.tsx"},"2":{"name":"keyword.generator.asterisk.tsx"}}},{"name":"keyword.control.switch.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(case|default|switch)\\\\b(?!\\\\$)"},{"name":"keyword.control.conditional.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(else|if)\\\\b(?!\\\\$)"},{"name":"keyword.control.with.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(with)\\\\b(?!\\\\$)"},{"name":"keyword.other.debugger.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(debugger)\\\\b(?!\\\\$)"},{"name":"storage.modifier.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(declare)\\\\b(?!\\\\$)"}]},"declaration":{"name":"meta.declaration.tsx","patterns":[{"include":"#decorator"},{"include":"#var-expr"},{"include":"#function-declaration"},{"include":"#class-or-interface-declaration"},{"include":"#type-declaration"},{"include":"#enum-declaration"},{"include":"#namespace-declaration"},{"include":"#import-equals-declaration"},{"include":"#import-declaration"},{"include":"#export-declaration"}]},"decorator":{"name":"meta.decorator.tsx","begin":"(?<!\\\\.|\\\\$)\\\\@","beginCaptures":{"0":{"name":"punctuation.decorator.tsx"}},"end":"(?=\\\\s)","patterns":[{"include":"#expression"}]},"type-declaration":{"name":"meta.type.declaration.tsx","begin":"(?<!\\\\.|\\\\$)(?:(\\\\bexport)\\\\s+)?\\\\b(type)\\\\b\\\\s+([_$[:alpha:]][_$[:alnum:]]*)\\\\s*","beginCaptures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"storage.type.type.tsx"},"3":{"name":"entity.name.type.tsx"}},"end":"(?=[};]|\\\\bvar\\\\b|\\\\blet\\\\b|\\\\bconst\\\\b|\\\\btype\\\\b|\\\\bfunction\\\\b|\\\\bclass\\\\b|\\\\binterface\\\\b|\\\\bnamespace\\\\b|\\\\bmodule\\\\b|\\\\bimport\\\\b|\\\\benum\\\\b|\\\\bdeclare\\\\b|\\\\bexport\\\\b|\\\\babstract\\\\b|\\\\basync\\\\b)","patterns":[{"include":"#comment"},{"include":"#type-parameters"},{"include":"#type"},{"match":"(=)\\\\s*","captures":{"1":{"name":"keyword.operator.assignment.tsx"}}}]},"enum-declaration":{"name":"meta.enum.declaration.tsx","begin":"(?<!\\\\.|\\\\$)(?:(\\\\bexport)\\\\s+)?(?:\\\\b(const)\\\\s+)?\\\\b(enum)\\\\s+([_$[:alpha:]][_$[:alnum:]]*)","beginCaptures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"storage.modifier.tsx"},"3":{"name":"storage.type.enum.tsx"},"4":{"name":"entity.name.type.enum.tsx"}},"end":"(?<=\\\\})","patterns":[{"include":"#comment"},{"begin":"\\\\{","beginCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#comment"},{"begin":"([_$[:alpha:]][_$[:alnum:]]*)","beginCaptures":{"0":{"name":"variable.other.enummember.tsx"}},"end":"(?=,|\\\\}|$)","patterns":[{"include":"#comment"},{"include":"#variable-initializer"}]},{"begin":"(?=((\\\\\'[^\']*\\\\\')|(\\\\\\"[^\\"]*\\\\\\")|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\])))","end":"(?=,|\\\\}|$)","patterns":[{"include":"#string"},{"include":"#array-literal"},{"include":"#comment"},{"include":"#variable-initializer"}]},{"include":"#punctuation-comma"}]}]},"namespace-declaration":{"name":"meta.namespace.declaration.tsx","begin":"(?<!\\\\.|\\\\$)(?:(\\\\bexport)\\\\s+)?\\\\b(namespace|module)\\\\s+","beginCaptures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"storage.type.namespace.tsx"}},"end":"(?=$|\\\\{)","patterns":[{"include":"#comment"},{"include":"#string"},{"name":"entity.name.type.module.tsx","match":"([_$[:alpha:]][_$[:alnum:]]*)"},{"name":"punctuation.accessor.tsx","match":"\\\\."}]},"import-equals-declaration":{"patterns":[{"name":"meta.import-equals.external.tsx","begin":"(?<!\\\\.|\\\\$)(?:(\\\\bexport)\\\\s+)?\\\\b(import)\\\\s+([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(=)\\\\s*(require)\\\\s*(\\\\()","beginCaptures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"keyword.control.import.tsx"},"3":{"name":"variable.other.readwrite.alias.tsx"},"4":{"name":"keyword.operator.assignment.tsx"},"5":{"name":"keyword.control.require.tsx"},"6":{"name":"meta.brace.round.tsx"}},"end":"\\\\)","endCaptures":{"0":{"name":"meta.brace.round.tsx"}},"patterns":[{"include":"#comment"},{"include":"#string"}]},{"name":"meta.import-equals.internal.tsx","begin":"(?<!\\\\.|\\\\$)(?:(\\\\bexport)\\\\s+)?\\\\b(import)\\\\s+([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(=)\\\\s*(?!require\\\\b)","beginCaptures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"keyword.control.import.tsx"},"3":{"name":"variable.other.readwrite.alias.tsx"},"4":{"name":"keyword.operator.assignment.tsx"}},"end":"(?=;|$)","patterns":[{"include":"#comment"},{"match":"([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(\\\\.)","captures":{"1":{"name":"entity.name.type.module.tsx"},"2":{"name":"punctuation.accessor.tsx"}}},{"name":"variable.other.readwrite.tsx","match":"([_$[:alpha:]][_$[:alnum:]]*)"}]}]},"import-declaration":{"name":"meta.import.tsx","begin":"(?<!\\\\.|\\\\$)(?:(\\\\bexport)\\\\s+)?\\\\b(import)(?!(\\\\s*:)|(\\\\$))\\\\b","beginCaptures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"keyword.control.import.tsx"}},"end":"(?=;|$)","patterns":[{"include":"#import-export-declaration"}]},"export-declaration":{"patterns":[{"match":"(?<!\\\\.|\\\\$)\\\\b(export)\\\\s+(as)\\\\s+(namespace)\\\\s+([_$[:alpha:]][_$[:alnum:]]*)","captures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"keyword.control.as.tsx"},"3":{"name":"storage.type.namespace.tsx"},"4":{"name":"entity.name.type.module.tsx"}}},{"name":"meta.export.default.tsx","begin":"(?<!\\\\.|\\\\$)\\\\b(export)(?:(?:\\\\s*(=))|(?:\\\\s+(default)(?=\\\\s+)))","beginCaptures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"keyword.operator.assignment.tsx"},"3":{"name":"keyword.control.default.tsx"}},"end":"(?=;|\\\\bexport\\\\b|\\\\bfunction\\\\b|\\\\bclass\\\\b|\\\\binterface\\\\b|\\\\blet\\\\b|\\\\bvar\\\\b|\\\\bconst\\\\b|\\\\bimport\\\\b|\\\\benum\\\\b|\\\\bnamespace\\\\b|\\\\bmodule\\\\b|\\\\btype\\\\b|\\\\babstract\\\\b|\\\\bdeclare\\\\b|\\\\basync\\\\b|$)","patterns":[{"include":"#expression"}]},{"name":"meta.export.tsx","begin":"(?<!\\\\.|\\\\$)\\\\b(export)(?!(\\\\s*:)|(\\\\$))\\\\b","beginCaptures":{"0":{"name":"keyword.control.export.tsx"}},"end":"(?=;|\\\\bexport\\\\b|\\\\bfunction\\\\b|\\\\bclass\\\\b|\\\\binterface\\\\b|\\\\blet\\\\b|\\\\bvar\\\\b|\\\\bconst\\\\b|\\\\bimport\\\\b|\\\\benum\\\\b|\\\\bnamespace\\\\b|\\\\bmodule\\\\b|\\\\btype\\\\b|\\\\babstract\\\\b|\\\\bdeclare\\\\b|\\\\basync\\\\b|$)","patterns":[{"include":"#import-export-declaration"}]}]},"import-export-declaration":{"patterns":[{"include":"#comment"},{"include":"#string"},{"include":"#import-export-block"},{"name":"keyword.control.from.tsx","match":"\\\\bfrom\\\\b"},{"include":"#import-export-clause"}]},"import-export-block":{"name":"meta.block.tsx","begin":"\\\\{","beginCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#import-export-clause"}]},"import-export-clause":{"patterns":[{"include":"#comment"},{"comment":"(default|*|name) as alias","match":"(?x) (?: \\\\b(default)\\\\b | (\\\\*) | ([_$[:alpha:]][_$[:alnum:]]*)) \\\\s+  (as) \\\\s+ (?: (\\\\b default \\\\b | \\\\*) | ([_$[:alpha:]][_$[:alnum:]]*))","captures":{"1":{"name":"keyword.control.default.tsx"},"2":{"name":"constant.language.import-export-all.tsx"},"3":{"name":"variable.other.readwrite.tsx"},"4":{"name":"keyword.control.as.tsx"},"5":{"name":"invalid.illegal.tsx"},"6":{"name":"variable.other.readwrite.alias.tsx"}}},{"include":"#punctuation-comma"},{"name":"constant.language.import-export-all.tsx","match":"\\\\*"},{"name":"keyword.control.default.tsx","match":"\\\\b(default)\\\\b"},{"name":"variable.other.readwrite.alias.tsx","match":"([_$[:alpha:]][_$[:alnum:]]*)"}]},"class-or-interface-declaration":{"name":"meta.class.tsx","begin":"(?<!\\\\.|\\\\$)\\\\b(?:(export)\\\\s+)?\\\\b(?:(abstract)\\\\s+)?\\\\b(?:(class)|(interface))\\\\b","beginCaptures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"storage.modifier.tsx"},"3":{"name":"storage.type.class.tsx"},"4":{"name":"storage.type.interface.tsx"}},"end":"(?<=\\\\})","endCaptures":{"1":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#comment"},{"include":"#class-or-interface-heritage"},{"match":"[_$[:alpha:]][_$[:alnum:]]*","captures":{"0":{"name":"entity.name.type.class.tsx"}}},{"include":"#type-parameters"},{"include":"#class-or-interface-body"}]},"class-or-interface-heritage":{"begin":"(?<!\\\\.|\\\\$)(?:\\\\b(extends|implements)\\\\b)(?!\\\\$)","beginCaptures":{"1":{"name":"storage.modifier.tsx"}},"end":"(?=\\\\{)","endCaptures":{"1":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#comment"},{"include":"#class-or-interface-heritage"},{"include":"#type-parameters"},{"match":"([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(\\\\.)(?=\\\\s*[_$[:alpha:]][_$[:alnum:]]*(\\\\s*\\\\.\\\\s*[_$[:alpha:]][_$[:alnum:]]*)*\\\\s*([,<{]|extends|implements|//|/\\\\*))","captures":{"1":{"name":"entity.name.type.module.tsx"},"2":{"name":"punctuation.accessor.tsx"}}},{"match":"([_$[:alpha:]][_$[:alnum:]]*)(?=\\\\s*([,<{]|extends|implements|//|/\\\\*))","captures":{"1":{"name":"entity.other.inherited-class.tsx"}}},{"include":"#expression"}]},"class-or-interface-body":{"begin":"\\\\{","beginCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#string"},{"include":"#comment"},{"include":"#decorator"},{"include":"#method-declaration"},{"include":"#indexer-declaration"},{"include":"#field-declaration"},{"include":"#type-annotation"},{"include":"#variable-initializer"},{"include":"#access-modifier"},{"include":"#property-accessor"},{"include":"#expression"},{"include":"#punctuation-comma"},{"include":"#punctuation-semicolon"}]},"type-object":{"name":"meta.object.type.tsx","begin":"\\\\{","beginCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#type-object-members"}]},"type-object-members":{"patterns":[{"include":"#comment"},{"include":"#method-declaration"},{"include":"#indexer-declaration"},{"include":"#field-declaration"},{"include":"#type-annotation"},{"begin":"\\\\.\\\\.\\\\.","beginCaptures":{"0":{"name":"keyword.operator.spread.tsx"}},"end":"(?=\\\\}|;|,|$)|(?<=\\\\})","patterns":[{"include":"#type"}]},{"include":"#punctuation-comma"},{"include":"#punctuation-semicolon"}]},"field-declaration":{"name":"meta.field.declaration.tsx","begin":"(?<!\\\\()(?:(?<!\\\\.|\\\\$)\\\\b(readonly)\\\\s+)?(?=(([_$[:alpha:]][_$[:alnum:]]*)|(\\\\\'[^\']*\\\\\')|(\\\\\\"[^\\"]*\\\\\\")|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\]))\\\\s*(\\\\?\\\\s*)?(=|:))","beginCaptures":{"1":{"name":"storage.modifier.tsx"}},"end":"(?=\\\\}|;|,|$)|(?<=\\\\})","patterns":[{"include":"#variable-initializer"},{"begin":"(?=((?:[_$[:alpha:]][_$[:alnum:]]*)|(?:\\\\\'[^\']*\\\\\')|(?:\\\\\\"[^\\"]*\\\\\\")|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\]))\\\\s*(\\\\?\\\\s*)?(=|:))","end":"(?=[};,=]|$)|(?<=\\\\})","patterns":[{"include":"#type-annotation"},{"include":"#string"},{"include":"#array-literal"},{"include":"#comment"},{"name":"entity.name.function.tsx","match":"(?x)([_$[:alpha:]][_$[:alnum:]]*)(?=(\\\\?\\\\s*)?\\\\s* (=\\\\s*( (async\\\\s+) | (function\\\\s*[(<]) | (function\\\\s+) | ([_$[:alpha:]][_$[:alnum:]]*\\\\s*=>) | ((<([^<>]|\\\\<[^<>]+\\\\>)+>\\\\s*)?\\\\(([^()]|\\\\([^()]*\\\\))*\\\\)(\\\\s*:\\\\s*(.)*)?\\\\s*=>)) ) | (:\\\\s*( (<) | ([(]\\\\s*( ([)]) | (\\\\.\\\\.\\\\.) | ([_$[:alnum:]]+\\\\s*( ([:,?=])| ([)]\\\\s*=>) )) ))) ))"},{"name":"variable.object.property.tsx","match":"[_$[:alpha:]][_$[:alnum:]]*"},{"name":"keyword.operator.optional.tsx","match":"\\\\?"}]}]},"method-declaration":{"name":"meta.method.declaration.tsx","begin":"(?<!\\\\.|\\\\$)(?:\\\\b(public|private|protected)\\\\s+)?(?:\\\\b(abstract)\\\\s+)?(?:\\\\b(async)\\\\s+)?(?:\\\\b(get|set)\\\\s+)?(?:(?:\\\\b(?:(new)|(constructor))\\\\b(?!\\\\$|:))|(?:(\\\\*)\\\\s*)?(?=((([_$[:alpha:]][_$[:alnum:]]*)|(\\\\\'[^\']*\\\\\')|(\\\\\\"[^\\"]*\\\\\\")|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\]))\\\\s*(\\\\??))?\\\\s*[\\\\(\\\\<]))","beginCaptures":{"1":{"name":"storage.modifier.tsx"},"2":{"name":"storage.modifier.tsx"},"3":{"name":"storage.modifier.async.tsx"},"4":{"name":"storage.type.property.tsx"},"5":{"name":"keyword.operator.new.tsx"},"6":{"name":"storage.type.tsx"},"7":{"name":"keyword.generator.asterisk.tsx"}},"end":"(?=\\\\}|;|,)|(?<=\\\\})","patterns":[{"include":"#method-declaration-name"},{"include":"#comment"},{"include":"#type-parameters"},{"include":"#function-parameters"},{"include":"#return-type"},{"include":"#method-overload-declaration"},{"include":"#decl-block"}]},"method-overload-declaration":{"begin":"(?<!\\\\.|\\\\$)(?:\\\\b(public|private|protected)\\\\s+)?(?:\\\\b(abstract)\\\\s+)?(?:\\\\b(async)\\\\s+)?(?:\\\\b(get|set)\\\\s+)?(?:(?:\\\\b(?:(new)|(constructor))\\\\b(?!\\\\$|:))|(?:(\\\\*)\\\\s*)?(?=((([_$[:alpha:]][_$[:alnum:]]*)|(\\\\\'[^\']*\\\\\')|(\\\\\\"[^\\"]*\\\\\\")|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\]))\\\\s*(\\\\??))?\\\\s*[\\\\(\\\\<]))","beginCaptures":{"1":{"name":"storage.modifier.tsx"},"2":{"name":"storage.modifier.tsx"},"3":{"name":"storage.modifier.async.tsx"},"4":{"name":"storage.type.property.tsx"},"5":{"name":"keyword.operator.new.tsx"},"6":{"name":"storage.type.tsx"},"7":{"name":"keyword.generator.asterisk.tsx"}},"end":"(?=\\\\(|\\\\<)","patterns":[{"include":"#method-declaration-name"}]},"method-declaration-name":{"begin":"(?=(([_$[:alpha:]][_$[:alnum:]]*)|(\\\\\'[^\']*\\\\\')|(\\\\\\"[^\\"]*\\\\\\")|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\]))\\\\s*(\\\\??)\\\\s*[\\\\(\\\\<])","end":"(?=\\\\(|\\\\<)","patterns":[{"include":"#string"},{"include":"#array-literal"},{"name":"entity.name.function.tsx","match":"[_$[:alpha:]][_$[:alnum:]]*"},{"name":"keyword.operator.optional.tsx","match":"\\\\?"}]},"indexer-declaration":{"name":"meta.indexer.declaration.tsx","begin":"(?:(?<!\\\\.|\\\\$)\\\\b(readonly)\\\\s*)?(\\\\[)\\\\s*([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(?=:)","beginCaptures":{"1":{"name":"storage.modifier.tsx"},"2":{"name":"meta.brace.square.tsx"},"3":{"name":"variable.parameter.tsx"}},"end":"(\\\\])\\\\s*(\\\\?\\\\s*)?|$","endCaptures":{"1":{"name":"meta.brace.square.tsx"},"2":{"name":"keyword.operator.optional.tsx"}},"patterns":[{"include":"#type-annotation"}]},"function-declaration":{"name":"meta.function.tsx","begin":"(?<!\\\\.|\\\\$)\\\\b(?:(export)\\\\s+)?(?:(async)\\\\s+)?(function\\\\b)(?:\\\\s*(\\\\*))?(?:(?:\\\\s+|(?<=\\\\*))([_$[:alpha:]][_$[:alnum:]]*))?\\\\s*","beginCaptures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"storage.modifier.async.tsx"},"3":{"name":"storage.type.function.tsx"},"4":{"name":"keyword.generator.asterisk.tsx"},"5":{"name":"entity.name.function.tsx"}},"end":"(?=;|\\\\})|(?<=\\\\})","patterns":[{"include":"#comment"},{"include":"#type-parameters"},{"include":"#function-parameters"},{"include":"#return-type"},{"include":"#function-overload-declaration"},{"include":"#decl-block"}]},"function-overload-declaration":{"name":"meta.function.overload.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(?:(export)\\\\s+)?(?:(async)\\\\s+)?(function\\\\b)(?:\\\\s*(\\\\*))?(?:(?:\\\\s+|(?<=\\\\*))([_$[:alpha:]][_$[:alnum:]]*))?\\\\s*","captures":{"1":{"name":"keyword.control.export.tsx"},"2":{"name":"storage.modifier.async.tsx"},"3":{"name":"storage.type.function.tsx"},"4":{"name":"keyword.generator.asterisk.tsx"},"5":{"name":"entity.name.function.tsx"}}},"object-literal":{"name":"meta.objectliteral.tsx","begin":"\\\\{","beginCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#object-member"}]},"decl-block":{"name":"meta.block.tsx","begin":"\\\\{","beginCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#statements"}]},"after-operator-block":{"name":"meta.objectliteral.tsx","begin":"(?<=[=(,\\\\[?+!]|await|return|yield|throw|in|of|typeof|&&|\\\\|\\\\||\\\\*)\\\\s*(\\\\{)","beginCaptures":{"1":{"name":"punctuation.definition.block.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#object-member"}]},"parameter-name":{"patterns":[{"match":"(?x)(?:\\\\s*\\\\b(readonly)\\\\s+)?(?:\\\\s*\\\\b(public|private|protected)\\\\s+)?(\\\\.\\\\.\\\\.)?\\\\s*(?<!=|:)([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(\\\\??)(?=\\\\s* (=\\\\s*( (async\\\\s+) | (function\\\\s*[(<]) | (function\\\\s+) | ([_$[:alpha:]][_$[:alnum:]]*\\\\s*=>) | ((<([^<>]|\\\\<[^<>]+\\\\>)+>\\\\s*)?\\\\(([^()]|\\\\([^()]*\\\\))*\\\\)(\\\\s*:\\\\s*(.)*)?\\\\s*=>)) ) | (:\\\\s*( (<) | ([(]\\\\s*( ([)]) | (\\\\.\\\\.\\\\.) | ([_$[:alnum:]]+\\\\s*( ([:,?=])| ([)]\\\\s*=>) )) ))) ))","captures":{"1":{"name":"storage.modifier.tsx"},"2":{"name":"storage.modifier.tsx"},"3":{"name":"keyword.operator.rest.tsx"},"4":{"name":"entity.name.function.tsx"},"5":{"name":"keyword.operator.optional.tsx"}}},{"match":"(?:\\\\s*\\\\b(readonly)\\\\s+)?(?:\\\\s*\\\\b(public|private|protected)\\\\s+)?(\\\\.\\\\.\\\\.)?\\\\s*(?<!=|:)([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(\\\\??)","captures":{"1":{"name":"storage.modifier.tsx"},"2":{"name":"storage.modifier.tsx"},"3":{"name":"keyword.operator.rest.tsx"},"4":{"name":"variable.parameter.tsx"},"5":{"name":"keyword.operator.optional.tsx"}}}]},"destructuring-parameter":{"patterns":[{"name":"meta.parameter.object-binding-pattern.tsx","begin":"(?<!=|:)\\\\s*(\\\\{)","beginCaptures":{"1":{"name":"punctuation.definition.binding-pattern.object.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.binding-pattern.object.tsx"}},"patterns":[{"include":"#parameter-object-binding-element"}]},{"name":"meta.paramter.array-binding-pattern.tsx","begin":"(?<!=|:)\\\\s*(\\\\[)","beginCaptures":{"1":{"name":"punctuation.definition.binding-pattern.array.tsx"}},"end":"\\\\]","endCaptures":{"0":{"name":"punctuation.definition.binding-pattern.array.tsx"}},"patterns":[{"include":"#parameter-binding-element"},{"include":"#punctuation-comma"}]}]},"parameter-object-binding-element":{"patterns":[{"include":"#comment"},{"begin":"(?=(([_$[:alpha:]][_$[:alnum:]]*)|(\\\\\'[^\']*\\\\\')|(\\\\\\"[^\\"]*\\\\\\")|(\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\]))\\\\s*(:))","end":"(?=,|\\\\})","patterns":[{"include":"#object-binding-element-propertyName"},{"include":"#parameter-binding-element"}]},{"include":"#parameter-object-binding-pattern"},{"include":"#destructuring-parameter-rest"},{"include":"#variable-initializer"},{"include":"#punctuation-comma"}]},"parameter-binding-element":{"patterns":[{"include":"#comment"},{"include":"#parameter-object-binding-pattern"},{"include":"#parameter-array-binding-pattern"},{"include":"#destructuring-parameter-rest"},{"include":"#variable-initializer"}]},"destructuring-parameter-rest":{"match":"(?:(\\\\.\\\\.\\\\.)\\\\s*)?([_$[:alpha:]][_$[:alnum:]]*)","captures":{"1":{"name":"keyword.operator.rest.tsx"},"2":{"name":"variable.parameter.tsx"}}},"parameter-object-binding-pattern":{"begin":"(?:(\\\\.\\\\.\\\\.)\\\\s*)?(\\\\{)","beginCaptures":{"1":{"name":"keyword.operator.rest.tsx"},"2":{"name":"punctuation.definition.binding-pattern.object.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.binding-pattern.object.tsx"}},"patterns":[{"include":"#parameter-object-binding-element"}]},"parameter-array-binding-pattern":{"begin":"(?:(\\\\.\\\\.\\\\.)\\\\s*)?(\\\\[)","beginCaptures":{"1":{"name":"keyword.operator.rest.tsx"},"2":{"name":"punctuation.definition.binding-pattern.array.tsx"}},"end":"\\\\]","endCaptures":{"0":{"name":"punctuation.definition.binding-pattern.array.tsx"}},"patterns":[{"include":"#parameter-binding-element"},{"include":"#punctuation-comma"}]},"return-type":{"name":"meta.return.type.tsx","begin":"(?<=\\\\))\\\\s*(:)","beginCaptures":{"1":{"name":"keyword.operator.type.annotation.tsx"}},"end":"(?<!:)((?=$)|(?=\\\\{|;|//|\\\\}))","patterns":[{"include":"#comment"},{"name":"meta.object.type.tsx","begin":"(?<=:)\\\\s*(\\\\{)","beginCaptures":{"1":{"name":"punctuation.definition.block.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#type-object-members"}]},{"include":"#type-predicate-operator"},{"include":"#type"}]},"type-predicate-operator":{"name":"keyword.operator.expression.is.tsx","match":"(?<!\\\\.|\\\\$)\\\\bis\\\\b(?!\\\\$)"},"type-annotation":{"name":"meta.type.annotation.tsx","begin":":","beginCaptures":{"0":{"name":"keyword.operator.type.annotation.tsx"}},"end":"(?=$|[,);\\\\}\\\\]]|//)|(?==[^>])|(?<=[\\\\}>\\\\]\\\\)]|[_$[:alpha:]])\\\\s*(?=\\\\{)","patterns":[{"include":"#comment"},{"include":"#type"}]},"type":{"name":"meta.type.tsx","patterns":[{"include":"#comment"},{"include":"#string"},{"include":"#numeric-literal"},{"include":"#type-primitive"},{"include":"#type-builtin-literals"},{"include":"#type-parameters"},{"include":"#type-tuple"},{"include":"#type-object"},{"include":"#type-operators"},{"include":"#type-fn-type-parameters"},{"include":"#type-paren-or-function-parameters"},{"include":"#type-function-return-type"},{"include":"#type-name"}]},"function-parameters":{"name":"meta.parameters.tsx","begin":"\\\\(","beginCaptures":{"0":{"name":"punctuation.definition.parameters.begin.tsx"}},"end":"\\\\)","endCaptures":{"0":{"name":"punctuation.definition.parameters.end.tsx"}},"patterns":[{"include":"#comment"},{"include":"#decorator"},{"include":"#destructuring-parameter"},{"include":"#parameter-name"},{"include":"#type-annotation"},{"include":"#variable-initializer"},{"name":"punctuation.separator.parameter.tsx","match":","}]},"type-primitive":{"name":"support.type.primitive.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(string|number|boolean|symbol|any|void|never)\\\\b(?!\\\\$)"},"type-builtin-literals":{"name":"support.type.builtin.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(this|true|false|undefined|null)\\\\b(?!\\\\$)"},"type-paren-or-function-parameters":{"name":"meta.type.paren.cover.tsx","begin":"\\\\(","beginCaptures":{"0":{"name":"meta.brace.round.tsx"}},"end":"\\\\)","endCaptures":{"0":{"name":"meta.brace.round.tsx"}},"patterns":[{"include":"#type"},{"include":"#function-parameters"}]},"type-fn-type-parameters":{"patterns":[{"name":"meta.type.constructor.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(new)\\\\b(?=\\\\s*\\\\<)","captures":{"1":{"name":"keyword.control.new.tsx"}}},{"name":"meta.type.constructor.tsx","begin":"(?<!\\\\.|\\\\$)\\\\b(new)\\\\b\\\\s*(?=\\\\()","beginCaptures":{"1":{"name":"keyword.control.new.tsx"}},"end":"(?<=\\\\))","patterns":[{"include":"#function-parameters"}]},{"name":"meta.type.function.tsx","begin":"(?<=\\\\>)\\\\s*(?=\\\\()","end":"(?<=\\\\))","patterns":[{"include":"#function-parameters"}]},{"name":"meta.type.function.tsx","begin":"(?x)( (?= [(]\\\\s*( ([)]) |  (\\\\.\\\\.\\\\.) | ([_$[:alnum:]]+\\\\s*( ([:,?=])| ([)]\\\\s*=>) )) ) ) )","end":"(?<=\\\\))","patterns":[{"include":"#function-parameters"}]}]},"type-operators":{"patterns":[{"include":"#typeof-operator"},{"name":"keyword.operator.type.tsx","match":"[&|]"},{"name":"keyword.operator.expression.keyof.tsx","match":"(?<!\\\\.|\\\\$)\\\\bkeyof\\\\b(?!\\\\$)"}]},"type-function-return-type":{"name":"meta.type.function.return.tsx","begin":"=>","beginCaptures":{"0":{"name":"storage.type.function.arrow.tsx"}},"end":"(?<!=>)(?=[,\\\\]\\\\)\\\\{\\\\}=;>]|//|$)","patterns":[{"include":"#comment"},{"name":"meta.object.type.tsx","begin":"(?<==>)\\\\s*(\\\\{)","beginCaptures":{"1":{"name":"punctuation.definition.block.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#type-object-members"}]},{"include":"#type-predicate-operator"},{"include":"#type"}]},"type-tuple":{"name":"meta.type.tuple.tsx","begin":"\\\\[","beginCaptures":{"0":{"name":"meta.brace.square.tsx"}},"end":"\\\\]","endCaptures":{"0":{"name":"meta.brace.square.tsx"}},"patterns":[{"include":"#type"},{"include":"#punctuation-comma"}]},"type-name":{"patterns":[{"match":"([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(\\\\.)","captures":{"1":{"name":"entity.name.type.module.tsx"},"2":{"name":"punctuation.accessor.tsx"}}},{"name":"entity.name.type.tsx","match":"[_$[:alpha:]][_$[:alnum:]]*"}]},"type-parameters":{"name":"meta.type.parameters.tsx","begin":"(<)","beginCaptures":{"1":{"name":"punctuation.definition.typeparameters.begin.tsx"}},"end":"(?=$)|(>)","endCaptures":{"1":{"name":"punctuation.definition.typeparameters.end.tsx"}},"patterns":[{"include":"#comment"},{"name":"storage.modifier.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(extends)\\\\b(?!\\\\$)"},{"include":"#type"},{"include":"#punctuation-comma"}]},"variable-initializer":{"begin":"(?<!=|!)(=)(?!=)","beginCaptures":{"1":{"name":"keyword.operator.assignment.tsx"}},"end":"(?=$|[,);}\\\\]])","patterns":[{"include":"#expression"}]},"for-loop":{"begin":"(?<!\\\\.|\\\\$)\\\\b(for)\\\\s*(\\\\()","beginCaptures":{"1":{"name":"keyword.control.loop.tsx"},"2":{"name":"meta.brace.round.tsx"}},"end":"\\\\)","endCaptures":{"0":{"name":"meta.brace.round.tsx"}},"patterns":[{"include":"#var-expr"},{"include":"#expression"},{"include":"#punctuation-semicolon"}]},"switch-expression":{"name":"switch-expression.expr.tsx","begin":"(?<!\\\\.|\\\\$)\\\\b(switch)\\\\s*(\\\\()","beginCaptures":{"1":{"name":"keyword.control.switch.tsx"},"2":{"name":"meta.brace.round.tsx"}},"end":"\\\\)","endCaptures":{"0":{"name":"meta.brace.round.tsx"}},"patterns":[{"include":"#expression"}]},"switch-block":{"name":"switch-block.expr.tsx","begin":"{","beginCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"end":"(?=\\\\})","patterns":[{"include":"#case-clause"},{"include":"#statements"}]},"case-clause":{"name":"case-clause.expr.tsx","begin":"(?<!\\\\.|\\\\$)\\\\b(case|default(?=:))\\\\b(?!\\\\$)","beginCaptures":{"1":{"name":"keyword.control.switch.tsx"}},"end":":","endCaptures":{"0":{"name":"punctuation.definition.section.case-statement.tsx"}},"patterns":[{"include":"#expression"}]},"switch-statement":{"name":"switch-statement.expr.tsx","begin":"(?<!\\\\.|\\\\$)(?=\\\\bswitch\\\\s*\\\\()","end":"}","endCaptures":{"0":{"name":"punctuation.definition.block.tsx"}},"patterns":[{"include":"#switch-expression"},{"include":"#switch-block"}]},"support-objects":{"patterns":[{"name":"variable.language.arguments.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(arguments)\\\\b(?!\\\\$)"},{"name":"support.class.builtin.tsx","match":"(?x)(?<!\\\\.|\\\\$)\\\\b(Array|ArrayBuffer|Atomics|Boolean|DataView|Date|Float32Array|Float64Array|Function|Generator |GeneratorFunction|Int8Array|Int16Array|Int32Array|Intl|Map|Number|Object|Promise|Proxy |Reflect|RegExp|Set|SharedArrayBuffer|SIMD|String|Symbol|TypedArray |Uint8Array|Uint16Array|Uint32Array|Uint8ClampedArray|WeakMap|WeakSet)\\\\b(?!\\\\$)"},{"name":"support.class.error.tsx","match":"(?<!\\\\.|\\\\$)\\\\b((Eval|Internal|Range|Reference|Syntax|Type|URI)?Error)\\\\b(?!\\\\$)"},{"name":"support.function.tsx","match":"(?x)(?<!\\\\.|\\\\$)\\\\b(clear(Interval|Timeout)|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval| isFinite|isNaN|parseFloat|parseInt|require|set(Interval|Timeout)|super|unescape|uneval)(?=\\\\s*\\\\()"},{"match":"(?x)(?<!\\\\.|\\\\$)\\\\b(Math)(?:\\\\s*(\\\\.)\\\\s*(?:\\n  (abs|acos|acosh|asin|asinh|atan|atan2|atanh|cbrt|ceil|clz32|cos|cosh|exp|\\n  expm1|floor|fround|hypot|imul|log|log10|log1p|log2|max|min|pow|random|\\n  round|sign|sin|sinh|sqrt|tan|tanh|trunc)\\n  |\\n  (E|LN10|LN2|LOG10E|LOG2E|PI|SQRT1_2|SQRT2)))?\\\\b(?!\\\\$)","captures":{"1":{"name":"support.constant.math.tsx"},"2":{"name":"punctuation.accessor.tsx"},"3":{"name":"support.function.math.tsx"},"4":{"name":"support.constant.property.math.tsx"}}},{"match":"(?x)(?<!\\\\.|\\\\$)\\\\b(console)(?:\\\\s*(\\\\.)\\\\s*(\\n  assert|clear|count|debug|dir|error|group|groupCollapsed|groupEnd|info|log\\n  |profile|profileEnd|table|time|timeEnd|timeStamp|trace|warn))?\\\\b(?!\\\\$)","captures":{"1":{"name":"support.class.console.tsx"},"2":{"name":"punctuation.accessor.tsx"},"3":{"name":"support.function.console.tsx"}}},{"match":"(?<!\\\\.|\\\\$)\\\\b(JSON)(?:\\\\s*(\\\\.)\\\\s*(parse|stringify))?\\\\b(?!\\\\$)","captures":{"1":{"name":"support.constant.json.tsx"},"2":{"name":"punctuation.accessor.tsx"},"3":{"name":"support.function.json.tsx"}}},{"match":"(?x) (\\\\.) \\\\s* (?:\\n  (constructor|length|prototype|__proto__) \\n  |\\n  (EPSILON|MAX_SAFE_INTEGER|MAX_VALUE|MIN_SAFE_INTEGER|MIN_VALUE|NEGATIVE_INFINITY|POSITIVE_INFINITY))\\\\b(?!\\\\$)","captures":{"1":{"name":"punctuation.accessor.tsx"},"2":{"name":"support.variable.property.tsx"},"3":{"name":"support.constant.tsx"}}},{"match":"(?x) (?<!\\\\.|\\\\$) \\\\b (?:\\n  (document|event|navigator|performance|screen|window) \\n  |\\n  (AnalyserNode|ArrayBufferView|Attr|AudioBuffer|AudioBufferSourceNode|AudioContext|AudioDestinationNode|AudioListener\\n  |AudioNode|AudioParam|BatteryManager|BeforeUnloadEvent|BiquadFilterNode|Blob|BufferSource|ByteString|CSS|CSSConditionRule\\n  |CSSCounterStyleRule|CSSGroupingRule|CSSMatrix|CSSMediaRule|CSSPageRule|CSSPrimitiveValue|CSSRule|CSSRuleList|CSSStyleDeclaration\\n  |CSSStyleRule|CSSStyleSheet|CSSSupportsRule|CSSValue|CSSValueList|CanvasGradient|CanvasImageSource|CanvasPattern\\n  |CanvasRenderingContext2D|ChannelMergerNode|ChannelSplitterNode|CharacterData|ChromeWorker|CloseEvent|Comment|CompositionEvent\\n  |Console|ConvolverNode|Coordinates|Credential|CredentialsContainer|Crypto|CryptoKey|CustomEvent|DOMError|DOMException\\n  |DOMHighResTimeStamp|DOMImplementation|DOMString|DOMStringList|DOMStringMap|DOMTimeStamp|DOMTokenList|DataTransfer\\n  |DataTransferItem|DataTransferItemList|DedicatedWorkerGlobalScope|DelayNode|DeviceProximityEvent|DirectoryEntry\\n  |DirectoryEntrySync|DirectoryReader|DirectoryReaderSync|Document|DocumentFragment|DocumentTouch|DocumentType|DragEvent\\n  |DynamicsCompressorNode|Element|Entry|EntrySync|ErrorEvent|Event|EventListener|EventSource|EventTarget|FederatedCredential\\n  |FetchEvent|File|FileEntry|FileEntrySync|FileException|FileList|FileReader|FileReaderSync|FileSystem|FileSystemSync\\n  |FontFace|FormData|GainNode|Gamepad|GamepadButton|GamepadEvent|Geolocation|GlobalEventHandlers|HTMLAnchorElement\\n  |HTMLAreaElement|HTMLAudioElement|HTMLBRElement|HTMLBaseElement|HTMLBodyElement|HTMLButtonElement|HTMLCanvasElement\\n  |HTMLCollection|HTMLContentElement|HTMLDListElement|HTMLDataElement|HTMLDataListElement|HTMLDialogElement|HTMLDivElement\\n  |HTMLDocument|HTMLElement|HTMLEmbedElement|HTMLFieldSetElement|HTMLFontElement|HTMLFormControlsCollection|HTMLFormElement\\n  |HTMLHRElement|HTMLHeadElement|HTMLHeadingElement|HTMLHtmlElement|HTMLIFrameElement|HTMLImageElement|HTMLInputElement\\n  |HTMLKeygenElement|HTMLLIElement|HTMLLabelElement|HTMLLegendElement|HTMLLinkElement|HTMLMapElement|HTMLMediaElement\\n  |HTMLMetaElement|HTMLMeterElement|HTMLModElement|HTMLOListElement|HTMLObjectElement|HTMLOptGroupElement|HTMLOptionElement\\n  |HTMLOptionsCollection|HTMLOutputElement|HTMLParagraphElement|HTMLParamElement|HTMLPreElement|HTMLProgressElement\\n  |HTMLQuoteElement|HTMLScriptElement|HTMLSelectElement|HTMLShadowElement|HTMLSourceElement|HTMLSpanElement|HTMLStyleElement\\n  |HTMLTableCaptionElement|HTMLTableCellElement|HTMLTableColElement|HTMLTableDataCellElement|HTMLTableElement|HTMLTableHeaderCellElement\\n  |HTMLTableRowElement|HTMLTableSectionElement|HTMLTextAreaElement|HTMLTimeElement|HTMLTitleElement|HTMLTrackElement\\n  |HTMLUListElement|HTMLUnknownElement|HTMLVideoElement|HashChangeEvent|History|IDBCursor|IDBCursorWithValue|IDBDatabase\\n  |IDBEnvironment|IDBFactory|IDBIndex|IDBKeyRange|IDBMutableFile|IDBObjectStore|IDBOpenDBRequest|IDBRequest|IDBTransaction\\n  |IDBVersionChangeEvent|IIRFilterNode|IdentityManager|ImageBitmap|ImageBitmapFactories|ImageData|Index|InputDeviceCapabilities\\n  |InputEvent|InstallEvent|InstallTrigger|KeyboardEvent|LinkStyle|LocalFileSystem|LocalFileSystemSync|Location|MIDIAccess\\n  |MIDIConnectionEvent|MIDIInput|MIDIInputMap|MIDIOutputMap|MediaElementAudioSourceNode|MediaError|MediaKeyMessageEvent\\n  |MediaKeySession|MediaKeyStatusMap|MediaKeySystemAccess|MediaKeySystemConfiguration|MediaKeys|MediaRecorder|MediaStream\\n  |MediaStreamAudioDestinationNode|MediaStreamAudioSourceNode|MessageChannel|MessageEvent|MessagePort|MouseEvent\\n  |MutationObserver|MutationRecord|NamedNodeMap|Navigator|NavigatorConcurrentHardware|NavigatorGeolocation|NavigatorID\\n  |NavigatorLanguage|NavigatorOnLine|Node|NodeFilter|NodeIterator|NodeList|NonDocumentTypeChildNode|Notification\\n  |OfflineAudioCompletionEvent|OfflineAudioContext|OscillatorNode|PageTransitionEvent|PannerNode|ParentNode|PasswordCredential\\n  |Path2D|PaymentAddress|PaymentRequest|PaymentResponse|Performance|PerformanceEntry|PerformanceFrameTiming|PerformanceMark\\n  |PerformanceMeasure|PerformanceNavigation|PerformanceNavigationTiming|PerformanceObserver|PerformanceObserverEntryList\\n  |PerformanceResourceTiming|PerformanceTiming|PeriodicSyncEvent|PeriodicWave|Plugin|Point|PointerEvent|PopStateEvent\\n  |PortCollection|Position|PositionError|PositionOptions|PresentationConnectionClosedEvent|PresentationConnectionList\\n  |PresentationReceiver|ProcessingInstruction|ProgressEvent|PromiseRejectionEvent|PushEvent|PushRegistrationManager\\n  |RTCCertificate|RTCConfiguration|RTCPeerConnection|RTCSessionDescriptionCallback|RTCStatsReport|RadioNodeList|RandomSource\\n  |Range|ReadableByteStream|RenderingContext|SVGAElement|SVGAngle|SVGAnimateColorElement|SVGAnimateElement|SVGAnimateMotionElement\\n  |SVGAnimateTransformElement|SVGAnimatedAngle|SVGAnimatedBoolean|SVGAnimatedEnumeration|SVGAnimatedInteger|SVGAnimatedLength\\n  |SVGAnimatedLengthList|SVGAnimatedNumber|SVGAnimatedNumberList|SVGAnimatedPoints|SVGAnimatedPreserveAspectRatio\\n  |SVGAnimatedRect|SVGAnimatedString|SVGAnimatedTransformList|SVGAnimationElement|SVGCircleElement|SVGClipPathElement\\n  |SVGCursorElement|SVGDefsElement|SVGDescElement|SVGElement|SVGEllipseElement|SVGEvent|SVGFilterElement|SVGFontElement\\n  |SVGFontFaceElement|SVGFontFaceFormatElement|SVGFontFaceNameElement|SVGFontFaceSrcElement|SVGFontFaceUriElement\\n  |SVGForeignObjectElement|SVGGElement|SVGGlyphElement|SVGGradientElement|SVGHKernElement|SVGImageElement|SVGLength\\n  |SVGLengthList|SVGLineElement|SVGLinearGradientElement|SVGMPathElement|SVGMaskElement|SVGMatrix|SVGMissingGlyphElement\\n  |SVGNumber|SVGNumberList|SVGPathElement|SVGPatternElement|SVGPoint|SVGPolygonElement|SVGPolylineElement|SVGPreserveAspectRatio\\n  |SVGRadialGradientElement|SVGRect|SVGRectElement|SVGSVGElement|SVGScriptElement|SVGSetElement|SVGStopElement|SVGStringList\\n  |SVGStylable|SVGStyleElement|SVGSwitchElement|SVGSymbolElement|SVGTRefElement|SVGTSpanElement|SVGTests|SVGTextElement\\n  |SVGTextPositioningElement|SVGTitleElement|SVGTransform|SVGTransformList|SVGTransformable|SVGUseElement|SVGVKernElement\\n  |SVGViewElement|ServiceWorker|ServiceWorkerContainer|ServiceWorkerGlobalScope|ServiceWorkerRegistration|ServiceWorkerState\\n  |ShadowRoot|SharedWorker|SharedWorkerGlobalScope|SourceBufferList|StereoPannerNode|Storage|StorageEvent|StyleSheet\\n  |StyleSheetList|SubtleCrypto|SyncEvent|Text|TextMetrics|TimeEvent|TimeRanges|Touch|TouchEvent|TouchList|Transferable\\n  |TreeWalker|UIEvent|USVString|VRDisplayCapabilities|ValidityState|WaveShaperNode|WebGL|WebGLActiveInfo|WebGLBuffer\\n  |WebGLContextEvent|WebGLFramebuffer|WebGLProgram|WebGLRenderbuffer|WebGLRenderingContext|WebGLShader|WebGLShaderPrecisionFormat\\n  |WebGLTexture|WebGLTimerQueryEXT|WebGLTransformFeedback|WebGLUniformLocation|WebGLVertexArrayObject|WebGLVertexArrayObjectOES\\n  |WebSocket|WebSockets|WebVTT|WheelEvent|Window|WindowBase64|WindowEventHandlers|WindowTimers|Worker|WorkerGlobalScope\\n  |WorkerLocation|WorkerNavigator|XMLHttpRequest|XMLHttpRequestEventTarget|XMLSerializer|XPathExpression|XPathResult\\n  |XSLTProcessor))\\\\b(?!\\\\$)","captures":{"1":{"name":"support.variable.dom.tsx"},"2":{"name":"support.class.dom.tsx"}}},{"match":"(?x) (\\\\.) \\\\s* (?:\\n  (ATTRIBUTE_NODE|CDATA_SECTION_NODE|COMMENT_NODE|DOCUMENT_FRAGMENT_NODE|DOCUMENT_NODE|DOCUMENT_TYPE_NODE\\n  |DOMSTRING_SIZE_ERR|ELEMENT_NODE|ENTITY_NODE|ENTITY_REFERENCE_NODE|HIERARCHY_REQUEST_ERR|INDEX_SIZE_ERR\\n  |INUSE_ATTRIBUTE_ERR|INVALID_CHARACTER_ERR|NO_DATA_ALLOWED_ERR|NO_MODIFICATION_ALLOWED_ERR|NOT_FOUND_ERR\\n  |NOT_SUPPORTED_ERR|NOTATION_NODE|PROCESSING_INSTRUCTION_NODE|TEXT_NODE|WRONG_DOCUMENT_ERR)\\n  |\\n  (_content|[xyz]|abbr|above|accept|acceptCharset|accessKey|action|align|[av]Link(?:color)?|all|alt|anchors|appCodeName\\n  |appCore|applets|appMinorVersion|appName|appVersion|archive|areas|arguments|attributes|availHeight|availLeft|availTop\\n  |availWidth|axis|background|backgroundColor|backgroundImage|below|bgColor|body|border|borderBottomWidth|borderColor\\n  |borderLeftWidth|borderRightWidth|borderStyle|borderTopWidth|borderWidth|bottom|bufferDepth|callee|caller|caption\\n  |cellPadding|cells|cellSpacing|ch|characterSet|charset|checked|childNodes|chOff|cite|classes|className|clear\\n  |clientInformation|clip|clipBoardData|closed|code|codeBase|codeType|color|colorDepth|cols|colSpan|compact|complete\\n  |components|content|controllers|cookie|cookieEnabled|cords|cpuClass|crypto|current|data|dateTime|declare|defaultCharset\\n  |defaultChecked|defaultSelected|defaultStatus|defaultValue|defaultView|defer|description|dialogArguments|dialogHeight\\n  |dialogLeft|dialogTop|dialogWidth|dir|directories|disabled|display|docmain|doctype|documentElement|elements|embeds\\n  |enabledPlugin|encoding|enctype|entities|event|expando|external|face|fgColor|filename|firstChild|fontFamily|fontSize\\n  |fontWeight|form|formName|forms|frame|frameBorder|frameElement|frames|hasFocus|hash|headers|height|history|host\\n  |hostname|href|hreflang|hspace|htmlFor|httpEquiv|id|ids|ignoreCase|images|implementation|index|innerHeight|innerWidth\\n  |input|isMap|label|lang|language|lastChild|lastIndex|lastMatch|lastModified|lastParen|layer[sXY]|left|leftContext\\n  |lineHeight|link|linkColor|links|listStyleType|localName|location|locationbar|longDesc|lowsrc|lowSrc|marginBottom\\n  |marginHeight|marginLeft|marginRight|marginTop|marginWidth|maxLength|media|menubar|method|mimeTypes|multiline|multiple\\n  |name|nameProp|namespaces|namespaceURI|next|nextSibling|nodeName|nodeType|nodeValue|noHref|noResize|noShade|notationName\\n  |notations|noWrap|object|offscreenBuffering|onLine|onreadystatechange|opener|opsProfile|options|oscpu|outerHeight\\n  |outerWidth|ownerDocument|paddingBottom|paddingLeft|paddingRight|paddingTop|page[XY]|page[XY]Offset|parent|parentLayer\\n  |parentNode|parentWindow|pathname|personalbar|pixelDepth|pkcs11|platform|plugins|port|prefix|previous|previousDibling\\n  |product|productSub|profile|profileend|prompt|prompter|protocol|publicId|readOnly|readyState|referrer|rel|responseText\\n  |responseXML|rev|right|rightContext|rowIndex|rows|rowSpan|rules|scheme|scope|screen[XY]|screenLeft|screenTop|scripts\\n  |scrollbars|scrolling|sectionRowIndex|security|securityPolicy|selected|selectedIndex|selection|self|shape|siblingAbove\\n  |siblingBelow|size|source|specified|standby|start|status|statusbar|statusText|style|styleSheets|suffixes|summary\\n  |systemId|systemLanguage|tagName|tags|target|tBodies|text|textAlign|textDecoration|textIndent|textTransform|tFoot|tHead\\n  |title|toolbar|top|type|undefined|uniqueID|updateInterval|URL|URLUnencoded|useMap|userAgent|userLanguage|userProfile\\n  |vAlign|value|valueType|vendor|vendorSub|version|visibility|vspace|whiteSpace|width|X[MS]LDocument|zIndex))\\\\b(?!\\\\$|\\\\s*(<([^<>]|\\\\<[^<>]+\\\\>)+>\\\\s*)?\\\\()","captures":{"1":{"name":"punctuation.accessor.tsx"},"2":{"name":"support.constant.dom.tsx"},"3":{"name":"support.variable.property.dom.tsx"}}},{"name":"support.class.node.tsx","match":"(?x)(?<!\\\\.|\\\\$)\\\\b(Buffer|EventEmitter|Server|Pipe|Socket|REPLServer|ReadStream|WriteStream|Stream\\n  |Inflate|Deflate|InflateRaw|DeflateRaw|GZip|GUnzip|Unzip|Zip)\\\\b(?!\\\\$)"},{"name":"support.module.node.tsx","match":"(?x)(?<!\\\\.|\\\\$)\\\\b(assert|buffer|child_process|cluster|constants|crypto|dgram|dns|domain|events|fs|http|https|net\\n  |os|path|punycode|querystring|readline|repl|stream|string_decoder|timers|tls|tty|url|util|vm|zlib)\\\\b(?!\\\\$)"},{"match":"(?x)(?<!\\\\.|\\\\$)\\\\b(process)(?:(\\\\.)(?:\\n  (arch|argv|config|connected|env|execArgv|execPath|exitCode|mainModule|pid|platform|release|stderr|stdin|stdout|title|version|versions)\\n  |\\n  (abort|chdir|cwd|disconnect|exit|[sg]ete?[gu]id|send|[sg]etgroups|initgroups|kill|memoryUsage|nextTick|umask|uptime|hrtime)\\n))?\\\\b(?!\\\\$)","captures":{"1":{"name":"support.variable.object.process.tsx"},"2":{"name":"punctuation.accessor.tsx"},"3":{"name":"support.variable.property.process.tsx"},"4":{"name":"support.function.process.tsx"}}},{"match":"(?<!\\\\.|\\\\$)\\\\b(?:(exports)|(module)(?:(\\\\.)(exports|id|filename|loaded|parent|children))?)\\\\b(?!\\\\$)","captures":{"1":{"name":"support.type.object.module.tsx"},"2":{"name":"support.type.object.module.tsx"},"3":{"name":"punctuation.accessor.tsx"},"4":{"name":"support.type.object.module.tsx"}}},{"name":"support.variable.object.node.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(global|GLOBAL|root|__dirname|__filename)\\\\b(?!\\\\$)"},{"match":"(?x) (\\\\.) \\\\s* \\n(?:\\n (on(?:Rowsinserted|Rowsdelete|Rowenter|Rowexit|Resize|Resizestart|Resizeend|Reset|\\n   Readystatechange|Mouseout|Mouseover|Mousedown|Mouseup|Mousemove|\\n   Before(?:cut|deactivate|unload|update|paste|print|editfocus|activate)|\\n   Blur|Scrolltop|Submit|Select|Selectstart|Selectionchange|Hover|Help|\\n   Change|Contextmenu|Controlselect|Cut|Cellchange|Clock|Close|Deactivate|\\n   Datasetchanged|Datasetcomplete|Dataavailable|Drop|Drag|Dragstart|Dragover|\\n   Dragdrop|Dragenter|Dragend|Dragleave|Dblclick|Unload|Paste|Propertychange|Error|\\n   Errorupdate|Keydown|Keyup|Keypress|Focus|Load|Activate|Afterupdate|Afterprint|Abort)\\n ) |\\n (shift|showModelessDialog|showModalDialog|showHelp|scroll|scrollX|scrollByPages|\\n   scrollByLines|scrollY|scrollTo|stop|strike|sizeToContent|sidebar|signText|sort|\\n   sup|sub|substr|substring|splice|split|send|set(?:Milliseconds|Seconds|Minutes|Hours|\\n   Month|Year|FullYear|Date|UTC(?:Milliseconds|Seconds|Minutes|Hours|Month|FullYear|Date)|\\n   Time|Hotkeys|Cursor|ZOptions|Active|Resizable|RequestHeader)|search|slice|\\n   savePreferences|small|home|handleEvent|navigate|char|charCodeAt|charAt|concat|\\n   contextual|confirm|compile|clear|captureEvents|call|createStyleSheet|createPopup|\\n   createEventObject|to(?:GMTString|UTCString|String|Source|UpperCase|LowerCase|LocaleString)|\\n   test|taint|taintEnabled|indexOf|italics|disableExternalCapture|dump|detachEvent|unshift|\\n   untaint|unwatch|updateCommands|join|javaEnabled|pop|push|plugins.refresh|paddings|parse|\\n   print|prompt|preference|enableExternalCapture|exec|execScript|valueOf|UTC|find|file|\\n   fileModifiedDate|fileSize|fileCreatedDate|fileUpdatedDate|fixed|fontsize|fontcolor|\\n   forward|fromCharCode|watch|link|load|lastIndexOf|anchor|attachEvent|atob|apply|alert|\\n   abort|routeEvents|resize|resizeBy|resizeTo|recalc|returnValue|replace|reverse|reload|\\n   releaseCapture|releaseEvents|go|get(?:Milliseconds|Seconds|Minutes|Hours|Month|Day|Year|FullYear|\\n   Time|Date|TimezoneOffset|UTC(?:Milliseconds|Seconds|Minutes|Hours|Day|Month|FullYear|Date)|\\n   Attention|Selection|ResponseHeader|AllResponseHeaders)|moveBy|moveBelow|moveTo|\\n   moveToAbsolute|moveAbove|mergeAttributes|match|margins|btoa|big|bold|borderWidths|blink|back\\n ) |\\n (acceptNode|add|addEventListener|addTextTrack|adoptNode|after|animate|append|\\n   appendChild|appendData|before|blur|canPlayType|captureStream|\\n   caretPositionFromPoint|caretRangeFromPoint|checkValidity|clear|click|\\n   cloneContents|cloneNode|cloneRange|close|closest|collapse|\\n   compareBoundaryPoints|compareDocumentPosition|comparePoint|contains|\\n   convertPointFromNode|convertQuadFromNode|convertRectFromNode|createAttribute|\\n   createAttributeNS|createCaption|createCDATASection|createComment|\\n   createContextualFragment|createDocument|createDocumentFragment|\\n   createDocumentType|createElement|createElementNS|createEntityReference|\\n   createEvent|createExpression|createHTMLDocument|createNodeIterator|\\n   createNSResolver|createProcessingInstruction|createRange|createShadowRoot|\\n   createTBody|createTextNode|createTFoot|createTHead|createTreeWalker|delete|\\n   deleteCaption|deleteCell|deleteContents|deleteData|deleteRow|deleteTFoot|\\n   deleteTHead|detach|disconnect|dispatchEvent|elementFromPoint|elementsFromPoint|\\n   enableStyleSheetsForSet|entries|evaluate|execCommand|exitFullscreen|\\n   exitPointerLock|expand|extractContents|fastSeek|firstChild|focus|forEach|get|\\n   getAll|getAnimations|getAttribute|getAttributeNames|getAttributeNode|\\n   getAttributeNodeNS|getAttributeNS|getBoundingClientRect|getBoxQuads|\\n   getClientRects|getContext|getDestinationInsertionPoints|getElementById|\\n   getElementsByClassName|getElementsByName|getElementsByTagName|\\n   getElementsByTagNameNS|getItem|getNamedItem|getSelection|getStartDate|\\n   getVideoPlaybackQuality|has|hasAttribute|hasAttributeNS|hasAttributes|\\n   hasChildNodes|hasFeature|hasFocus|importNode|initEvent|insertAdjacentElement|\\n   insertAdjacentHTML|insertAdjacentText|insertBefore|insertCell|insertData|\\n   insertNode|insertRow|intersectsNode|isDefaultNamespace|isEqualNode|\\n   isPointInRange|isSameNode|item|key|keys|lastChild|load|lookupNamespaceURI|\\n   lookupPrefix|matches|move|moveAttribute|moveAttributeNode|moveChild|\\n   moveNamedItem|namedItem|nextNode|nextSibling|normalize|observe|open|\\n   parentNode|pause|play|postMessage|prepend|preventDefault|previousNode|\\n   previousSibling|probablySupportsContext|queryCommandEnabled|\\n   queryCommandIndeterm|queryCommandState|queryCommandSupported|queryCommandValue|\\n   querySelector|querySelectorAll|registerContentHandler|registerElement|\\n   registerProtocolHandler|releaseCapture|releaseEvents|remove|removeAttribute|\\n   removeAttributeNode|removeAttributeNS|removeChild|removeEventListener|\\n   removeItem|replace|replaceChild|replaceData|replaceWith|reportValidity|\\n   requestFullscreen|requestPointerLock|reset|scroll|scrollBy|scrollIntoView|\\n   scrollTo|seekToNextFrame|select|selectNode|selectNodeContents|set|setAttribute|\\n   setAttributeNode|setAttributeNodeNS|setAttributeNS|setCapture|\\n   setCustomValidity|setEnd|setEndAfter|setEndBefore|setItem|setNamedItem|\\n   setRangeText|setSelectionRange|setSinkId|setStart|setStartAfter|setStartBefore|\\n   slice|splitText|stepDown|stepUp|stopImmediatePropagation|stopPropagation|\\n   submit|substringData|supports|surroundContents|takeRecords|terminate|toBlob|\\n   toDataURL|toggle|toString|values|write|writeln\\n )\\n)(?=\\\\s*\\\\()","captures":{"1":{"name":"punctuation.accessor.tsx"},"2":{"name":"support.function.event-handler.tsx"},"3":{"name":"support.function.tsx"},"4":{"name":"support.function.dom.tsx"}}}]},"function-call":{"begin":"(?=(\\\\.\\\\s*)?([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(<([^<>]|\\\\<[^<>]+\\\\>)+>\\\\s*)?\\\\()","end":"(?<=\\\\))(?!(\\\\.\\\\s*)?([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(<([^<>]|\\\\<[^<>]+\\\\>)+>\\\\s*)?\\\\()","patterns":[{"include":"#support-objects"},{"name":"punctuation.accessor.tsx","match":"\\\\."},{"name":"entity.name.function.tsx","match":"([_$[:alpha:]][_$[:alnum:]]*)"},{"include":"#comment"},{"name":"meta.type.parameters.tsx","begin":"\\\\<","beginCaptures":{"0":{"name":"punctuation.definition.typeparameters.begin.tsx"}},"end":"\\\\>","endCaptures":{"0":{"name":"punctuation.definition.typeparameters.end.tsx"}},"patterns":[{"include":"#type"},{"include":"#punctuation-comma"}]},{"include":"#paren-expression"}]},"identifiers":{"patterns":[{"name":"support.class.tsx","match":"([_$[:alpha:]][_$[:alnum:]]*)(?=\\\\s*\\\\.\\\\s*prototype\\\\b(?!\\\\$))"},{"match":"(?x)(\\\\.)\\\\s*(?:\\n  ([[:upper:]][_$[:digit:][:upper:]]*) |\\n  ([_$[:alpha:]][_$[:alnum:]]*)\\n)(?=\\\\s*\\\\.\\\\s*[_$[:alpha:]][_$[:alnum:]]*)","captures":{"1":{"name":"punctuation.accessor.tsx"},"2":{"name":"constant.other.object.property.tsx"},"3":{"name":"variable.other.object.property.tsx"}}},{"match":"(?x)(?:(\\\\.)\\\\s*)?([_$[:alpha:]][_$[:alnum:]]*)(?=\\\\s*=\\\\s*( (async\\\\s+)|(function\\\\s*[(<])|(function\\\\s+)| ([_$[:alpha:]][_$[:alnum:]]*\\\\s*=>)| ((<([^<>]|\\\\<[^<>]+\\\\>)+>\\\\s*)?\\\\(([^()]|\\\\([^()]*\\\\))*\\\\)(\\\\s*:\\\\s*(.)*)?\\\\s*=>)))","captures":{"1":{"name":"punctuation.accessor.tsx"},"2":{"name":"entity.name.function.tsx"}}},{"match":"(\\\\.)\\\\s*([[:upper:]][_$[:digit:][:upper:]]*)(?![_$[:alnum:]])","captures":{"1":{"name":"punctuation.accessor.tsx"},"2":{"name":"constant.other.property.tsx"}}},{"match":"(\\\\.)\\\\s*([_$[:alpha:]][_$[:alnum:]]*)","captures":{"1":{"name":"punctuation.accessor.tsx"},"2":{"name":"variable.other.property.tsx"}}},{"match":"(?x)(?:\\n  ([[:upper:]][_$[:digit:][:upper:]]*) |\\n  ([_$[:alpha:]][_$[:alnum:]]*)\\n)(?=\\\\s*\\\\.\\\\s*[_$[:alpha:]][_$[:alnum:]]*)","captures":{"1":{"name":"constant.other.object.tsx"},"2":{"name":"variable.other.object.tsx"}}},{"name":"constant.other.tsx","match":"([[:upper:]][_$[:digit:][:upper:]]*)(?![_$[:alnum:]])"},{"name":"variable.other.readwrite.tsx","match":"[_$[:alpha:]][_$[:alnum:]]*"}]},"cast":{"patterns":[{"include":"#jsx"}]},"new-expr":{"name":"new.expr.tsx","begin":"(?<!\\\\.|\\\\$)\\\\b(new)\\\\b(?!\\\\$)","beginCaptures":{"1":{"name":"keyword.operator.new.tsx"}},"end":"(?<=\\\\))|(?=[;),]|$|((?<!\\\\.|\\\\$)\\\\bnew\\\\b(?!\\\\$)))","patterns":[{"include":"#paren-expression"},{"include":"#class-or-interface-declaration"},{"include":"#type"}]},"object-member":{"patterns":[{"include":"#comment"},{"include":"#method-declaration"},{"name":"meta.object.member.tsx","begin":"(?=(?:(?:\\\\\'[^\']*\\\\\')|(?:\\\\\\"[^\\"]*\\\\\\")|(?:\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\]))\\\\s*:)","end":"(?=,|\\\\})","patterns":[{"name":"meta.object-literal.key.tsx","begin":"(?=(?:(?:\\\\\'[^\']*\\\\\')|(?:\\\\\\"[^\\"]*\\\\\\")|(?:\\\\[([^\\\\[\\\\]]|\\\\[[^\\\\[\\\\]]+\\\\])+\\\\]))\\\\s*:)","end":":","endCaptures":{"0":{"name":"punctuation.separator.key-value.tsx"}},"patterns":[{"include":"#string"},{"include":"#array-literal"}]},{"include":"#expression"}]},{"name":"meta.object.member.tsx","begin":"(?x)(?:([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(:)(?=\\\\s*( (async\\\\s+)|(function\\\\s*[(<])|(function\\\\s+)| ([_$[:alpha:]][_$[:alnum:]]*\\\\s*=>)| ((<([^<>]|\\\\<[^<>]+\\\\>)+>\\\\s*)?\\\\(([^()]|\\\\([^()]*\\\\))*\\\\)(\\\\s*:\\\\s*(.)*)?\\\\s*=>))))","beginCaptures":{"0":{"name":"meta.object-literal.key.tsx"},"1":{"name":"entity.name.function.tsx"},"2":{"name":"punctuation.separator.key-value.tsx"}},"end":"(?=,|\\\\})","patterns":[{"include":"#expression"}]},{"name":"meta.object.member.tsx","begin":"(?:[_$[:alpha:]][_$[:alnum:]]*)\\\\s*(:)","beginCaptures":{"0":{"name":"meta.object-literal.key.tsx"},"1":{"name":"punctuation.separator.key-value.tsx"}},"end":"(?=,|\\\\})","patterns":[{"include":"#expression"}]},{"name":"meta.object.member.tsx","begin":"\\\\.\\\\.\\\\.","beginCaptures":{"0":{"name":"keyword.operator.spread.tsx"}},"end":"(?=,|\\\\})","patterns":[{"include":"#expression"}]},{"name":"meta.object.member.tsx","match":"([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(?=,|\\\\}|$)","captures":{"1":{"name":"variable.other.readwrite.tsx"}}},{"include":"#punctuation-comma"}]},"expression-operators":{"patterns":[{"name":"keyword.control.flow.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(await)\\\\b(?!\\\\$)"},{"name":"keyword.operator.expression.delete.tsx","match":"(?<!\\\\.|\\\\$)\\\\bdelete\\\\b(?!\\\\$)"},{"name":"keyword.operator.expression.in.tsx","match":"(?<!\\\\.|\\\\$)\\\\bin\\\\b(?!\\\\$)"},{"name":"keyword.operator.expression.of.tsx","match":"(?<!\\\\.|\\\\$)\\\\bof\\\\b(?!\\\\$)"},{"name":"keyword.operator.expression.instanceof.tsx","match":"(?<!\\\\.|\\\\$)\\\\binstanceof\\\\b(?!\\\\$)"},{"name":"keyword.operator.new.tsx","match":"(?<!\\\\.|\\\\$)\\\\bnew\\\\b(?!\\\\$)"},{"include":"#typeof-operator"},{"name":"keyword.operator.expression.void.tsx","match":"(?<!\\\\.|\\\\$)\\\\bvoid\\\\b(?!\\\\$)"},{"begin":"(?<!\\\\.|\\\\$)\\\\bas\\\\b(?!\\\\$)","beginCaptures":{"0":{"name":"keyword.control.as.tsx"}},"end":"(?=$|[;,:})\\\\]])","patterns":[{"include":"#type"}]},{"name":"keyword.operator.spread.tsx","match":"\\\\.\\\\.\\\\."},{"name":"keyword.operator.assignment.compound.tsx","match":"\\\\*=|(?<!\\\\()/=|%=|\\\\+=|\\\\-="},{"name":"keyword.operator.assignment.compound.bitwise.tsx","match":"\\\\&=|\\\\^=|<<=|>>=|>>>=|\\\\|="},{"name":"keyword.operator.bitwise.shift.tsx","match":"<<|>>>|>>"},{"name":"keyword.operator.comparison.tsx","match":"===|!==|==|!="},{"name":"keyword.operator.relational.tsx","match":"<=|>=|<>|<|>"},{"name":"keyword.operator.logical.tsx","match":"\\\\!|&&|\\\\|\\\\|"},{"name":"keyword.operator.bitwise.tsx","match":"\\\\&|~|\\\\^|\\\\|"},{"name":"keyword.operator.assignment.tsx","match":"\\\\="},{"name":"keyword.operator.decrement.tsx","match":"--"},{"name":"keyword.operator.increment.tsx","match":"\\\\+\\\\+"},{"name":"keyword.operator.arithmetic.tsx","match":"%|\\\\*|/|-|\\\\+"},{"match":"(?<=[_$[:alnum:]])\\\\s*(/)(?![/*])","captures":{"1":{"name":"keyword.operator.arithmetic.tsx"}}}]},"typeof-operator":{"name":"keyword.operator.expression.typeof.tsx","match":"(?<!\\\\.|\\\\$)\\\\btypeof\\\\b(?!\\\\$)"},"arrow-function":{"patterns":[{"name":"meta.arrow.tsx","match":"(?<!\\\\.|\\\\$)(\\\\basync)(?=\\\\s*[<(])","captures":{"1":{"name":"storage.modifier.async.tsx"}}},{"name":"meta.arrow.tsx","match":"(?:(?<!\\\\.|\\\\$)(\\\\basync)\\\\s*)?([_$[:alpha:]][_$[:alnum:]]*)\\\\s*(?==>)","captures":{"1":{"name":"storage.modifier.async.tsx"},"2":{"name":"variable.parameter.tsx"}}},{"name":"meta.arrow.tsx","begin":"(?x)\\\\s*(?=(<([^<>]|\\\\<[^<>]+\\\\>)+>\\\\s*)?\\\\(([^()]|\\\\([^()]*\\\\))*\\\\)(\\\\s*:\\\\s*(.)*)?\\\\s*=>)","end":"(?==>)","patterns":[{"include":"#comment"},{"include":"#type-parameters"},{"include":"#function-parameters"},{"include":"#arrow-return-type"}]},{"name":"meta.arrow.tsx","begin":"=>","beginCaptures":{"0":{"name":"storage.type.function.arrow.tsx"}},"end":"(?<=\\\\})|((?!\\\\{)(?=\\\\S))","patterns":[{"include":"#decl-block"},{"include":"#expression"}]}]},"arrow-return-type":{"name":"meta.return.type.arrow.tsx","begin":"(?<=\\\\))\\\\s*(:)","beginCaptures":{"1":{"name":"keyword.operator.type.annotation.tsx"}},"end":"(?<!:)((?=$)|(?==>|;|//))","patterns":[{"include":"#type-predicate-operator"},{"include":"#type"}]},"punctuation-comma":{"name":"punctuation.separator.comma.tsx","match":","},"punctuation-semicolon":{"name":"punctuation.terminator.statement.tsx","match":";"},"punctuation-accessor":{"name":"punctuation.accessor.tsx","match":"\\\\."},"paren-expression":{"begin":"\\\\(","beginCaptures":{"0":{"name":"meta.brace.round.tsx"}},"end":"\\\\)","endCaptures":{"0":{"name":"meta.brace.round.tsx"}},"patterns":[{"include":"#expression"},{"include":"#punctuation-comma"}]},"qstring-double":{"name":"string.quoted.double.tsx","begin":"\\"","beginCaptures":{"0":{"name":"punctuation.definition.string.begin.tsx"}},"end":"(\\")|((?:[^\\\\\\\\\\\\n])$)","endCaptures":{"1":{"name":"punctuation.definition.string.end.tsx"},"2":{"name":"invalid.illegal.newline.tsx"}},"patterns":[{"include":"#string-character-escape"}]},"qstring-single":{"name":"string.quoted.single.tsx","begin":"\'","beginCaptures":{"0":{"name":"punctuation.definition.string.begin.tsx"}},"end":"(\\\\\')|((?:[^\\\\\\\\\\\\n])$)","endCaptures":{"1":{"name":"punctuation.definition.string.end.tsx"},"2":{"name":"invalid.illegal.newline.tsx"}},"patterns":[{"include":"#string-character-escape"}]},"regex":{"patterns":[{"name":"string.regex.tsx","begin":"(?<=[=(:,\\\\[?+!]|return|case|=>|&&|\\\\|\\\\||\\\\*\\\\/)\\\\s*(/)(?![/*])(?=(?:[^/\\\\\\\\\\\\[]|\\\\\\\\.|\\\\[([^\\\\]\\\\\\\\]|\\\\\\\\.)+\\\\])+/(?![/*])[gimy]*(?!\\\\s*[a-zA-Z0-9_$]))","beginCaptures":{"1":{"name":"punctuation.definition.string.begin.tsx"}},"end":"(/)([gimuy]*)","endCaptures":{"1":{"name":"punctuation.definition.string.end.tsx"},"2":{"name":"keyword.other.tsx"}},"patterns":[{"include":"#regexp"}]},{"name":"string.regex.tsx","begin":"/(?![/*])(?=(?:[^/\\\\\\\\\\\\[]|\\\\\\\\.|\\\\[([^\\\\]\\\\\\\\]|\\\\\\\\.)+\\\\])+/(?![/*])[gimy]*(?!\\\\s*[a-zA-Z0-9_$]))","beginCaptures":{"0":{"name":"punctuation.definition.string.begin.tsx"}},"end":"(/)([gimuy]*)","endCaptures":{"1":{"name":"punctuation.definition.string.end.tsx"},"2":{"name":"keyword.other.tsx"}},"patterns":[{"include":"#regexp"}]}]},"regexp":{"patterns":[{"name":"keyword.control.anchor.regexp","match":"\\\\\\\\[bB]|\\\\^|\\\\$"},{"name":"keyword.other.back-reference.regexp","match":"\\\\\\\\[1-9]\\\\d*"},{"name":"keyword.operator.quantifier.regexp","match":"[?+*]|\\\\{(\\\\d+,\\\\d+|\\\\d+,|,\\\\d+|\\\\d+)\\\\}\\\\??"},{"name":"keyword.operator.or.regexp","match":"\\\\|"},{"name":"meta.group.assertion.regexp","begin":"(\\\\()((\\\\?=)|(\\\\?!))","beginCaptures":{"1":{"name":"punctuation.definition.group.regexp"},"2":{"name":"punctuation.definition.group.assertion.regexp"},"3":{"name":"meta.assertion.look-ahead.regexp"},"4":{"name":"meta.assertion.negative-look-ahead.regexp"}},"end":"(\\\\))","endCaptures":{"1":{"name":"punctuation.definition.group.regexp"}},"patterns":[{"include":"#regexp"}]},{"name":"meta.group.regexp","begin":"\\\\((\\\\?:)?","beginCaptures":{"0":{"name":"punctuation.definition.group.regexp"},"1":{"name":"punctuation.definition.group.capture.regexp"}},"end":"\\\\)","endCaptures":{"0":{"name":"punctuation.definition.group.regexp"}},"patterns":[{"include":"#regexp"}]},{"name":"constant.other.character-class.set.regexp","begin":"(\\\\[)(\\\\^)?","beginCaptures":{"1":{"name":"punctuation.definition.character-class.regexp"},"2":{"name":"keyword.operator.negation.regexp"}},"end":"(\\\\])","endCaptures":{"1":{"name":"punctuation.definition.character-class.regexp"}},"patterns":[{"name":"constant.other.character-class.range.regexp","match":"(?:.|(\\\\\\\\(?:[0-7]{3}|x\\\\h\\\\h|u\\\\h\\\\h\\\\h\\\\h))|(\\\\\\\\c[A-Z])|(\\\\\\\\.))\\\\-(?:[^\\\\]\\\\\\\\]|(\\\\\\\\(?:[0-7]{3}|x\\\\h\\\\h|u\\\\h\\\\h\\\\h\\\\h))|(\\\\\\\\c[A-Z])|(\\\\\\\\.))","captures":{"1":{"name":"constant.character.numeric.regexp"},"2":{"name":"constant.character.control.regexp"},"3":{"name":"constant.character.escape.backslash.regexp"},"4":{"name":"constant.character.numeric.regexp"},"5":{"name":"constant.character.control.regexp"},"6":{"name":"constant.character.escape.backslash.regexp"}}},{"include":"#regex-character-class"}]},{"include":"#regex-character-class"}]},"regex-character-class":{"patterns":[{"name":"constant.other.character-class.regexp","match":"\\\\\\\\[wWsSdDtrnvf]|\\\\."},{"name":"constant.character.numeric.regexp","match":"\\\\\\\\([0-7]{3}|x\\\\h\\\\h|u\\\\h\\\\h\\\\h\\\\h)"},{"name":"constant.character.control.regexp","match":"\\\\\\\\c[A-Z]"},{"name":"constant.character.escape.backslash.regexp","match":"\\\\\\\\."}]},"string":{"patterns":[{"include":"#qstring-single"},{"include":"#qstring-double"}]},"template":{"name":"string.template.tsx","begin":"([_$[:alpha:]][_$[:alnum:]]*)?(`)","beginCaptures":{"1":{"name":"entity.name.function.tagged-template.tsx"},"2":{"name":"punctuation.definition.string.template.begin.tsx"}},"end":"`","endCaptures":{"0":{"name":"punctuation.definition.string.template.end.tsx"}},"patterns":[{"include":"#template-substitution-element"},{"include":"#string-character-escape"}]},"string-character-escape":{"name":"constant.character.escape.tsx","match":"\\\\\\\\(x\\\\h{2}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.|$)"},"template-substitution-element":{"name":"meta.template.expression.tsx","begin":"\\\\$\\\\{","beginCaptures":{"0":{"name":"punctuation.definition.template-expression.begin.tsx"}},"end":"\\\\}","endCaptures":{"0":{"name":"punctuation.definition.template-expression.end.tsx"}},"patterns":[{"include":"#expression"}]},"literal":{"name":"literal.tsx","patterns":[{"include":"#numeric-literal"},{"include":"#boolean-literal"},{"include":"#null-literal"},{"include":"#undefined-literal"},{"include":"#numericConstant-literal"},{"include":"#array-literal"},{"include":"#this-literal"},{"include":"#super-literal"}]},"array-literal":{"name":"meta.array.literal.tsx","begin":"\\\\[","beginCaptures":{"0":{"name":"meta.brace.square.tsx"}},"end":"\\\\]","endCaptures":{"0":{"name":"meta.brace.square.tsx"}},"patterns":[{"include":"#expression"},{"include":"#punctuation-comma"}]},"numeric-literal":{"patterns":[{"name":"constant.numeric.hex.tsx","match":"\\\\b(?<!\\\\$)0(x|X)[0-9a-fA-F]+\\\\b(?!\\\\$)"},{"name":"constant.numeric.binary.tsx","match":"\\\\b(?<!\\\\$)0(b|B)[01]+\\\\b(?!\\\\$)"},{"name":"constant.numeric.octal.tsx","match":"\\\\b(?<!\\\\$)0(o|O)?[0-7]+\\\\b(?!\\\\$)"},{"match":"(?x)\\n(?<!\\\\$)(?:\\n  (?:\\\\b[0-9]+(\\\\.)[0-9]+[eE][+-]?[0-9]+\\\\b)| # 1.1E+3\\n  (?:\\\\b[0-9]+(\\\\.)[eE][+-]?[0-9]+\\\\b)|       # 1.E+3\\n  (?:\\\\B(\\\\.)[0-9]+[eE][+-]?[0-9]+\\\\b)|       # .1E+3\\n  (?:\\\\b[0-9]+[eE][+-]?[0-9]+\\\\b)|            # 1E+3\\n  (?:\\\\b[0-9]+(\\\\.)[0-9]+\\\\b)|                # 1.1\\n  (?:\\\\b[0-9]+(\\\\.)\\\\B)|                      # 1.\\n  (?:\\\\B(\\\\.)[0-9]+\\\\b)|                      # .1\\n  (?:\\\\b[0-9]+\\\\b(?!\\\\.))                     # 1\\n)(?!\\\\$)","captures":{"0":{"name":"constant.numeric.decimal.tsx"},"1":{"name":"meta.delimiter.decimal.period.tsx"},"2":{"name":"meta.delimiter.decimal.period.tsx"},"3":{"name":"meta.delimiter.decimal.period.tsx"},"4":{"name":"meta.delimiter.decimal.period.tsx"},"5":{"name":"meta.delimiter.decimal.period.tsx"},"6":{"name":"meta.delimiter.decimal.period.tsx"}}}]},"boolean-literal":{"patterns":[{"name":"constant.language.boolean.true.tsx","match":"(?<!\\\\.|\\\\$)\\\\btrue\\\\b(?!\\\\$)"},{"name":"constant.language.boolean.false.tsx","match":"(?<!\\\\.|\\\\$)\\\\bfalse\\\\b(?!\\\\$)"}]},"null-literal":{"name":"constant.language.null.tsx","match":"(?<!\\\\.|\\\\$)\\\\bnull\\\\b(?!\\\\$)"},"this-literal":{"name":"variable.language.this.tsx","match":"(?<!\\\\.|\\\\$)\\\\bthis\\\\b(?!\\\\$)"},"super-literal":{"name":"variable.language.super.tsx","match":"(?<!\\\\.|\\\\$)\\\\bsuper\\\\b(?!\\\\$)"},"undefined-literal":{"name":"constant.language.undefined.tsx","match":"(?<!\\\\.|\\\\$)\\\\bundefined\\\\b(?!\\\\$)"},"numericConstant-literal":{"patterns":[{"name":"constant.language.nan.tsx","match":"(?<!\\\\.|\\\\$)\\\\bNaN\\\\b(?!\\\\$)"},{"name":"constant.language.infinity.tsx","match":"(?<!\\\\.|\\\\$)\\\\bInfinity\\\\b(?!\\\\$)"}]},"access-modifier":{"name":"storage.modifier.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(abstract|public|protected|private|readonly|static)\\\\b(?!\\\\$)"},"property-accessor":{"name":"storage.type.property.tsx","match":"(?<!\\\\.|\\\\$)\\\\b(get|set)\\\\b(?!\\\\$)"},"comment":{"patterns":[{"name":"comment.block.documentation.tsx","begin":"/\\\\*\\\\*(?!/)","beginCaptures":{"0":{"name":"punctuation.definition.comment.tsx"}},"end":"\\\\*/","endCaptures":{"0":{"name":"punctuation.definition.comment.tsx"}},"patterns":[{"include":"#docblock"}]},{"name":"comment.block.tsx","begin":"/\\\\*","beginCaptures":{"0":{"name":"punctuation.definition.comment.tsx"}},"end":"\\\\*/","endCaptures":{"0":{"name":"punctuation.definition.comment.tsx"}}},{"begin":"(^[ \\\\t]+)?(?=//)","beginCaptures":{"1":{"name":"punctuation.whitespace.comment.leading.tsx"}},"end":"(?=$)","patterns":[{"name":"comment.line.double-slash.tsx","begin":"//","beginCaptures":{"0":{"name":"punctuation.definition.comment.tsx"}},"end":"(?=$)"}]}]},"directives":{"name":"comment.line.triple-slash.directive.tsx","begin":"^(///)\\\\s*(?=<(reference|amd-dependency|amd-module)(\\\\s+(path|types|no-default-lib|name)\\\\s*=\\\\s*((\\\\\'[^\']*\\\\\')|(\\\\\\"[^\\"]*\\\\\\")))+\\\\s*/>\\\\s*$)","beginCaptures":{"1":{"name":"punctuation.definition.comment.tsx"}},"end":"(?=$)","patterns":[{"name":"meta.tag.tsx","begin":"(<)(reference|amd-dependency|amd-module)","beginCaptures":{"1":{"name":"punctuation.definition.tag.directive.tsx"},"2":{"name":"entity.name.tag.directive.tsx"}},"end":"/>","endCaptures":{"0":{"name":"punctuation.definition.tag.directive.tsx"}},"patterns":[{"name":"entity.other.attribute-name.directive.tsx","match":"path|types|no-default-lib|name"},{"name":"keyword.operator.assignment.tsx","match":"="},{"include":"#string"}]}]},"docblock":{"patterns":[{"name":"storage.type.class.jsdoc","match":"(?<!\\\\w)@(abstract|access|alias|arg|argument|async|attribute|augments|author|beta|borrows|bubbes|callback|chainable|class|classdesc|code|config|const|constant|constructor|constructs|copyright|default|defaultvalue|define|deprecated|desc|description|dict|emits|enum|event|example|exports?|extends|extension|extension_for|extensionfor|external|file|fileoverview|final|fires|for|function|global|host|ignore|implements|inherit[Dd]oc|inner|instance|interface|kind|lends|license|listens|main|member|memberof|method|mixex|mixins?|module|name|namespace|nocollapse|nosideeffects|override|overview|package|param|preserve|private|prop|property|protected|public|read[Oo]nly|record|require[ds]|returns?|see|since|static|struct|submodule|summary|template|this|throws|todo|tutorial|type|typedef|unrestricted|uses|var|variation|version|virtual|writeOnce)\\\\b"},{"match":"(?x)\\n(?:(?<=@param)|(?<=@arg)|(?<=@argument)|(?<=@type))\\n\\\\s+\\n({(?:\\n  \\\\* |                                        # {*} any type\\n  \\\\? |                                        # {?} unknown type\\n  (?:                                         # Check for a prefix\\n    \\\\? |                                      # {?string} nullable type\\n    !   |                                     # {!string} non-nullable type\\n    \\\\.{3}                                     # {...string} variable number of parameters\\n  )?\\n  (?:\\n    \\\\(                                        # Opening bracket of multiple types with parenthesis {(string|number)}\\n      [a-zA-Z_$]+\\n      (?:\\n        (?:\\n          [\\\\w$]*\\n          (?:\\\\[\\\\])?                           # {(string[]|number)} type application, an array of strings or a number\\n        ) |\\n        \\\\.?<[\\\\w$]+(?:,\\\\s+[\\\\w$]+)*>            # {Array<string>} or {Object<string, number>} type application (optional .)\\n      )\\n      (?:\\n        [\\\\.|~]                                # {Foo.bar} namespaced, {string|number} multiple, {Foo~bar} class-specific callback\\n        [a-zA-Z_$]+\\n        (?:\\n          (?:\\n            [\\\\w$]*\\n            (?:\\\\[\\\\])?                        # {(string|number[])} type application, a string or an array of numbers\\n          ) |\\n          \\\\.?<[\\\\w$]+(?:,\\\\s+[\\\\w$]+)*>         # {Array<string>} or {Object<string, number>} type application (optional .)\\n        )\\n      )*\\n    \\\\) |\\n    [a-zA-Z_$]+\\n    (?:\\n      (?:\\n        [\\\\w$]*\\n        (?:\\\\[\\\\])?                            # {string[]|number} type application, an array of strings or a number\\n      ) |\\n      \\\\.?<[\\\\w$]+(?:,\\\\s+[\\\\w$]+)*>             # {Array<string>} or {Object<string, number>} type application (optional .)\\n    )\\n    (?:\\n      [\\\\.|~]                                 # {Foo.bar} namespaced, {string|number} multiple, {Foo~bar} class-specific callback\\n      [a-zA-Z_$]+\\n      (?:\\n        [\\\\w$]* |\\n        \\\\.?<[\\\\w$]+(?:,\\\\s+[\\\\w$]+)*>           # {Array<string>} or {Object<string, number>} type application (optional .)\\n      )\\n    )*\\n  )\\n                                             # Check for suffix\\n  (?:\\\\[\\\\])?                                  # {string[]} type application, an array of strings\\n  =?                                         # {string=} optional parameter\\n)})\\n\\\\s+\\n(\\n  \\\\[                                         # [foo] optional parameter\\n    \\\\s*\\n    (?:\\n      [a-zA-Z_$][\\\\w$]*\\n      (?:\\n        (?:\\\\[\\\\])?                            # Foo[].bar properties within an array\\n        \\\\.                                   # Foo.Bar namespaced parameter\\n        [a-zA-Z_$][\\\\w$]*\\n      )*\\n      (?:\\n        \\\\s*\\n        =                                    # [foo=bar] Default parameter value\\n        \\\\s*\\n        [\\\\w$\\\\s]*\\n      )?\\n    )\\n    \\\\s*\\n  \\\\] |\\n  (?:\\n    [a-zA-Z_$][\\\\w$]*\\n    (?:\\n      (?:\\\\[\\\\])?                              # Foo[].bar properties within an array\\n      \\\\.                                     # Foo.Bar namespaced parameter\\n      [a-zA-Z_$][\\\\w$]*\\n    )*\\n  )?\\n)\\n\\\\s+\\n(?:-\\\\s+)?                                    # optional hyphen before the description\\n((?:(?!\\\\*\\\\/).)*)                             # The type description","captures":{"0":{"name":"other.meta.jsdoc"},"1":{"name":"entity.name.type.instance.jsdoc"},"2":{"name":"variable.other.jsdoc"},"3":{"name":"other.description.jsdoc"}}},{"match":"(?x)\\n({(?:\\n  \\\\* |                                       # {*} any type\\n  \\\\? |                                       # {?} unknown type\\n\\n  (?:                                        # Check for a prefix\\n    \\\\? |                                     # {?string} nullable type\\n    !   |                                    # {!string} non-nullable type\\n    \\\\.{3}                                    # {...string} variable number of parameters\\n  )?\\n\\n  (?:\\n    \\\\(                                       # Opening bracket of multiple types with parenthesis {(string|number)}\\n      [a-zA-Z_$]+\\n      (?:\\n        [\\\\w$]* |\\n        \\\\.?<[\\\\w$]+(?:,\\\\s+[\\\\w$]+)*>           # {Array<string>} or {Object<string, number>} type application (optional .)\\n      )\\n      (?:\\n        [\\\\.|~]                               # {Foo.bar} namespaced, {string|number} multiple, {Foo~bar} class-specific callback\\n        [a-zA-Z_$]+\\n        (?:\\n          [\\\\w$]* |\\n          \\\\.?<[\\\\w$]+(?:,\\\\s+[\\\\w$]+)*>         # {Array<string>} or {Object<string, number>} type application (optional .)\\n        )\\n      )*\\n    \\\\) |\\n    [a-zA-Z_$]+\\n    (?:\\n      [\\\\w$]* |\\n      \\\\.?<[\\\\w$]+(?:,\\\\s+[\\\\w$]+)*>             # {Array<string>} or {Object<string, number>} type application (optional .)\\n    )\\n    (?:\\n      [\\\\.|~]                                 # {Foo.bar} namespaced, {string|number} multiple, {Foo~bar} class-specific callback\\n      [a-zA-Z_$]+\\n      (?:\\n        [\\\\w$]* |\\n        \\\\.?<[\\\\w$]+(?:,\\\\s+[\\\\w$]+)*>           # {Array<string>} or {Object<string, number>} type application (optional .)\\n      )\\n    )*\\n  )\\n                                             # Check for suffix\\n  (?:\\\\[\\\\])?                                  # {string[]} type application, an array of strings\\n  =?                                         # {string=} optional parameter\\n)})\\n\\\\s+\\n(?:-\\\\s+)?                                    # optional hyphen before the description\\n((?:(?!\\\\*\\\\/).)*)                             # The type description","captures":{"0":{"name":"other.meta.jsdoc"},"1":{"name":"entity.name.type.instance.jsdoc"},"2":{"name":"other.description.jsdoc"}}}]},"jsx-tag-attributes":{"patterns":[{"include":"#jsx-tag-attribute-name"},{"include":"#jsx-tag-attribute-assignment"},{"include":"#jsx-string-double-quoted"},{"include":"#jsx-string-single-quoted"},{"include":"#jsx-evaluated-code"}]},"jsx-tag-attribute-name":{"match":"(?x)\\n  \\\\s*\\n  ([_$a-zA-Z][-$\\\\w]*)\\n  (?=\\\\s|=|/?>|/\\\\*|//)","captures":{"1":{"name":"entity.other.attribute-name.tsx"}}},"jsx-tag-attribute-assignment":{"name":"keyword.operator.assignment.tsx","match":"=(?=\\\\s*(?:\'|\\"|{|/\\\\*|//|\\\\n))"},"jsx-string-double-quoted":{"name":"string.quoted.double.tsx","begin":"\\"","end":"\\"","beginCaptures":{"0":{"name":"punctuation.definition.string.begin.tsx"}},"endCaptures":{"0":{"name":"punctuation.definition.string.end.tsx"}},"patterns":[{"include":"#jsx-entities"}]},"jsx-string-single-quoted":{"name":"string.quoted.single.tsx","begin":"\'","end":"\'","beginCaptures":{"0":{"name":"punctuation.definition.string.begin.tsx"}},"endCaptures":{"0":{"name":"punctuation.definition.string.end.tsx"}},"patterns":[{"include":"#jsx-entities"}]},"jsx-entities":{"patterns":[{"name":"constant.character.entity.tsx","match":"(&)([a-zA-Z0-9]+|#[0-9]+|#x[0-9a-fA-F]+)(;)","captures":{"1":{"name":"punctuation.definition.entity.tsx"},"3":{"name":"punctuation.definition.entity.tsx"}}},{"name":"invalid.illegal.bad-ampersand.tsx","match":"&"}]},"jsx-evaluated-code":{"name":"meta.embedded.expression.tsx","begin":"{","end":"}","beginCaptures":{"0":{"name":"punctuation.section.embedded.begin.tsx"}},"endCaptures":{"0":{"name":"punctuation.section.embedded.end.tsx"}},"patterns":[{"include":"#expression"}]},"jsx-tag-attributes-illegal":{"name":"invalid.illegal.attribute.tsx","match":"\\\\S+"},"jsx-tag-without-attributes":{"name":"meta.tag.without-attributes.tsx","begin":"(<)\\\\s*([_$a-zA-Z][-$\\\\w.]*(?<!\\\\.|-))\\\\s*(>)","end":"(</)\\\\s*([_$a-zA-Z][-$\\\\w.]*(?<!\\\\.|-))\\\\s*(>)","beginCaptures":{"1":{"name":"punctuation.definition.tag.begin.tsx"},"2":{"name":"entity.name.tag.tsx"},"3":{"name":"punctuation.definition.tag.end.tsx"}},"endCaptures":{"1":{"name":"punctuation.definition.tag.begin.tsx"},"2":{"name":"entity.name.tag.tsx"},"3":{"name":"punctuation.definition.tag.end.tsx"}},"contentName":"meta.jsx.children.tsx","patterns":[{"include":"#jsx-children"}]},"jsx-tag-in-expression":{"begin":"(?x)\\n  (?<=[({\\\\[,?=>]|&&|\\\\|\\\\||\\\\?|\\\\Wreturn|^return|\\\\Wdefault|^)\\\\s*\\n  (?!(<)\\\\s*([_$a-zA-Z][-$\\\\w.]*(?<!\\\\.|-))\\\\s*(>)) #look ahead is not start of tag without attributes\\n  (?!<\\\\s*[_$[:alpha:]][_$[:alnum:]]*((\\\\s+extends\\\\s+[^=>])|,)) # look ahead is not type parameter of arrow\\n  (?=(<)\\\\s*\\n  ([_$a-zA-Z][-$\\\\w.]*(?<!\\\\.|-))\\n  (?=\\\\s+(?!\\\\?)|/?>))","end":"(/>)|(?:(</)\\\\s*([_$a-zA-Z][-$\\\\w.]*(?<!\\\\.|-))\\\\s*(>))","endCaptures":{"0":{"name":"meta.tag.tsx"},"1":{"name":"punctuation.definition.tag.end.tsx"},"2":{"name":"punctuation.definition.tag.begin.tsx"},"3":{"name":"entity.name.tag.tsx"},"4":{"name":"punctuation.definition.tag.end.tsx"}},"patterns":[{"include":"#jsx-tag"}]},"jsx-child-tag":{"begin":"(?x)\\n  (?=(<)\\\\s*\\n  ([_$a-zA-Z][-$\\\\w.]*(?<!\\\\.|-))\\n  (?=\\\\s+(?!\\\\?)|/?>))","end":"(/>)|(?:(</)\\\\s*([_$a-zA-Z][-$\\\\w.]*(?<!\\\\.|-))\\\\s*(>))","endCaptures":{"0":{"name":"meta.tag.tsx"},"1":{"name":"punctuation.definition.tag.end.tsx"},"2":{"name":"punctuation.definition.tag.begin.tsx"},"3":{"name":"entity.name.tag.tsx"},"4":{"name":"punctuation.definition.tag.end.tsx"}},"patterns":[{"include":"#jsx-tag"}]},"jsx-tag":{"name":"meta.tag.tsx","begin":"(?x)\\n  (?=(<)\\\\s*\\n  ([_$a-zA-Z][-$\\\\w.]*(?<!\\\\.|-))\\n  (?=\\\\s+(?!\\\\?)|/?>))","end":"(?=(/>)|(?:(</)\\\\s*([_$a-zA-Z][-$\\\\w.]*(?<!\\\\.|-))\\\\s*(>)))","patterns":[{"begin":"(?x)\\n  (<)\\\\s*\\n  ([_$a-zA-Z][-$\\\\w.]*(?<!\\\\.|-))\\n  (?=\\\\s+(?!\\\\?)|/?>)","beginCaptures":{"1":{"name":"punctuation.definition.tag.begin.tsx"},"2":{"name":"entity.name.tag.tsx"}},"end":"(?=[/]?>)","patterns":[{"include":"#comment"},{"include":"#jsx-tag-attributes"},{"include":"#jsx-tag-attributes-illegal"}]},{"begin":"(>)","beginCaptures":{"1":{"name":"punctuation.definition.tag.end.tsx"}},"end":"(?=</)","contentName":"meta.jsx.children.tsx","patterns":[{"include":"#jsx-children"}]}]},"jsx-tag-invalid":{"name":"invalid.illegal.tag.incomplete.tsx","match":"<\\\\s*>"},"jsx-children":{"patterns":[{"include":"#jsx-tag-without-attributes"},{"include":"#jsx-child-tag"},{"include":"#jsx-tag-invalid"},{"include":"#jsx-evaluated-code"},{"include":"#jsx-entities"}]},"jsx":{"patterns":[{"include":"#jsx-tag-without-attributes"},{"include":"#jsx-tag-in-expression"},{"include":"#jsx-tag-invalid"}]}},"version":"https://github.com/Microsoft/TypeScript-TmLanguage/commit/4d0bdebb93aadc25ecbb903ebc897e9cd5fab69c"}');var tF=new WeakMap;let tO=class TokenizerState{get ruleStack(){return(0,ev._)(this,tF)}clone(){return new TokenizerState((0,ev._)(this,tF))}equals(e){return!!e&&e instanceof TokenizerState&&e===this&&(0,ev._)(e,tF)===(0,ev._)(this,tF)}constructor(e){(0,ew._)(this,tF,{writable:!0,value:void 0}),(0,e_._)(this,tF,e)}};var tB=n(49080),tU=n(21017),tW=n(53053),tV=n(5164),tG=n(60708);let tz=!1;function tH(e,t,n,a){let[i,r]=(0,o.useState)(t);return{preference:i,updatePreference:(0,o.useCallback)(async t=>{if(a){let a=new FormData;a.set(e,n(t)),(0,f.DI)("/repos/preferences",{method:"PUT",body:a,headers:{Accept:"application/json"}})}r(t)},[e,n,a])}}var tq=n(53627);let tK="initial_path";var tY=n(17074);let tX="Editor-module__hideProblems--foNRt",tZ="Editor-module__editorFileContainer--wLYnN",tJ="Editor-module__hideEditorFile--RHUu4";var tQ=n(30093),t0=n(79431),t1=n(62802),t2=n(44048);function t3({viewControls:e,actions:t,settings:n,onSaveFileName:a,onTerminalClick:i,initialPath:r,path:s,pathError:c,onPathChange:d,filenameInputRef:u,moreOptionsButtonRef:m,fileTreeShown:p,toggleFileTree:h,fileDescription:f,loading:b}){let{isNewFilePage:x}=(0,ty.B)(),{codespaceData:v}=(0,t2.M)(),[w,_]=(0,o.useState)(r),[S,C]=(0,o.useState)(!1),[k,E]=(0,o.useState)(!1),j=RegExp(`^${r}/?$`).test(w),N=w&&!j,A=!!v.codespaceInfo,I=(0,tD.c)(tD.U.EDITOR);return(0,o.useEffect)(()=>{S&&A&&(i(),C(!1))},[A,i,S]),(0,o.useEffect)(()=>{x&&u?.current?.focus()},[]),(0,l.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between gap-3 px-2 color-border-muted bgColor-default EditorHeader-module__container--H9M0L",children:[(0,l.jsxs)("div",{className:(0,y.$)("d-flex flex-row flex-items-center overflow-hidden","EditorHeader-module__leftContent--YSfCv"),children:[(0,l.jsx)("div",{className:"EditorHeader-module__treeToggleContainer--HNRg0",children:(0,l.jsx)(D.K,{"aria-label":p?"Collapse file tree":"Expand file tree",className:(0,y.$)({"EditorHeader-module__treeToggleButton--Fi8Z2":p}),icon:p?g.SidebarCollapseIcon:g.FileDirectoryIcon,onClick:()=>h(),variant:"invisible"})}),x||k?(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2",children:[(0,l.jsx)("h1",{className:"sr-only",children:x?"Creating a new file in the editor":"Renaming file in the editor"}),(0,l.jsx)(tQ.A,{ref:u,placeholder:"Name your file...",value:w,onChange:e=>{d?.(),_(e.target.value)}}),(0,l.jsx)(G.Q,{"aria-disabled":!N,inactive:!N,onClick:()=>N&&a?.(w),variant:"primary",children:"Save"}),!x&&(0,l.jsx)(G.Q,{onClick:()=>{E?.(!1),d?.(),_(s),m?.current?.focus()},children:"Cancel"})]}),c&&(0,l.jsx)(t0.v,{className:"mt-2",variant:"critical",children:"Filename conflicts with an existing file or directory"})]}):(0,l.jsxs)("div",{className:"ml-2 d-flex flex-items-center gap-1",children:[(0,l.jsx)("h1",{className:"EditorHeader-module__fileHeading--gSq40",children:(0,t1.m)(s)}),!!f&&(0,l.jsx)("span",{className:"EditorHeader-module__fileDescription--UCJLh",children:f}),I&&(0,l.jsx)(z.A,{variant:"secondary",children:"Read-only"}),b&&(0,l.jsx)(eB.A,{size:"small"})]})]}),(0,l.jsxs)("div",{className:(0,y.$)("d-flex gap-2 mr-2 flex-items-center","EditorHeader-module__rightContent--pLUgA"),children:[e,t,n]})]})}try{t3.displayName||(t3.displayName="EditorHeader")}catch{}var t5=n(94236);let t4=(0,o.memo)(function({onCopyFileContents:e,codeLineWrapEnabled:t,whitespaceHidden:n,problemsHidden:a,setCodeLineWrapEnabled:i,setWhitespaceHidden:r,setProblemsHidden:s}){let{minimapEnabled:c,setMinimapEnabled:d}=(0,tI.zW)(),[u,m]=(0,o.useState)(!1),p=(0,o.useCallback)(()=>{i(!t)},[t,i]),h=(0,o.useCallback)(()=>{r(!n)},[r,n]),f=(0,o.useCallback)(()=>{s(!a)},[a,s]),y=(0,o.useCallback)(()=>{e?.(),m(!0),setTimeout(()=>{m(!1)},1e3)},[e]),b=(0,o.useCallback)(()=>{d(!c)},[c,d]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(D.K,{icon:u?g.CheckIcon:g.CopyIcon,onClick:y,"aria-label":"Copy file contents",variant:"invisible",className:u?"fgColor-success":"fgColor-muted"}),(0,l.jsxs)(t5.W,{children:[(0,l.jsx)(t5.W.Anchor,{children:(0,l.jsx)(D.K,{"aria-label":"Display options",icon:g.GearIcon,variant:"invisible"})}),(0,l.jsx)(t5.W.Overlay,{width:"small",children:(0,l.jsx)(eU.l,{children:(0,l.jsxs)(eU.l.Group,{selectionVariant:"multiple",children:[(0,l.jsx)(eU.l.GroupHeading,{children:"Display options"}),(0,l.jsx)(eU.l.Item,{role:"menuitemcheckbox",selected:t,"aria-checked":t,onSelect:p,children:"Wrap lines"}),(0,l.jsx)(eU.l.Item,{role:"menuitemcheckbox",selected:n,"aria-checked":n,onSelect:h,children:"Hide whitespace"}),(0,l.jsx)(eU.l.Item,{role:"menuitemcheckbox",selected:a,"aria-checked":a,onSelect:f,children:"Hide problems"}),(0,l.jsx)(eU.l.Item,{role:"menuitemcheckbox",selected:c,"aria-checked":c,onSelect:b,children:"Show minimap"})]})})})]})]})});try{t4.displayName||(t4.displayName="EditorHeaderSettings")}catch{}var t6=n(42038),t7=n(75564),t9=n(3433),t8=n(60569),ne=n(84098),nt=n(40090),nn=n(53190),na=n.n(nn),ni=n(58917),nr=n(41339),ns=n(47620);let no="SimpleFileTree-module__square--utIUx";function nl({rowCount:e=3}){let t=Array.from({length:e},(e,t)=>t+1);return(0,l.jsx)("ul",{className:"SimpleFileTree-module__container--YrqIX","aria-label":"Loading file tree",children:t.map(e=>(0,l.jsxs)("li",{className:"SimpleFileTree-module__line--kcCZ_",children:[(0,l.jsx)(ne.N,{square:!0,size:16,className:no}),(0,l.jsx)(ne.N,{square:!0,size:16,className:no}),(0,l.jsx)(nt.r,{lines:1})]},e))})}function nc(e){let{base:t,items:n,workbenchId:a}=e,i=na()(Object.entries(n),([e,t])=>null!==t?"dirs":"files"),r=(i.dirs||[]).sort(([e,t],[n,a])=>e.localeCompare(n)).map(([e,n])=>(0,l.jsx)(nu,{base:t,path:e,items:n,workbenchId:a},t+e)),s=(i.files||[]).sort(([e,t],[n,a])=>e.localeCompare(n)).map(([e,n])=>(0,l.jsx)(nd,{base:t,path:e,workbenchId:a},t+e));return(0,l.jsxs)(l.Fragment,{children:[r,s]})}function nd(e){let{base:t,path:n,workbenchId:a}=e,i=(0,t9.zy)(),r=(0,ns.e)(),{sparkFileUrl:s}=(0,nr._C)(),o=`${t}/${n}`,c=s({sparkId:a,path:o.replace(/^\//,"")}),d=i.pathname===c;return(0,l.jsxs)(t8.G.Item,{id:o,current:d,onSelect:()=>{r(o.replace(/^\//,""))},children:[(0,l.jsx)(t8.G.LeadingVisual,{children:(0,l.jsx)(g.FileIcon,{})}),n]},o)}function nu(e){let{base:t,path:n,items:a,workbenchId:i}=e,r=`${t}/${n}`;return(0,l.jsxs)(t8.G.Item,{id:r,defaultExpanded:!0,children:[(0,l.jsx)(t8.G.LeadingVisual,{children:(0,l.jsx)(t8.G.DirectoryIcon,{})}),n,(0,l.jsx)(t8.G.SubTree,{children:(0,l.jsx)(nc,{base:r,items:a,workbenchId:i})})]},r)}function nm({workbenchId:e}){let{getFileList:t}=(0,ni.AU)(),n=t(),a=(0,o.useMemo)(()=>{let e=n.map(e=>e.path).map(e=>e.split("/")),t={};for(let n of e)!function e(t,n){if(0===n.length)return;let a=n.shift();if(0===n.length)t[a]=null;else{let i=t[a]||{};e(i,n),t[a]=i}}(t,n);return t},[n]);return 0===n.length?(0,l.jsx)(nl,{}):(0,l.jsx)(t8.G,{"aria-label":"File tree",children:(0,l.jsx)(nc,{base:"",items:a,workbenchId:e})})}try{nl.displayName||(nl.displayName="FileTreeLoadingSkeleton")}catch{}try{nc.displayName||(nc.displayName="SubTree")}catch{}try{nd.displayName||(nd.displayName="FileTreeViewItem")}catch{}try{nu.displayName||(nu.displayName="DirectoryTreeViewItem")}catch{}try{nm.displayName||(nm.displayName="SimpleFileTree")}catch{}let np=(0,tg.Y)(async()=>({default:(await Promise.all([n.e(90254),n.e(50286)]).then(n.bind(n,50286))).MonacoEditor})),nh=(0,tg.Y)(async()=>({default:(await Promise.resolve().then(n.bind(n,5164))).DiffEditor})),nf=new Map;function ng({children:e}){return(0,l.jsx)("div",{className:"d-flex flex-justify-center m-3 fgColor-muted height-full",children:e})}function ny({copilotAccessAllowed:e,copilotCurrentTopic:t,...n}){let{beforeMount:a}=(0,tb.i)(!0),{markdownDocsUrl:i,monacoWorkerUrls:r}=(0,u.X)();!function(e){if(tz||!e){e||tL.Ay.error("Monaco worker URLs are not provided, cannot configure Monaco.");return}tz=!0,self.MonacoEnvironment={getWorker(t,n){let a=function(e,t){switch(e){case"json":return t.json;case"css":return t.css;case"html":return t.html;case"typescript":case"javascript":return t.ts;default:return t.editor}}(n,e);return new Worker(`${a}?module=true`,{type:"module"})}},tV.loader.config({monaco:tG})}(r);let{blobContents:s,large:c,isBinary:d,editorSettings:m,isNewFilePage:f,workbench:b}=(0,ty.B)(),{selectedElement:x}=(0,tA.kH)(),{ORIGINAL_CONTENTS_URI_PREFIX:v,editorMode:w,editorPath:_,enableLanguageFeatures:S,getLanguage:C,hasInitializedModelValue:k,originalFileContent:E,registerMonaco:j,setHasInitializedModelValue:N,setWatchingPath:A,watchingPath:I,setDiffComputed:T,diffComputed:M}=(0,tE.m)(),{resolvedColorScheme:L}=(0,tC.DP)(),{isAgentBusy:P}=(0,p.dt)(),{data:$,isLoading:F,isError:O}=(0,R.I)({queryKey:["onigurumaWasmModule"],queryFn:tP,staleTime:1/0,retry:!1}),{contentStateStamp:B,fileSyncerStarted:U,getFileSyncerV2:W,notifyEdited:V,syncerMode:G,fileContentsRef:z,forceContentRefresh:H,setFileContentsRef:q}=(0,tj.d)(),{currentRefinementId:K}=(0,tN.P9)(),{toggleFileTree:Y,fileTreeShown:X,minimapEnabled:Z}=(0,tI.zW)(),J=(0,tD.c)(tD.U.EDITOR),{fetchFromCodespaceApi:Q}=(0,tT.l)(),[ee,et]=(0,o.useState)(!1),[en,ea]=(0,o.useState)(null),[ei,er]=(0,o.useState)(void 0),[es,eo]=(0,o.useState)(null),[el,ec]=(0,o.useState)(!1),[ed,eu]=(0,o.useState)(!1),[em,ep]=(0,o.useState)(!1),eh=(0,o.useRef)(null),ef=(0,o.useRef)(null),eg=(0,o.useRef)(null),ey=(0,o.useRef)(null),eb=(0,o.useRef)(null),ex=(0,o.useRef)(null),ev=(0,o.useRef)(null),ew=(0,o.useRef)(0),e_=(0,o.useRef)(!1),eS=(0,o.useRef)(null),eC=(0,o.useRef)(null),ek=(0,o.useRef)(null),eE=(0,t_.g)(s??""),ej=[".md",".mkdn",".mkd",".mdown",".markdown"].some(e=>_.endsWith(e)),{type:eN}=(0,tW.tR)(_),eA=(0,t_.g)(_),eI=(0,o.useRef)(!1),eT=(0,o.useRef)(null),eR=L&&L.includes("dark")?"github-dark":"github-light",eM=(0,o.useCallback)(e=>{a(e),e.editor.defineTheme("github-light",{base:"vs",inherit:!0,rules:[],colors:{"editorLineNumber.foreground":"#1f2328","editorLineNumber.activeForeground":"#1f2328"}}),e.editor.defineTheme("github-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editorLineNumber.foreground":"#e6edf3","editorLineNumber.activeForeground":"#e6edf3"}})},[a]),eL=(0,o.useCallback)(e=>e?"true":"false",[]),[eP]=(0,h.o)(),eD=eP.get(tK)||_||"";(0,tS.w)(()=>{let e=(eg.current&&eg.current.offsetWidth<480)??!1;e!==em&&ep(e)},eg,[]);let e$=(0,o.useCallback)((e,t,n)=>{let a=e.getModel();a&&S(a,t,n)},[S]),eF=(0,o.useCallback)(()=>{et(!1)},[]);(0,o.useLayoutEffect)(()=>{ea(document.body.offsetWidth||0)},[]),(0,o.useEffect)(()=>{let e=ek.current;e&&e.toggleAttribute("inert",!X)},[X]),(0,o.useEffect)(()=>{function e(e){(window.innerWidth>0?window.innerWidth:screen.width)<=768&&ek.current&&!ek.current.contains(e.target)&&X&&Y(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[X,Y]),(0,tS.w)(()=>{let e=document.body.offsetWidth;null!==en&&e<en&&em&&X&&Y(!1),ea(e)},eg);let{preference:eO,updatePreference:eB}=tH("code_line_wrap_enabled",m.codeLineWrapEnabled,eL,!0),{preference:eU,updatePreference:eW}=tH("workbench_whitespace_hidden",m.whitespaceHidden,eL),{preference:eV,updatePreference:eG}=tH("workbench_problems_hidden",m.problemsHidden,eL),ez=(0,o.useMemo)(()=>({ariaLabel:`Content Editor. ${tv.G}`,minimap:{enabled:Z},readOnly:J||"blobStorage"===G||!!P||!U,fixedOverflowWidgets:!0,padding:{top:8},wordWrap:eO?"on":"off","semanticHighlighting.enabled":!1,stickyScroll:{enabled:!1},isStaleContent:el,shouldDiffChanges:ed}),[eO,U,P,el,ed,G,J,Z]),eH=(0,o.useMemo)(()=>({...ez,ariaLabel:`Diff Editor. ${tv.G}`,modifiedAriaLabel:"Modified Content Editor",originalAriaLabel:"Original Content Editor",readOnly:!0,renderGutterMenu:!1,renderSideBySide:!1,useInlineViewWhenSpaceIsLimited:!1}),[ez]),eq=(0,o.useMemo)(()=>{let e=C(_);return O&&"typescriptreact"===e?"typescript":e},[_,C,O]);(0,o.useEffect)(()=>()=>{eS.current&&((0,tU.Pb)(eS.current),eS.current=null)},[_]);let eK=(0,o.useCallback)((e,t)=>{eC.current={lastSeenLength:t,newLength:t,path:e}},[]),eY=(0,o.useCallback)(e=>{eC.current&&(eC.current.newLength=e)},[]),eX=(0,o.useCallback)(async e=>{let t=W();if(!t)return null;let n=null;if((0,tU.Rg)(e))try{let t=await (0,tU.mQ)(e,Q);if(t){let a=(0,tU.f7)(e);n="audio"===a||"video"===a||"document"===a?URL.createObjectURL(t):await new Promise((e,n)=>{let a=new FileReader;a.onload=()=>e(a.result),a.onerror=n,a.readAsDataURL(t)})}}catch{n=await (0,tW.j1)(e,t)}else n=await (0,tW.j1)(e,t);return n&&n.startsWith("blob:")&&(eS.current&&(0,tU.Pb)(eS.current),eS.current=n),n},[W,Q]),eZ=(0,o.useCallback)(async()=>{let e=z.current?.[_],t=e?.updatedContent||e?.content||"";if(eu(!1),P&&I===_&&!e_.current&&"image"!==eN&&"video"!==eN&&"audio"!==eN&&"pdf"!==eN)er(t),eK(_,t.length),e_.current=!0,ec(!0),A(null),H();else{("image"===eN||"video"===eN||"audio"===eN||"pdf"===eN)&&e&&q({...z.current,[_]:{...e,content:void 0,updatedContent:void 0}});let t=await eX(_);null!==t?(er(t),eK(_,t.length),_.startsWith("src/assets/")&&N(!0)):(er(void 0),eK(_,null)),e_.current&&(eu(!0),t&&e&&q({...z.current,[_]:{...e,updatedContent:t}})),e_.current=!1,ec(!1)}},[_,eX,z,H,P,eN,q,N,A,eK,I]);(0,o.useEffect)(()=>{null!==ev.current&&ev.current!==_&&er(void 0),ev.current=_},[_]),(0,o.useEffect)(()=>{U&&!eI.current&&(es!==_||ex.current!==B)&&(async()=>{try{await eZ()}catch{}finally{eo(_),ex.current=B}})()},[eZ,B,_,U,es]);let eJ=(0,o.useMemo)(()=>{var e;let t;return e=async(e,t,n)=>{let a=W();!a||n.aborted||(await new Promise(e=>{setTimeout(()=>{e(!0)},t??0)}),n.aborted||(await a.writeFileString(eA.current,e??""),V()))},t=null,async(...n)=>{t&&t.abort(),t=new AbortController;try{let a=await e(...n,t.signal);return t=null,a}catch(e){if(t=null,e instanceof Error&&"AbortError"!==e.name)throw e;throw Error("Request was canceled")}}},[eA,W,V]),eQ=(0,o.useMemo)(()=>(0,th.s)(async e=>{Date.now()-ew.current<5e3?await eJ(e,5001):await eJ(e,0)},500),[eJ]),e0=(0,tB.s)(),e1=(0,o.useCallback)(()=>{let e=eC.current?.lastSeenLength&&eC.current?.newLength?eC.current.newLength-eC.current.lastSeenLength:0;if(0===e)return;eC.current?.newLength&&(eC.current.lastSeenLength=eC.current.newLength);let t={change_size_chars:e,source:"Editor.tsx",iteration_id:K||null,iteration_step:"refine",iteration_method:"manual_code_edit",iteration_uuid:(0,tY.u)(),user_type:"human",file_path:eC.current?.path||"",file_length:eC.current?.newLength||0};e0("change_started",{...t}),e0("change_completed",{...t,time_to_iterate_ms:0,success:!0})},[K,e0]),e2=(0,tx.d)(e1,5e3),e3=(0,o.useCallback)(()=>{eT.current&&(clearTimeout(eT.current),eT.current=null)},[]),e5=(0,o.useCallback)(()=>{e3(),eT.current=window.setTimeout(()=>{eI.current=!1,eT.current=null},500)},[e3]),e4=(0,o.useCallback)(async e=>{P||(eI.current=!0,er(e),e5(),eQ(e??""),eY((e||"").length),e2())},[P,eQ,eY,e2,e5]);(0,o.useEffect)(()=>{eI.current=!1,e3()},[e3,_]),(0,o.useEffect)(()=>{P&&(eI.current=!1,e3())},[e3,P]),(0,o.useEffect)(()=>()=>e3(),[e3]);let e6=(0,o.useCallback)(e=>{eA.current&&e$(e,eA.current,eE.current)},[eE,eA,e$]),e7=(0,o.useCallback)((e,t,n)=>{let a=!1,i=[];for(let t of n){let n={source:"editor",messageRaw:t.message,messagePretty:t.message,path:t.resource?.path,line:t.startLineNumber,column:t.startColumn};t.severity>=e.MarkerSeverity.Error&&i.push({...n})}0!==i.length&&(a=!0),a?0===ew.current&&(ew.current=Date.now()):ew.current=0},[]),e9=(0,o.useCallback)(async(e,t)=>{if($){let n=new tk.Registry({onigLib:Promise.resolve($),loadGrammar:async e=>"source.tsx"===e?(0,tk.parseRawGrammar)(JSON.stringify(t$),"TypeScriptReact.tmLanguage.json"):null}),a=new Map;a.set("typescriptreact","source.tsx"),t.languages.register({id:"typescriptreact"}),await Promise.all(Array.from(a.keys()).map(async i=>{let r=a.get(i),s=r&&await n.loadGrammar(r);s&&t.languages.setTokensProvider(i,{getInitialState:()=>new tO(tk.INITIAL),tokenize:(t,n)=>{let a=s?.tokenizeLine(t,n.ruleStack);return{endState:new tO(a.ruleStack),tokens:a.tokens.map(t=>{let n=t.scopes[t.scopes.length-1];return{...t,scopes:e?((e,t)=>{let n="";if(t[0])for(let e=t[0].length-1;e>=0;e-=1){let a=t[0][e];if("."===a)break;n=a+n}for(let a=t.length-1;a>=0;a-=1){let i=t[a];if(i){for(let t=i.length-1;t>=0;t-=1)if("."===i[t]){let a=i.slice(0,t),r=e._standaloneThemeService,s=e._themeService||r;if(s&&s._theme._tokenTheme._match(`${a}.${n}`)._foreground>1)return`${a}.${n}`;if(s._theme._tokenTheme._match(a)._foreground>1)return a}}}return""})(e,t.scopes):n}})}}})}))}eh.current=e,j(t,e.addCommand(-1,(...e)=>{if(e.length>0&&e[0]){let t=e[1];if("completed"===t.event_type||"complete"===t.phase||!t.event_type){let e={user_type:"lsp suggestion",file_path:t.file_uri,language:t.language,change_size_chars:t.change_size_chars,type:t.type};e0("change_started",{...e}),e0("change_completed",{...e,time_to_iterate_ms:0,success:!0})}}})||""),e.onDidChangeModel(()=>{e6(e),e1();let t=e.getModel()?.uri.path?.replace(/^\//,"");if(t&&nf.get(t)){let n=e.getValue();eo(t),er(n),eK(t,n.length)}}),e6(e)},[e6,j,e0,e1,eK,$]),e8=(0,o.useCallback)(()=>{if(!ef.current)return;let e=ef.current.getModifiedEditor().getModel(),t=ef.current.getOriginalEditor().getModel();e&&t&&(t.setValue(E||""),ef.current.setModel({original:t,modified:e}),N(!0),ef.current.revealFirstDiff())},[E,N]),te=(0,o.useCallback)((e,t)=>{ef.current=e;let n=e.getModifiedEditor();e.onDidUpdateDiff(()=>{T(!0)}),n.onDidChangeModel(()=>{e8()}),e8(),e9(n,t)},[e9,T,e8]);(0,o.useEffect)(()=>{if(!eh.current||!x)return;let{start:e,end:t}=x.location??x.component.location;eh.current.setSelection({selectionStartColumn:e.column,selectionStartLineNumber:e.line,positionColumn:t.column,positionLineNumber:t.line}),eh.current.revealLineInCenter(e.line)},[x]);let tt=(0,l.jsx)(t3,{filenameInputRef:ey,moreOptionsButtonRef:eb,fileTreeShown:X,toggleFileTree:Y,settings:(0,l.jsx)(t4,{onCopyFileContents:(0,o.useCallback)(async()=>await (0,tf.D)(ei||""),[ei]),codeLineWrapEnabled:!!eO,whitespaceHidden:!!eU,problemsHidden:!!eV,setCodeLineWrapEnabled:eB,setWhitespaceHidden:eW,setProblemsHidden:eG}),initialPath:eD,path:_,pathError:ee,onPathChange:eF,fileDescription:"diff-editor"!==w||P?void 0:(0,l.jsxs)(l.Fragment,{children:["(previous)",(0,l.jsx)(g.ArrowBothIcon,{}),_]}),loading:"diff-editor"===w&&!M,...n},`header-${_}`);if(f)return tt;let tn=es!==_,ta="codespace"===G&&!U||F,ti=_.startsWith("src/assets/"),tr=tn||!ti&&!k||"diff-editor"===w&&null===E,ts=ti&&tn;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"Editor-module__editorContainer--xa4Ah",ref:eg,children:[(0,l.jsxs)("div",{"aria-hidden":!X,className:(0,y.$)("Editor-module__files--li1kR",{"Editor-module__filesShown--W9p5v":X}),ref:ek,children:[(0,l.jsx)("div",{className:"d-flex d-md-none flex-justify-end flex-items-center p-2",children:(0,l.jsx)(D.K,{icon:g.XIcon,variant:"invisible","aria-label":"Hide file tree",onClick:()=>{Y(!1)}})}),(0,l.jsx)("div",{className:"flex-1 py-2 px-3 overflow-y-auto",children:(0,l.jsx)(nm,{workbenchId:b.id})})]}),(0,l.jsxs)("div",{className:(0,y.$)("Editor-module__editorFileFrame--SGWxD",{"Editor-module__fileTreeExpanded--oOxcC":X}),children:[tt,tr&&(0,l.jsx)(t6.d,{fadeIn:!0}),"diff-editor"===w&&null!==E?(0,l.jsx)("div",{className:(0,y.$)(tZ,tr&&tJ),children:ta?(0,l.jsx)(t6.d,{}):(0,l.jsx)(o.Suspense,{fallback:(0,l.jsx)(t6.d,{fadeIn:!0}),children:(0,l.jsx)(nh,{className:eV?tX:void 0,height:"100%",beforeMount:eM,language:eq,loading:(0,l.jsx)(t6.d,{}),theme:eR,onMount:te,options:eH,originalModelPath:`${v}-${_}`,modifiedModelPath:_,original:E,modified:ei})})}):(0,l.jsx)("div",{className:(0,y.$)(tZ,tr&&tJ),children:c?(0,l.jsx)(ng,{children:(0,l.jsx)("p",{children:"Sorry about that, but we cannot show files that are this big right now."})}):_.startsWith("src/assets/")?ei&&!ts?(0,l.jsx)(t7.Z,{src:ei,filePath:_,alt:"Asset Preview"}):(0,l.jsx)(t6.d,{fadeIn:!0}):d?(0,l.jsx)(ng,{children:"Binary file not shown."}):ta?(0,l.jsx)(t6.d,{}):(0,l.jsx)(o.Suspense,{fallback:(0,l.jsx)(t6.d,{fadeIn:!0}),children:(0,l.jsx)(np,{className:eV?tX:void 0,height:"100%",onChange:e4,path:_,beforeMount:eM,defaultLanguage:eq||"javascript",language:eq,loading:(0,l.jsx)(t6.d,{}),onMount:e9,onValidate:e7,options:ez,theme:eR,value:ei,viewStates:nf})})})]})]}),(0,l.jsx)(tv.U,{}),ej&&(0,l.jsx)(tw.x,{markdownDocsUrl:i})]})}try{np.displayName||(np.displayName="MonacoEditor")}catch{}try{nh.displayName||(nh.displayName="DiffEditor")}catch{}try{ng.displayName||(ng.displayName="PlainTextStatus")}catch{}try{ny.displayName||(ny.displayName="Editor")}catch{}var nb=n(88968),nx=n(57387),nv=n(86877);let nw=({ownerLogin:e,name:t,onCancel:n,onSubmit:a})=>{let{repositoryUrl:i}=(0,nr._C)(),[r,s]=(0,o.useState)("not-created"),[c,d]=(0,o.useState)(null),u=(0,o.useRef)(null),m=(0,o.useId)(),p="created"===r||!!i,h=async e=>{e.preventDefault(),s("creating"),d(null);try{await a(t,"private"),s("created")}catch(e){if(s("not-created"),e instanceof Error)d(e);else throw e}},f=()=>{n()},y=`${e}/${t}`;return(0,l.jsx)(nx.l,{title:p?"Repository created":"Create repository",onClose:f,width:"large",initialFocusRef:u,renderFooter:()=>(0,l.jsxs)(nx.l.Footer,{children:[(0,l.jsx)(G.Q,{disabled:"creating"===r,onClick:f,children:p?"Close":"Cancel"}),i?(0,l.jsx)(e4.z,{trailingVisual:g.LinkExternalIcon,as:"a",href:i,variant:"primary",target:"_blank",children:"Go to repository"}):(0,l.jsx)(G.Q,{type:"submit",variant:"primary",form:m,inactive:"creating"===r,loading:"creating"===r,children:"Create"})]}),children:(0,l.jsx)("form",{id:m,onSubmit:h,children:(0,l.jsxs)(nv.A,{children:[(0,l.jsx)(nv.A.Label,{visuallyHidden:!0,children:"Repository Information"}),p&&i?(0,l.jsxs)("span",{children:["Your spark's code is available in a private repository at: ",(0,l.jsx)(F.A,{href:i,inline:!0,target:"_blank",children:i})]}):p?(0,l.jsxs)("span",{children:["Repository ",(0,l.jsx)("span",{className:"text-bold",children:y})," has been created successfully."]}):(0,l.jsxs)("span",{children:["Your spark's code will be available in a private repository created as: ",(0,l.jsx)("span",{className:"text-bold",children:y})]}),c&&(0,l.jsx)(nv.A.Validation,{variant:"error",children:c.message})]})})})};try{nw.displayName||(nw.displayName="CreateRepositoryDialog")}catch{}var n_=n(85563),nS=n(51875),nC=n(39768),nk=n(60190),nE=n(56634),nj=n(4559),nN=n(98755),nA=n(31604),nI=n(53242),nT=n(77430),nR=n(5839);let nM=({buttonText:e,additionalButtonProps:t,selection:n,selectOrg:a,removeOrg:i,organizations:r,saving:s})=>{let[c,d]=(0,o.useState)(!1),[u,m]=(0,o.useState)(""),p=(0,o.useMemo)(()=>{let e=u.trim().toLowerCase();return e?r.filter(t=>t.name.toLowerCase().includes(e)):r},[r,u]),h=(0,o.useMemo)(()=>p.map(e=>({text:e.name,id:e.name,leadingVisual:()=>e.primaryAvatarUrl&&(0,l.jsx)(nT.r,{alt:e.name,src:e.primaryAvatarUrl}),onAction:()=>{n&&n.name===e.name?i(n):a(e)}})),[p,n,i,a]),f=(0,o.useMemo)(()=>e||(void 0===n?"Select organization":n.name),[e,n]),y=h.find(e=>{var t;return t=e.id,!!n&&n.name===t});return(0,l.jsx)(nR.X,{title:"Select organization",renderAnchor:({...e})=>(0,l.jsx)(G.Q,{loading:s,leadingVisual:n?()=>(0,l.jsx)(nT.r,{alt:n.name,src:n.primaryAvatarUrl}):void 0,trailingAction:g.TriangleDownIcon,...t,...e,"aria-haspopup":"dialog",children:f}),open:c,onOpenChange:()=>{d(!c)},onCancel:()=>{d(!1)},items:h,selected:y,onSelectedChange:()=>{},placeholderText:"Filter organizations",filterValue:u,onFilterChange:m,overlayProps:{width:"medium",maxHeight:"medium"}})};try{nM.displayName||(nM.displayName="PublishOrgSelector")}catch{}let nL={only_owner:{title:"Only you",description:"Private no matter what",icon:(0,l.jsx)(g.LockIcon,{})},selected_orgs:{title:"Organization",description:"All members of a selected organization",icon:(0,l.jsx)(g.OrganizationIcon,{})},github:{title:"All GitHub users",description:"Anyone with the link can see content and data contained in this spark. Be careful with sensitive information.",icon:(0,l.jsx)(g.IdBadgeIcon,{})}},nP={read_only:{title:"Read-Only",description:"Only you can edit data, other users will have view-only access",icon:(0,l.jsx)(g.EyeIcon,{})},write_access:{title:"Write Access",description:"Users can view and modify content",icon:(0,l.jsx)(g.PencilIcon,{})}},nD=e=>{switch(e){case"publishingFirstTime":case"republishing":return"Publishing";case"published":case"republishFailed":return"Published";default:return"Publish"}},n$=e=>{switch(e){case"publishingFirstTime":return(0,l.jsx)(eB.A,{size:"small"});case"published":case"republishing":case"republishFailed":return(0,l.jsxs)("span",{className:"PublishDropdown-module__dotContainer--mY08N",children:[(0,l.jsx)(g.DotFillIcon,{size:"small",className:"fgColor-success"}),(0,l.jsx)("span",{className:"PublishDropdown-module__pulsingDot--UaHYL"})]});default:return null}},nF=({className:e,variant:t="button",hidden:n})=>{let a=(0,nr._C)(),i=(0,o.useId)(),r=(0,o.useId)(),s=(0,o.useId)(),c=(0,o.useId)(),d=(0,o.useId)(),u=(0,o.useId)(),m=(0,o.useId)(),[p,h]=(0,o.useState)(!1),[f,y]=(0,o.useState)(null),[b,x]=(0,o.useState)(null),{publishingStatus:v,publishedUrl:w,startDeploymentPipeline:_,canCurrentlyPublish:S,isPublishUpToDate:C,visibility:k,visibilityOrganizationId:E,updateVisibility:j,updateDataAccess:N,readOnlyKv:A,cancelPublishing:I,organizationsPublishableTo:T,canPublishToAllGithub:R}=(0,nI.yO)(),[M,L]=(0,o.useState)(k),P=A?"read_only":"write_access",D=E?T.find(e=>e.id===E):void 0,[$,F]=(0,o.useState)(D);(0,o.useEffect)(()=>{R||"github"!==k?L(k):(L("only_owner"),j({setting:"only_owner",organizationId:null})),F(E?T.find(e=>e.id===E):void 0)},[k,E,T,R,j]);let O=(0,o.useCallback)(async e=>{L(e),"selected_orgs"!==e&&F(void 0),"selected_orgs"===e||(y("updating"),y(await j({setting:e,organizationId:null})?"updated":"error"),setTimeout(()=>{y(null)},2e3))},[j]),B=(0,o.useCallback)(async e=>{if("selected_orgs"===M){let t=T.find(t=>t.login===e);t&&(y("updating"),y(await j({setting:"selected_orgs",organizationId:t.id})?"updated":"error"),setTimeout(()=>{y(null)},2e3))}},[j,M,T]),U=(0,o.useCallback)(async e=>{x("updating"),x(await N("read_only"===e)?"updated":"error"),setTimeout(()=>{x(null)},2e3)},[N]),W=!C&&S,V="republishFailed"===v?{variant:"critical",text:"Publish failed"}:W?{variant:"warning",text:"Unpublished changes"}:{variant:"success",text:"All changes published"},z=(0,o.useRef)(V.text),H=(0,o.useRef)(V.variant);return((0,o.useEffect)(()=>{let e="success"===V.variant||"critical"===V.variant;if(p){z.current=V.text,H.current=V.variant;return}let t=z.current!==V.text||H.current!==V.variant;e&&t&&(0,nj.i)(V.text,"critical"===V.variant?{assertive:!0}:void 0),z.current=V.text,H.current=V.variant},[p,V.text,V.variant]),"menu"!==t&&("unpublished"===v||"publishingFirstTime"===v))?(0,l.jsx)(G.Q,{className:e,variant:"primary",disabled:!S,leadingVisual:n$(v),onClick:()=>"publishingFirstTime"===v?void 0:_(),children:nD(v)}):(0,l.jsx)(nA.T,{open:p,onOpen:()=>h(!0),onClose:()=>h(!1),renderAnchor:a=>"menu"===t?(0,l.jsxs)(eU.l.Item,{...a,className:e,role:"menuitem",disabled:!S,hidden:n,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:"unpublished"===v?(0,l.jsx)(g.RocketIcon,{}):!1===C?(0,l.jsx)(g.SyncIcon,{className:"fgColor-attention"}):n$(v)}),nD(v)]}):(0,l.jsx)(G.Q,{...a,className:e,variant:"default",disabled:!S&&"unpublished"===v,leadingVisual:!1===C?(0,l.jsx)(g.SyncIcon,{className:"fgColor-attention"}):n$(v),hidden:n,trailingVisual:g.TriangleDownIcon,children:C?"Published":"Publish"}),width:"large",preventOverflow:!1,focusZoneSettings:{disabled:!0},overlayProps:{role:"dialog","aria-modal":!0,"aria-label":"Spark Publish Settings"},children:(0,l.jsxs)("div",{className:"PublishDropdown-module__overlayWrapper--eYYdy",children:[(0,l.jsxs)("div",{className:"PublishDropdown-module__header--rlDcJ",children:[(0,l.jsx)("h2",{className:"f5",children:a.name}),(0,l.jsx)("div",{role:"status","aria-live":"polite","aria-atomic":"true",children:(0,l.jsx)(t0.v,{size:"small",variant:V.variant,children:V.text})})]}),(0,l.jsxs)("div",{className:"PublishDropdown-module__overlayContent--OzMnB",children:[w&&(0,l.jsxs)(nv.A,{children:[(0,l.jsx)(nv.A.Label,{children:"Published URL"}),(0,l.jsx)(tQ.A,{block:!0,value:w,readOnly:!0,onFocus:e=>e.target.select(),className:"PublishDropdown-module__publishedUrlContainer--HvKwk",trailingAction:(0,l.jsx)(nN.T,{textToCopy:w})})]}),(0,l.jsxs)(nv.A,{children:[(0,l.jsx)(nv.A.Label,{id:r,htmlFor:i,children:"Visibility"}),(0,l.jsxs)("div",{className:"PublishDropdown-module__visibilityContainer--SEAd9",children:[(0,l.jsxs)(t5.W,{children:[(0,l.jsx)(t5.W.Button,{id:i,loading:"selected_orgs"!==M&&"updating"===f,leadingVisual:nL[M]?.icon,"aria-labelledby":`${r} ${s}`,"aria-describedby":c,children:(0,l.jsx)("span",{id:s,children:nL[M]?.title})}),(0,l.jsx)(t5.W.Overlay,{width:"medium",children:(0,l.jsxs)(eU.l,{selectionVariant:"single",children:[(0,l.jsxs)(eU.l.Item,{onSelect:()=>O("only_owner"),selected:"only_owner"===M,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.LockIcon,{})}),"Only you",(0,l.jsx)(eU.l.Description,{variant:"block",children:"Private no matter what"})]}),(0,l.jsxs)(eU.l.Item,{onSelect:()=>O("selected_orgs"),selected:"selected_orgs"===M,disabled:0===T.length,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.OrganizationIcon,{})}),"Organization",(0,l.jsx)(eU.l.Description,{variant:"block",children:0===T.length?"Join at least one organization to share with its members":"All members of a selected organization"})]}),R&&(0,l.jsxs)(eU.l.Item,{onSelect:()=>O("github"),selected:"github"===M,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.IdBadgeIcon,{})}),"All GitHub users",(0,l.jsx)(eU.l.Description,{variant:"block",children:"Anyone with the link who is signed into github.com"})]})]})})]}),"selected_orgs"===M&&(0,l.jsx)(nM,{saving:"updating"===f,selection:$,buttonText:$?.name||"Select organization",organizations:T,selectOrg:e=>{let t=T.find(t=>t.name===e.name);t&&(F(t),B(e.name))},removeOrg:()=>F(void 0)})]}),(0,l.jsx)(nv.A.Caption,{id:c,children:nL[M].description})]}),"only_owner"!==M&&(0,l.jsxs)(nv.A,{children:[(0,l.jsx)(nv.A.Label,{id:u,htmlFor:d,children:"Data Access"}),(0,l.jsxs)(t5.W,{children:[(0,l.jsx)(t5.W.Button,{id:d,loading:"updating"===b,leadingVisual:nP[P]?.icon,"aria-labelledby":`${u} ${m}`,children:(0,l.jsx)("span",{id:m,children:nP[P]?.title})}),(0,l.jsx)(t5.W.Overlay,{width:"medium",children:(0,l.jsx)(eU.l,{selectionVariant:"single",children:Object.entries(nP).map(([e,t])=>(0,l.jsxs)(eU.l.Item,{onSelect:async()=>await U(e),selected:P===e,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:t.icon}),t.title,(0,l.jsx)(eU.l.Description,{variant:"block",children:t.description})]},e))})})]}),(0,l.jsx)(nv.A.Caption,{children:nP[P].description})]})]}),(0,l.jsxs)("div",{className:"PublishDropdown-module__overlayFooter--UCSUD",children:["republishing"===v?(0,l.jsx)(G.Q,{variant:"danger",onClick:I,children:"Cancel"}):(0,l.jsx)(G.Q,{block:!0,trailingVisual:g.ArrowUpRightIcon,variant:"default",as:"a",href:w,target:"_blank",inactive:!w,children:"Visit site"}),(0,l.jsx)(G.Q,{block:!0,variant:"primary",leadingVisual:"republishing"===v?(0,l.jsx)(eB.A,{size:"small"}):null,onClick:_,disabled:!1===W||"republishing"===v,children:"republishing"===v?"Publishing":"Publish"})]})]})})};try{nF.displayName||(nF.displayName="PublishDropdown")}catch{}var nO=n(69497);let nB=(0,o.memo)(()=>{let e=(0,nr._C)(),{data:t,isLoading:n}=(0,R.I)({queryKey:["sparks"],queryFn:async()=>{let e=await (0,f.lS)("/copilot/spark/workbench",{method:"GET"});if(!e.ok)throw Error("Failed to fetch");return(await e.json()).workbenches}}),a=(0,o.useMemo)(()=>t?[...t].filter(t=>t.id!==e.id).sort((e,t)=>e.updatedAt?t.updatedAt?new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime():-1:1).slice(0,5):[],[t,e]);return(0,l.jsxs)(t5.W,{children:[(0,l.jsx)(t5.W.Button,{size:"medium",variant:"invisible",className:"SparkSwitcher-module__switcher--YvpoJ",children:(0,l.jsx)(nO.A,{title:e.name,maxWidth:"234px",children:e.name})}),(0,l.jsx)(t5.W.Overlay,{maxHeight:"medium",width:"small",maxWidth:"medium",className:"SparkSwitcher-module__sparkSwitcherOverlay--sBrrB",children:(0,l.jsxs)(eU.l,{children:[(n||a.length>0)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eU.l.Group,{children:n?(0,l.jsxs)(eU.l.Item,{disabled:!0,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(eB.A,{size:"small"})}),"Grabbing recent sparks\u2026"]}):a.map(t=>(0,l.jsxs)(eU.l.LinkItem,{href:e.sparkBaseUrl(t),target:"_blank",className:"SparkSwitcher-module__sparkLink--YKrX9",children:[t.name,t.updatedAt&&(0,l.jsxs)(eU.l.Description,{variant:"block",children:["Updated ",(0,l.jsx)(eW.A,{date:new Date(t.updatedAt)})]}),(0,l.jsx)(eU.l.TrailingVisual,{children:(0,l.jsx)(g.ArrowUpRightIcon,{"aria-label":"Opens in a new tab"})})]},t.id))}),(0,l.jsx)(eU.l.Divider,{})]}),(0,l.jsx)(eU.l.Group,{children:(0,l.jsxs)(eU.l.LinkItem,{href:"/spark",target:"_blank",children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.SparkleFillIcon,{})}),"All sparks"]})})]})})]})});nB.displayName="SparkSwitcher";var nU=n(88315);let nW=(0,o.memo)(function({className:e}){let{repositoryUrl:t}=(0,nr._C)(),{isAgentBusy:n}=(0,p.dt)(),{setCreateRepositoryModelOpen:a}=(0,tI.zW)(),{codespaceData:i}=(0,t2.M)(),r=(0,tD.c)(tD.U.CREATE_REPOSITORY),s=i?.codespaceInfo?.environment_data?.friendlyName,c=i?.codespaceState==="ready"&&!!s&&!r,d=(0,o.useMemo)(()=>{let e=t?.split("/");if(e){let[,,,t,n]=e;return`${t}/${n}`}},[t]),u=(0,o.useMemo)(()=>n?nU.P$.ACTION_UNAVAILABLE_ITERATION:c?void 0:nU.P$.ACTION_UNAVAILABLE,[c,n]);return d?(0,l.jsxs)(eU.l.LinkItem,{href:t,target:"_blank",className:e,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.RepoIcon,{})}),(0,l.jsx)("span",{className:"text-normal",children:"Go to repository"}),(0,l.jsx)(eU.l.Description,{variant:"block",children:d})]}):(0,l.jsxs)(eU.l.Item,{className:e,onSelect:()=>{c&&a(!0)},inactiveText:u,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.RepoPushIcon,{})}),"Create repository"]})});try{nW.displayName||(nW.displayName="CreateRepository")}catch{}let nV="Header-module__targetedEditsButton--G7jTg",nG="Header-module__toggledButton--L43lc",nz=(0,o.memo)(function({className:e,variant:t}){let n=(0,tD.c)(tD.U.DEFAULT),{codespaceData:a}=(0,t2.M)(),i=(0,tB.s)(),r=a?.codespaceInfo?.environment_data?.friendlyName,s=a?.codespaceState==="ready"&&!!r&&!n,c=(0,o.useCallback)(()=>{r&&(i("codespace_open_click",{codespace_name:r}),window.open(`https://${r}.github.dev`,"_blank"))},[r,i]),d=(0,o.useMemo)(()=>{if(!s)return nU.P$.ACTION_UNAVAILABLE},[s]);return"menu"===t?(0,l.jsxs)(eU.l.Item,{"aria-label":"Open codespace",onSelect:c,className:e,inactiveText:d,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.CodespacesIcon,{})}),"Open codespace"]}):(0,l.jsx)(D.K,{"aria-label":"Open codespace",className:e,icon:g.CodespacesIcon,onClick:()=>{s&&c()},inactive:!s,description:d})});try{nz.displayName||(nz.displayName="OpenCodespace")}catch{}let nH=(0,o.memo)(function({className:e,variant:t}){let{isAgentBusy:n}=(0,p.dt)(),{refreshPreview:a,workingMode:i}=(0,tI.zW)(),{screenSize:r}=(0,m.lm)(),{codespaceData:s}=(0,t2.M)(),[c,d]=(0,o.useState)(!1),u=r>=m.Gy.large,h=s?.codespaceState!=="ready"||c,f=!h&&!n&&"code"!==i,b=()=>{f&&(d(!0),a(),setTimeout(()=>d(!1),400))},x=(0,o.useMemo)(()=>"code"===i?nU.P$.ACTION_UNAVAILABLE_MODE:n?nU.P$.ACTION_UNAVAILABLE_ITERATION:void 0,[i,n]);return"menu"===t?(0,l.jsxs)(eU.l.Item,{"aria-label":"Refresh preview",className:e,hidden:u,onSelect:b,loading:h,inactiveText:x,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.SyncIcon,{})}),"Refresh preview"]}):(0,l.jsx)(D.K,{icon:e=>(0,l.jsx)(g.SyncIcon,{...e,className:c?"Header-module__spin--bIl8j":""}),"aria-label":"Refresh preview",className:(0,y.$)("Header-module__refreshButton--uCeq1","hide-sm hide-md",e),onClick:()=>{f&&b()},inactive:!f,description:x||(h?nU.P$.ACTION_LOADING:void 0)})});try{nH.displayName||(nH.displayName="RefreshPreview")}catch{}let nq=(0,o.memo)(function({className:e,variant:t}){let{isAgentBusy:n}=(0,p.dt)(),{toggleSidePanel:a,workingMode:i}=(0,tI.zW)(),{toggleTargetedEdits:r,targetedEditsEnabled:s,selectButtonRef:c}=(0,tA.kH)(),d=(0,tD.c)(tD.U.TARGETED_EDITS),{screenSize:u}=(0,m.lm)(),{codespaceData:h}=(0,t2.M)(),f=u>=m.Gy.large,g=h?.codespaceState==="ready"&&!n&&!d&&"code"!==i,b=(0,o.useCallback)(()=>{s||a(!0),r()},[s,a,r]),x=(0,o.useMemo)(()=>"code"===i?nU.P$.ACTION_UNAVAILABLE_MODE:n?nU.P$.ACTION_UNAVAILABLE_ITERATION:g?void 0:nU.P$.ACTION_UNAVAILABLE,[i,n,g]);return"menu"===t?(0,l.jsxs)(eU.l.Item,{"aria-label":"Select element to edit",className:(0,y.$)(nV,e),hidden:f,onSelect:r,inactiveText:x,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(nE.dS,{})}),"Select an element"]}):(0,l.jsx)(D.K,{ref:c,icon:nE.dS,"aria-label":"Select element to edit",onClick:()=>{g&&b()},className:(0,y.$)(nV,{[nG]:s},"hide-sm hide-md",e),inactive:!g,description:x})});try{nq.displayName||(nq.displayName="SelectTargetEdit")}catch{}let nK=(0,o.memo)(function({className:e,variant:t}){let{isAgentBusy:n}=(0,p.dt)(),{workingMode:a,mobileViewActive:i,setMobileViewActive:r}=(0,tI.zW)(),{screenSize:s}=(0,m.lm)(),{codespaceData:c}=(0,t2.M)(),d=s<m.Gy.medium,u=s>=m.Gy.large,h=c?.codespaceState==="ready",f=h&&!n&&"code"!==a,b=(0,o.useMemo)(()=>"code"===a?nU.P$.ACTION_UNAVAILABLE_MODE:n?nU.P$.ACTION_UNAVAILABLE_ITERATION:void 0,[a,n]);return"menu"===t?(0,l.jsxs)(eU.l.Item,{"aria-label":i?"Exit mobile view":"Show mobile view",hidden:d||u,onSelect:()=>r(!i),className:e,loading:!h,inactiveText:b,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.DeviceMobileIcon,{className:i?"fgColor-accent":""})}),(0,l.jsx)("span",{children:i?"Exit mobile view":"Show mobile view"})]}):(0,l.jsx)(D.K,{icon:g.DeviceMobileIcon,"aria-label":i?"Exit mobile view":"Show mobile view",className:(0,y.$)({[nG]:i},"hide-sm hide-md",e),onClick:()=>{f&&r(!i)},inactive:!f,description:b||(h?void 0:nU.P$.ACTION_LOADING)})});try{nK.displayName||(nK.displayName="ToggleMobileView")}catch{}let nY=o.lazy(()=>n.e(64380).then(n.bind(n,64380))),nX=(0,tg.Y)(async()=>({default:(await n.e(76168).then(n.bind(n,76168))).SettingsPanel})),nZ="Working mode",nJ=({dialogLabelId:e,dialogDescriptionId:t,title:n,subtitle:a,onClose:i})=>{let r=(0,o.useCallback)(e=>{"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),i("close-button"))},[i]);return(0,l.jsx)(nx.l.Header,{children:(0,l.jsxs)(k.B,{direction:"horizontal",align:"center",justify:"space-between",gap:"condensed",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(nx.l.Title,{id:e,children:n??"Settings"}),a?(0,l.jsx)(nx.l.Subtitle,{id:t,children:a}):null]}),(0,l.jsx)(D.K,{icon:g.XIcon,"aria-label":"Close settings",variant:"invisible",onClick:()=>i("close-button"),onKeyDown:r})]})})},nQ=({headerRef:e})=>{var t;let n,[i,r]=(0,o.useState)(!1),[s,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),p=(0,o.useRef)(null),h=(0,o.useRef)(null),f=(0,o.useRef)(null),b=(0,o.useRef)(-1),x=(0,o.useRef)(!1),v=(0,o.useRef)(void 0),w=(0,o.useCallback)(e=>{x.current=!0},[]),_=(0,o.useCallback)((e,t=250)=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{x.current=!1,v.current=void 0},t)},[]),S=(0,o.useCallback)(e=>{v.current&&(clearTimeout(v.current),v.current=void 0),x.current&&(x.current=!1)},[]),C=(0,o.useCallback)(()=>{let e=h.current;e&&setTimeout(()=>{e.focus()},0)},[]),E=(0,o.useCallback)(()=>{r(e=>(e&&C(),!1))},[C]),{targetedEditsEnabled:j,disableTargetedEdits:A}=(0,tA.kH)(),{isMobileSidebarOpen:I,setIsMobileSidebarOpen:T}=(0,nr._C)(),{setWorkingMode:R,sidePanelOpen:M,toggleSidePanel:L,workingMode:P}=(0,tI.zW)(),{screenSize:$}=(0,m.lm)();(0,o.useEffect)(()=>(a=()=>{p.current?.focus()},()=>{a=void 0}),[]);let O=(0,o.useCallback)(e=>{R(["preview","code","split"][e])},[R]),B=$<m.Gy.medium,U=$<m.Gy.large,W=$>=m.Gy.large,V=U?I:M,G=(0,o.useCallback)(()=>{if(U){let e=!I;T(e),L(e);return}L()},[I,T,L,U]),H=(0,o.useCallback)(e=>{let t=0===e.detail;G(),t&&V&&a?.()},[V,G]),q=(0,o.useCallback)((e,t)=>{if(e||t?.force||!x.current){if(c(e),e){w("actions-menu-open"),_("actions-menu-open",500);return}b.current=-1,S("actions-menu-open")}},[S,w,_]),K=(0,o.useCallback)(e=>{q(e)},[q]),Y=(0,o.useCallback)(()=>{s||(w("actions-menu-trigger"),_("actions-menu-trigger",600))},[w,s,_]);t=()=>{!x.current&&s&&q(!1,{force:!0})},n=(0,o.useRef)(t),(0,o.useEffect)(()=>n.current=t,[t]),(0,o.useEffect)(()=>{let e=()=>{let e=document.getElementById(nk.$n);e&&document.activeElement===e&&n.current()};return window.addEventListener("blur",e),()=>{window.removeEventListener("blur",e)}},[]);let X=(0,o.useCallback)(e=>{i&&(e.preventDefault(),E())},[i,E]),Z=(0,o.useCallback)(e=>{if("Tab"!==e.key)return;w("actions-menu-tab-navigation"),e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation?.();let t=f.current;if(!t)return void S("actions-menu-tab-navigation:no-container");let n=Array.from(t.querySelectorAll('button:not([disabled]), [href], [role="menuitem"]')).filter(e=>null!==e.offsetParent&&"true"!==e.getAttribute("aria-hidden"));if(0===n.length)return void S("actions-menu-tab-navigation:no-focusable-elements");let a=document.activeElement,i=a?n.indexOf(a):-1;-1===i&&(i=b.current);let r=-1===i?e.shiftKey?n.length-1:0:(i+(e.shiftKey?-1:1)+n.length)%n.length;b.current=r,n[r]?.focus(),_("actions-menu-tab-navigation",300)},[S,w,_]);return(0,o.useEffect)(()=>()=>{v.current&&clearTimeout(v.current)},[]),(0,nS.P)(X,[X]),(0,o.useEffect)(()=>{"code"===P&&j&&A()},[P,j,A]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{ref:e,children:[(0,l.jsx)(n_.lZ,{}),(0,l.jsxs)("div",{className:"Header-module__header--Pzrvd",children:[(0,l.jsx)("div",{className:"Header-module__leftSection--sN8pQ",children:(0,l.jsxs)(k.B,{direction:"horizontal",gap:"condensed",align:"center",wrap:"nowrap",className:(0,y.$)("Header-module__leftSectionContainer--Mh4uA",{"Header-module__sidePanelOpen--tOUfq":M}),children:[(0,l.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,l.jsx)(F.A,{"aria-label":"Home",href:"/",children:(0,l.jsx)(g.MarkGithubIcon,{size:28,verticalAlign:"middle",className:"color-fg-default"})}),(0,l.jsx)("div",{className:"mx-1",children:(0,l.jsx)(nB,{})})]}),(0,l.jsx)("div",{className:"Header-module__sidePanelExpander--hN_6b",children:(0,l.jsx)(D.K,{icon:V?g.SidebarCollapseIcon:g.SidebarExpandIcon,"aria-label":V?"Collapse side panel":"Expand side panel","aria-pressed":V,onClick:H,ref:p,"data-workbench-side-panel-toggle":!0,className:"Header-module__expandSidebarButton--cH_hH"})})]})}),(0,l.jsx)("div",{className:"Header-module__centerSection--O9T2F",children:(0,l.jsxs)(nC.I,{"aria-label":nZ,onChange:O,className:"hide-sm fgColor-muted",children:[(0,l.jsx)(nC.I.IconButton,{selected:"preview"===P,icon:g.BrowserIcon,"aria-label":"Preview mode"}),(0,l.jsx)(nC.I.IconButton,{selected:"code"===P,icon:g.CodeIcon,"aria-label":"Code mode",className:"Header-module__codeButton--gaMOP"}),(0,l.jsx)(nC.I.IconButton,{selected:"split"===P,icon:(0,l.jsx)(nE.t5,{className:"octicon"}),"aria-label":"Why not both?",className:"hide-sm hide-md hide-lg"})]})}),(0,l.jsxs)(k.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",className:"Header-module__rightSection--k21SO",children:[(0,l.jsx)(nq,{variant:"icon"}),(0,l.jsx)(nH,{variant:"icon"}),(0,l.jsx)(nK,{variant:"icon"}),(0,l.jsxs)(t5.W,{anchorRef:h,open:s,onOpenChange:K,children:[(0,l.jsx)(t5.W.Anchor,{ref:h,children:(0,l.jsx)(D.K,{icon:g.KebabHorizontalIcon,"aria-label":"More actions",onMouseDown:Y,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&Y()}})}),(0,l.jsx)(t5.W.Overlay,{width:"small",children:(0,l.jsx)("div",{ref:f,onKeyDownCapture:Z,children:(0,l.jsxs)(eU.l,{children:[B?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eU.l.Group,{selectionVariant:"single",children:[(0,l.jsxs)(eU.l.Item,{"aria-label":"Preview mode",selected:"preview"===P,onSelect:()=>R("preview"),children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.BrowserIcon,{})}),"Preview mode"]}),(0,l.jsxs)(eU.l.Item,{"aria-label":"Code mode",selected:"code"===P,onSelect:()=>R("code"),children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.CodeIcon,{})}),"Code mode"]})]}),(0,l.jsx)(eU.l.Divider,{className:"hide-md hide-lg hide-xl"})]}):null,(0,l.jsx)(nq,{variant:"menu"}),(0,l.jsx)(nH,{variant:"menu"}),(0,l.jsx)(nK,{variant:"menu"}),(0,l.jsx)(t5.W.Divider,{className:"hide-lg hide-xl"}),(0,l.jsx)(nz,{variant:"menu"}),(0,l.jsx)(nW,{}),(0,l.jsxs)(eU.l.Item,{"aria-label":"Settings",onSelect:()=>r(!i),onMouseEnter:()=>nX.preload(),onFocus:()=>nX.preload(),children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.GearIcon,{})}),"Settings"]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eU.l.Divider,{}),(0,N.G7)("copilot_workbench_debug_panel")&&(0,l.jsxs)(eU.l.Item,{"aria-label":"Debug panel",onSelect:()=>{u(!0)},children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.BugIcon,{})}),"Debug panel",(0,l.jsx)(eU.l.TrailingVisual,{children:(0,l.jsx)(z.A,{variant:"attention",children:"Staff"})})]}),(0,l.jsxs)(eU.l.LinkItem,{"aria-label":"Feedback email",href:"mailto:spark-feedback@github.com",children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.MailIcon,{})}),"spark-feedback@github.com"]})]}),(0,l.jsx)(nF,{variant:"menu",hidden:W})]})})})]}),i&&(0,l.jsx)(nx.l,{title:"Settings",onClose:E,position:"right",returnFocusRef:h,renderHeader:nJ,children:(0,l.jsx)(o.Suspense,{children:(0,l.jsx)(nX,{})})}),d&&(0,l.jsx)(o.Suspense,{fallback:null,children:(0,l.jsx)(nY,{onClose:()=>u(!1)})}),(0,l.jsx)(nF,{className:"hide-sm hide-md"})]})]})]})})};try{nY.displayName||(nY.displayName="DebugDialog")}catch{}try{nX.displayName||(nX.displayName="SettingsPanel")}catch{}try{nJ.displayName||(nJ.displayName="SettingsDialogHeader")}catch{}try{nQ.displayName||(nQ.displayName="Header")}catch{}var n0=n(40073),n1=n(32535);let n2="unknown",n3="MainContent-module__fullWidth--OJDLh",n5="MainContent-module__visibleContainer--t34SF",n4="MainContent-module__halfWidth--w036D";var n6=n(35898),n7=n(58615),n9=n(20954);function n8(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,n)=>n8(e,t[n]));if("object"==typeof e&&"object"==typeof t){let n=Object.keys(e),a=Object.keys(t);return n.length===a.length&&n.every(n=>a.includes(n)&&n8(e[n],t[n]))}return!1}let ae="Fix all reported errors.",at="Fix all the following errors:",an=["/workspaces/workbench-template/","/workspaces/spark/","/workspaces/spark-template/"],aa=e=>{if(!e)return e;let t=e;for(let e of an)if(t.startsWith(e)){t=t.substring(e.length);break}t.startsWith("/")&&(t=t.substring(1));let n=t.indexOf("?");return -1!==n&&(t=t.substring(0,n)),t},ai=(e,t)=>{let n="";return e&&(n+=`:${e}`,t&&(n+=`:${t}`)),n};function ar(e,t){let n=t.trim(),a=n.match(/^([^(]+)\((\d+),(\d+)\):\s+(error|warning)\s+([^:]+):\s+(.+)$/);if(a){let t=aa(a[1]),i=parseInt(a[2]||"",10),r=parseInt(a[3]||"",10),s=a[4],o=a[5],l=a[6],c=`${s} ${o}: ${l}`,d=ai(i,r);return{source:e,messageRaw:n,messagePretty:c,path:t,line:i,column:r,location:d}}let i=/^(Uncaught\s+\S+:.*?)\s+at\s+/s;if(i.test(n)){let t=n.match(i)?.[1]?.trim(),a=n.match(/\(([^()]+\.\w+):(\d+):(\d+)\)/);if(a&&t){let i=aa(a[1]),r=parseInt(a[2]||"",10),s=parseInt(a[3]||"",10),o=ai(r,s);return{source:e,messageRaw:n,messagePretty:t,path:i,line:r,column:s,location:o}}}if(a=n.match(/^(.*?)\s+at\s+([^:]+):([^:]+):([^:]+)$/ms)){let t=a[1]?.trim(),i=aa(a[2]),r=a[3]??"undefined",s=a[4]??"undefined",o="undefined"!==r?parseInt(r,10):void 0,l="undefined"!==s?parseInt(s,10):void 0,c=ai(o,l);return{source:e,messageRaw:n,messagePretty:t?.replace(/\s*\(\d+:\d+\)/,""),path:i,line:o,column:l,location:c}}if(a=n.match(/^([^(]+)\s+\((\d+):(\d+)\)([\s\S]*?)at\s+([^:]+):(\d+):(\d+)/)){let t=a[1]?.trim(),i=a[4]?.trim(),r=`${t}
${i}`,s=aa(a[5]),o=parseInt(a[6]||"",10),l=parseInt(a[7]||"",10),c=ai(o,l);return{source:e,messageRaw:n,messagePretty:r,path:s,line:o,column:l,location:c}}return{source:e,messageRaw:n,messagePretty:n}}let as=e=>{let t=new Set;return e.filter(e=>!t.has(e.messageRaw)&&(t.add(e.messageRaw),!0))},ao=e=>"deploy"===e?"Deployment error":"preview-build"===e?"Build error":"preview-runtime"===e?"Runtime error":"editor"===e?"Syntax error":"Error";var al=n(96104),ac=n(82037),ad=n(68556);let au=(0,o.createContext)(void 0);function am({children:e}){let{previousRefinements:t,currentRefinementId:n}=(0,tN.P9)(),a=t?.find(e=>!e.id)??t?.find(e=>e.id===n),i=(0,tB.s)(),r=(0,o.useCallback)((e,t)=>{let n=Date.now();for(let r of t)i(e,{refinement_id:a?.id??null,refinement_type:a?.iteration_type??null,error_message_raw:r.messageRaw,error_message_pretty:r.messagePretty??null,error_path:r.path??null,error_line:r.line??null,error_column:r.column??null,timestamp:n})},[i,a]),[s,c]=(0,o.useState)([]),{events:d}=(0,ac.sU)();(0,o.useEffect)(()=>{let e=[];for(let t=d.length-1;t>=0;t--){let n=d[t];if(n?.type==="build:success")break;n?.type==="build:failed"&&"details"in n&&n.details.error?.message&&e.unshift(ar("preview-build",n.details.error.message))}let t=as(e);c(t),0===t.length||n8(s,t)||r("errors.preview_build",t)},[d]);let[u,m]=(0,o.useState)([]),{runtimeErrors:p}=(0,ad.tp)();(0,o.useEffect)(()=>{let e=as(p.map(e=>({source:"preview-runtime",messageRaw:e.message,messagePretty:e.message,path:e.path?.startsWith("/")?e.path.slice(1):e.path,location:ai(e.line,e.column),line:e.line,column:e.column})));m(e),0===e.length||n8(u,e)||r("errors.preview_runtime",e)},[p]);let{publishingStatus:h}=(0,nI.yO)(),{state:{history:f}}=(0,n1.P)(),{output:g}=f[al.P_.Deploy],[y,b]=(0,o.useState)([]);(0,o.useEffect)(()=>{if("unpublished"!==h&&"republishFailed"!==h)return void b([]);let e=g.split(`
`),t=e.findIndex(e=>e.toLowerCase().includes("error"));if(-1===t)return void b([]);let n=e.slice(t).filter(e=>0!==e.length).join(`
`);if(!n.trim())return void b([]);let a=[ar("deploy",n)];b(a),0!==a.length&&r("errors.deploy_build",a)},[g,h]);let x=(0,o.useMemo)(()=>[...s,...u,...y].slice(0,3),[y,u,s]),v=(0,o.useMemo)(()=>[...s,...u].filter(e=>!(e.path&&e.path.includes("node_modules/.vite/deps/chunk-"))).slice(0,1),[s,u]),w=(0,o.useMemo)(()=>({deployBuildErrors:y,setDeployBuildErrors:b,iterateErrors:x,overlayErrors:v}),[y,b,x,v]);return(0,l.jsx)(au,{value:w,children:e})}function ap(){let e=(0,o.use)(au);if(!e)throw Error("useErrors must be used within an ErrorsProvider");return e}try{au.displayName||(au.displayName="ErrorsContext")}catch{}try{am.displayName||(am.displayName="ErrorsProvider")}catch{}var ah=n(750);function af(){let{codespaceData:e}=(0,t2.M)(),t=e?.codespaceInfo?.environment_data.friendlyName,n=(0,tB.s)(),a=(0,n6.i)();return{authenticateDevTunnelsPortForwarding:(0,o.useCallback)(async(i,r)=>{let s=e?.remoteProvider?.tunnelProps,o=s?.connectAccessToken,l=ag(e,i);if(!o||!t||!l)return{authed:!1,url:""};let c=new FormData;c.append("featureFlags",""),c.append("accessToken",o),c.append("skipAntiPhishing","on"),c.append("disableRedirect","1"),a?.isStaff&&tL.Ay.log("preview iframe auth attempt");let d=performance.now();try{return await (0,ah.L)(async s=>{let o=await fetch(`${l}auth/postback/tunnel?tunnel=1`,{method:"POST",body:c,credentials:"include"});if(a?.isStaff&&tL.Ay.log(`preview iframe auth response type: ${o.type}, status: ${o.status}`),!o.ok)throw Error(`Preview auth error! status: ${o.status}, payload: ${await o.text()}`);n("preview.auth.success",{portType:r,port:i,codespaceName:t,retriesLeft:s,responseType:o.type,timestamp:new Date().toISOString(),duration:performance.now()-d,...ay(e)})},{retries:5,retryDelayMs:500,exponentialBackoffFactor:1.5}),{authed:!0,url:l}}catch(a){return n("preview.auth.error",{portType:r,port:i,codespaceName:t,timestamp:new Date().toISOString(),error:a instanceof Error?a.message:String(a),duration:performance.now()-d,...ay(e)}),{authed:!1,url:l}}},[e,t,a?.isStaff])}}function ag(e,t){let n=e?.codespaceInfo?.environment_data.friendlyName,a=e?.remoteProvider?.tunnelProps,i=a?.domain??"app.github.dev";return n?`https://${n}-${t}.${i}/`:null}function ay(e){let t=e?.codespaceInfo,n=t?.environment_data;return{codespaceId:t?.cloud_environment?.guid??n2,codespaceState:e.codespaceState,codespaceEnvironmentState:n?.state??n2,tunnelId:n?.connection?.tunnelProperties?.tunnelId??n2,tunnelClusterId:n?.connection?.tunnelProperties?.clusterId??n2}}function ab(e){return e.isSafari&&(e.major<18||18===e.major&&e.minor<4)}var ax=n(77572);let av=(e,t)=>{let n,a,i=t.getBoundingClientRect();return"touches"in e&&e.touches.length>0?(n=e.touches[0].clientX,a=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(n=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY):(n=e.clientX,a=e.clientY),{x:n-i.left,y:a-i.top}},aw=(e,t)=>{let n=(0,o.useRef)(!1),a=(0,o.useRef)({x:0,y:0}),i=(0,o.useRef)({x:0,y:0,speed:0}),r=(0,o.useRef)(!1),s=(0,o.useRef)(t);(0,o.useEffect)(()=>{s.current=t},[t]);let l=(0,o.useRef)(new Map);(0,o.useEffect)(()=>{let t=e.current;if(!t)return;let o=l.current,c=e=>{let{x:o,y:l}=av(e,t);if("mousemove"===e.type){if(r.current){let e=a.current,t=o-e.x,n=l-e.y,r=Math.sqrt(t*t+n*n);i.current={x:t,y:n,speed:r}}else i.current={x:0,y:0,speed:0},r.current=!0;a.current={x:o,y:l},s.current.onApplyForce(o,l,i.current),n.current&&s.current.onUpdateSpawnPosition?.(o,l)}},d=e=>{let{x:o,y:l}=av(e,t);"mousedown"===e.type&&(r.current=!0,a.current={x:o,y:l},i.current={x:0,y:0,speed:0}),n.current=!0,s.current.onStartSpawning?.(o,l)},u=()=>{n.current=!1,s.current.onStopSpawning?.()},m=()=>{i.current={x:0,y:0,speed:0},r.current=!1},p=()=>{n.current&&(n.current=!1,s.current.onStopSpawning?.()),r.current=!1,i.current={x:0,y:0,speed:0}},h=e=>{for(let n=0;n<e.changedTouches.length;n++){let a=e.changedTouches[n],i=t.getBoundingClientRect(),r=a.clientX-i.left,s=a.clientY-i.top;l.current.set(a.identifier,{x:r,y:s,lastX:r,lastY:s,startX:r,startY:s,hasMoved:!1,isFirstMove:!0})}if(l.current.size>=2){let e=l.current.values().next().value;e&&(n.current=!0,s.current.onStartSpawning?.(e.x,e.y))}else n.current&&(n.current=!1,s.current.onStopSpawning?.())},f=t=>{t.preventDefault();let a=e.current;if(!a)return;let i=a.getBoundingClientRect();for(let e=0;e<t.changedTouches.length;e++){let n=t.changedTouches[e],a=l.current.get(n.identifier);if(a){let e=n.clientX-i.left,t=n.clientY-i.top;Math.sqrt(Math.pow(e-a.startX,2)+Math.pow(t-a.startY,2))>5&&(a.hasMoved=!0);let r={x:0,y:0,speed:0};if(a.hasMoved&&!a.isFirstMove){let n=e-a.lastX,i=t-a.lastY,o=Math.sqrt(n*n+i*i);r={x:n,y:i,speed:o},s.current.onApplyForce(e,t,r)}a.lastX=e,a.lastY=t,a.x=e,a.y=t,a.isFirstMove=!1}}if(l.current.size>=2){let e=l.current.values().next().value;e&&n.current&&s.current.onUpdateSpawnPosition?.(e.x,e.y)}},g=e=>{for(let t=0;t<e.changedTouches.length;t++){let n=e.changedTouches[t];l.current.delete(n.identifier)}if(l.current.size>=2){let e=l.current.values().next().value;e&&n.current&&s.current.onUpdateSpawnPosition?.(e.x,e.y)}else n.current&&(n.current=!1,s.current.onStopSpawning?.())},y=e=>{g(e)};return t.addEventListener("mousemove",c),t.addEventListener("mousedown",d),t.addEventListener("mouseup",u),t.addEventListener("mouseenter",m),t.addEventListener("mouseleave",p),t.addEventListener("touchstart",h,{passive:!0}),t.addEventListener("touchmove",f,{passive:!0}),t.addEventListener("touchend",g,{passive:!0}),t.addEventListener("touchcancel",y),()=>{t.removeEventListener("mousemove",c),t.removeEventListener("mousedown",d),t.removeEventListener("mouseup",u),t.removeEventListener("mouseenter",m),t.removeEventListener("mouseleave",p),t.removeEventListener("touchstart",h),t.removeEventListener("touchmove",f),t.removeEventListener("touchend",g),t.removeEventListener("touchcancel",y),o.clear()}},[e])},a_=2e3,aS=.8,aC={min:8.1,max:24},ak={base:12,randomVariation:.5},aE={speed:2,randomVariation:.8},aj=.76,aN=1.7,aA={x:{min:0,max:1},y:{min:1,max:1.2}},aI=0,aT={target:1.4,randomRange:.3},aR=3,aM=3,aL={horizontal:2,vertical:1},aP=1.5,aD=3,a$={forceType:"follow",strength:282,radius:207,falloffCurve:2,clickSpawnCount:120,sweep:{speedMultiplier:8,directionalSpread:.8},follow:{spread:.3,strength:15,suctionStrength:4},boids:{speedLimit:330,weights:{separation:.7,alignment:4.3,cohesion:2.2}}},aF=!0,aO={intensity:1.5,radius:8,sizeMultiplier:4.4,speedBased:{enabled:!0,falloffDistance:18,colorShift:1,minSpeedThreshold:100,maxIntensity:3}},aB={length:20,fadeRate:.95,speedBased:{enabled:!1,lengthMultiplier:.8,minSpeedThreshold:70,maxLength:14,colorShift:10,spacing:4,opacityFalloff:.1}},aU={radius:12,intensity:0,speedBased:{enabled:!0,maxIntensity:2,minSpeedThreshold:85}},aW={gradient1:[{position:0,color:"#a173f6"},{position:.52,color:"#7b3eed"},{position:.93,color:"#5a00ff"}],gradient2:[{position:0,color:"#5fed83"},{position:.29,color:"#005bfe"},{position:.12,color:"#00b6bb"},{position:.99,color:"#5a00ff"}],gradient3:[{position:0,color:"#0077ff"},{position:1,color:"#0000ff"}]},aV=[{position:.32,opacity:1},{position:1,opacity:0}],aG={enabled:!0,forceMultiplier:5,paddingPixels:120,falloffCurve:2},az=({run:e,width:t,height:n,rendererRef:a})=>{let i=(0,o.useRef)(null),r=(0,o.useRef)(0),s=(0,o.useRef)(60),l=(0,o.useRef)(0),c=(0,o.useRef)(0),d=(0,o.useRef)(t),u=(0,o.useRef)(n);(0,o.useEffect)(()=>{d.current=t,u.current=n},[t,n]),(0,o.useEffect)(()=>{if(!e)return;r.current=performance.now(),c.current=performance.now();let t=e=>{let n=(e-r.current)/1e3;r.current=e;let o=Math.min(n,1/30);if(l.current++,e-c.current>=250&&(s.current=Math.round(l.current/((e-c.current)/1e3)),l.current=0,c.current=e),aG.enabled){let e=d.current/2,t=u.current/2;a.current?.applyOverlayRepulsion({left:e-100,right:e+100,top:t-40,bottom:t+40})}a.current?.render(o,e/1e3),i.current=requestAnimationFrame(t)};return i.current=requestAnimationFrame(t),()=>{i.current&&(cancelAnimationFrame(i.current),i.current=null)}},[e,a])};function aH(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16)/255,g:parseInt(t[2],16)/255,b:parseInt(t[3],16)/255}:{r:1,g:1,b:1}}function aq(e){let t=e=>{let t=Math.round(255*e).toString(16);return 1===t.length?`0${t}`:t};return`#${t(e.r)}${t(e.g)}${t(e.b)}`}function aK(e,t){t=Math.max(0,Math.min(1,t));let n=[...e].sort((e,t)=>e.position-t.position);if(t<=n[0].position)return aH(n[0].color);if(t>=n[n.length-1].position)return aH(n[n.length-1].color);let a=n[0],i=n[1];for(let e=0;e<n.length-1;e++)if(t>=n[e].position&&t<=n[e+1].position){a=n[e],i=n[e+1];break}let r=i.position-a.position,s=0===r?0:(t-a.position)/r,o=aH(a.color),l=aH(i.color);return{r:o.r+(l.r-o.r)*s,g:o.g+(l.g-o.g)*s,b:o.b+(l.b-o.b)*s}}function aY(e,t){t=Math.max(0,Math.min(1,t));let n=[...e].sort((e,t)=>e.position-t.position);if(t<=n[0].position)return n[0].opacity;if(t>=n[n.length-1].position)return n[n.length-1].opacity;let a=n[0],i=n[1];for(let e=0;e<n.length-1;e++)if(t>=n[e].position&&t<=n[e+1].position){a=n[e],i=n[e+1];break}let r=i.position-a.position,s=0===r?0:(t-a.position)/r;return a.opacity+(i.opacity-a.opacity)*s}let Canvas2DParticle=class Canvas2DParticle{applyForce(e,t){this.vx+=e/this.mass,this.vy+=t/this.mass;let n=Math.sqrt(this.vx*this.vx+this.vy*this.vy);n>this.bloomIntensity&&(this.bloomIntensity=n)}updateColor(e){let t=aK(this.gradient,e),n=Math.max(.1,1-40*this.bloomIntensity);t.r=Math.pow(t.r,n),t.g=Math.pow(t.g,n),t.b=Math.pow(t.b,n),t.r=Math.min(1,t.r),t.g=Math.min(1,t.g),t.b=Math.min(1,t.b),this.color=aq(t)}update(e,t,n){this.rotation+=e*this.velocity.rot,this.startTime<t&&(this.life+=.2*e*this.velocity.y),this.bloomIntensity*=.98,this.vx*=.98,this.vy*=.98,this._y-=.1*e*this.velocity.y,this._y+=this.vy*this.depth,this.y=this._y,this._x+=this.vx*this.depth,this.x=this._x+Math.cos(.2*e+this.life)*this.velocity.x;let a=this.life,i=this._opacity*aY(aV,a),r=.5*Math.sin(5*t+2*this.scaleRandom*Math.PI)+.5;this.scale=1.7*i*(.5*r+.5),this.opacity="light"===n?.5*i+.5:i,this.updateColor(a),this.life>1&&(this.life=0,this._x=1.02*Math.random()-.01,this._y=1.02+.1*Math.random(),this.y=this._y,this.x=this._x,this.vy=0,this.vx=0,this.bloomIntensity=0,this.rotation=Math.random()*Math.PI*2,this.depth=.9*Math.random()+.1,this.velocity.x=Math.sign(Math.random()-.5)*this.depth*.25,this.velocity.y=.5*this.depth+.5,this.velocity.rot=2*Math.random()-1)}constructor(e){(0,ek._)(this,"x",0),(0,ek._)(this,"y",0),(0,ek._)(this,"_x",1.02*Math.random()-.01),(0,ek._)(this,"_y",1.02+.1*Math.random()),(0,ek._)(this,"rotation",Math.random()*Math.PI*2),(0,ek._)(this,"depth",.9*Math.random()+.1),(0,ek._)(this,"velocity",{x:0,y:0,width:0,height:0,rot:0}),(0,ek._)(this,"vx",0),(0,ek._)(this,"vy",0),(0,ek._)(this,"mass",1),(0,ek._)(this,"lifeRatio",Math.random()),(0,ek._)(this,"life",Math.random()),(0,ek._)(this,"index",void 0),(0,ek._)(this,"scaleRandom",Math.random()),(0,ek._)(this,"_bloomIntensity",0),(0,ek._)(this,"bloomIntensity",0),(0,ek._)(this,"startTime",performance.now()/1e3+2*Math.random()),(0,ek._)(this,"_opacity",void 0),(0,ek._)(this,"gradient",void 0),(0,ek._)(this,"color",void 0),(0,ek._)(this,"initialRGB",void 0),(0,ek._)(this,"white",{r:1,g:1,b:1}),(0,ek._)(this,"opacity",aY(aV,0)),(0,ek._)(this,"scale",0),this.index=e,this.startTime=performance.now()/1e3+2*Math.random(),this.velocity.x=Math.sign(Math.random()-.5)*this.depth*.25,this.velocity.y=.5*this.depth+.5,this.velocity.rot=2*Math.random()-1,this._opacity=.7*this.depth+.3,this.gradient=function(e,t){let n=Object.keys(e);return e[n[t%n.length]]}(aW,this.index);const t=aK(this.gradient,0);this.color=aq(t),this.initialRGB=t,this.white={r:1,g:1,b:1},this.opacity=aY(aV,0)}};let aX=n.p+"sparkle-blur-fa20a4da9058.png";let Canvas2DRendererEngine=class Canvas2DRendererEngine{createCanvas(e,t){return"OffscreenCanvas"in window?new OffscreenCanvas(e,t):Object.assign(document.createElement("canvas"),{width:e,height:t})}getContext2D(e){let t=e.getContext("2d");if(!t)throw Error("Failed to get 2D context for canvas");return t}interpolateColor(e,t,n){let a=Math.max(0,Math.min(1,n)),i=Math.round(e.r+(t.r-e.r)*a),r=Math.round(e.g+(t.g-e.g)*a),s=Math.round(e.b+(t.b-e.b)*a);return`rgb(${i}, ${r}, ${s})`}createMaskedCanvas(e,t,n,a){let i=this.createCanvas(e,t),r=this.getContext2D(i);return r.fillStyle=n,r.fillRect(0,0,e,t),r.globalCompositeOperation="destination-in",r.drawImage(a,0,0,e,t),{canvas:i,context:r}}async createBlurImages(){if(!this.isDisposed)try{let e=this.blurSparkleImage.width,t=this.blurSparkleImage.height;if(this.maskBitmap=await createImageBitmap(this.blurSparkleImage),this.isDisposed)return;let n=`rgb(${Canvas2DRendererEngine.WHITE_COLOR.r}, ${Canvas2DRendererEngine.WHITE_COLOR.g}, ${Canvas2DRendererEngine.WHITE_COLOR.b})`,a=this.createMaskedCanvas(e,t,n,this.maskBitmap);this.offWhite=a.canvas,this.octxWhite=a.context,this.offArray=[],this.octxArray=[];for(let n=0;n<Canvas2DRendererEngine.BLUR_STEPS;n++){if(this.isDisposed)return;let a=n/(Canvas2DRendererEngine.BLUR_STEPS-1),i=this.interpolateColor(Canvas2DRendererEngine.GRADIENT_START,Canvas2DRendererEngine.GRADIENT_END,a),r=this.createMaskedCanvas(e,t,i,this.maskBitmap);this.offArray.push(r.canvas),this.octxArray.push(r.context)}}catch(e){throw this.maskBitmap?.close(),this.maskBitmap=null,this.offWhite=null,this.octxWhite=null,this.offArray=[],this.octxArray=[],Error(`Failed to create blur images: ${e instanceof Error?e.message:"Unknown error"}`)}}init(){for(let e=0;e<200;e++){let t=new Canvas2DParticle(e);this.particles.push(t)}}resize(e,t){this.pixelRatio=Math.min(1.5,window.devicePixelRatio)||1.5,this.dimensions.width=e,this.dimensions.height=t,this.canvas.width=e*this.pixelRatio,this.canvas.height=t*this.pixelRatio}dispose(){this.particles=[],this.offArray=[],this.octxArray=[],this.offWhite=null,this.octxWhite=null,this.maskBitmap?.close(),this.maskBitmap=null,this.isDisposed=!0}updateBloomParams(e){let t=Math.min(1,3*e);this.bloomAlpha1+=(this.bloom[this.themeMode].alpha1-this.bloomAlpha1)*t,this.bloomAlpha2+=(this.bloom[this.themeMode].alpha2-this.bloomAlpha2)*t,this.bloomScale1+=(this.bloom[this.themeMode].scale1-this.bloomScale1)*t,this.bloomScale2+=(this.bloom[this.themeMode].scale2-this.bloomScale2)*t}render(e,t){this.updateBloomParams(e),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.particles.forEach(n=>{n.update(e,t,this.themeMode),this.ctx.save(),this.ctx.translate(n.x*this.dimensions.width,n.y*this.dimensions.height),this.ctx.rotate(n.rotation),this.ctx.scale(n.scale,n.scale),this.ctx.translate(-this.size/2,-this.size/2),this.ctx.fillStyle=n.color,this.ctx.globalAlpha=n.opacity,this.ctx.fill(this.sparklePath),this.ctx.restore()}),this.particles.forEach((e,t)=>{this.ctx.save(),this.ctx.translate(e.x*this.dimensions.width,e.y*this.dimensions.height),this.ctx.rotate(e.rotation),this.ctx.scale(e.scale,e.scale),this.ctx.globalCompositeOperation="lighter";let n=this.offArray[t%this.offArray.length];this.ctx.scale(this.bloomScale1,this.bloomScale1),this.ctx.translate(-n.width/2,-n.height/2),this.ctx.globalAlpha=e.opacity*e.bloomIntensity*this.bloomAlpha1,this.ctx.drawImage(n,0,0,n.width,n.height),this.ctx.translate(n.width/2,n.height/2),this.ctx.globalCompositeOperation="source-over",this.offWhite&&(this.ctx.globalAlpha=e.opacity*e.bloomIntensity*this.bloomAlpha2,this.ctx.scale(this.bloomScale2,this.bloomScale2),this.ctx.translate(-n.width/2,-n.height/2),this.ctx.drawImage(this.offWhite,0,0,n.width,n.height)),this.ctx.restore()}),this.ctx.globalCompositeOperation="source-over"}applyOverlayRepulsion(e){if(!aG.enabled)return;let{forceMultiplier:t,paddingPixels:n,falloffCurve:a}=aG,i=this.dimensions.width*this.pixelRatio,r=this.dimensions.height*this.pixelRatio,s=e.left/i,o=e.right/i,l=e.top/r,c=e.bottom/r,d=n/i,u=(s+o)/2,m=(l+c)/2,p=(o-s)/2+d,h=(c-l)/2+d;for(let e of this.particles){let n=e.x-u,s=e.y-m,o=n/p,l=s/h,c=Math.sqrt(o*o+l*l);if(c<1&&c>0){let o=Math.sqrt(n*n+s*s);if(o>0){let l=t*Math.pow(1-c,a),d=n/o*l,u=s/o*l;e.applyForce(d/i*.5,u/r*.5)}}}}applyForce(e,t,n){switch(a$.forceType){case"radial":case"suction":case"directional":case"sweep":break;case"follow":this.applyFollowForce(e,t,n)}}updateThemeMode(e){this.themeMode=e,this.bloomAlpha1=this.bloom[e].alpha1,this.bloomAlpha2=this.bloom[e].alpha2,this.bloomScale1=this.bloom[e].scale1,this.bloomScale2=this.bloom[e].scale2}applyFollowForce(e,t,n){if(!n||n.speed<=0)return;let a=e/this.dimensions.width,i=t/this.dimensions.height,r={x:n.x/this.dimensions.width,y:n.y/this.dimensions.height,speed:n.speed/this.dimensions.width},{strength:s,radius:o,falloffCurve:l,follow:c}=a$,d=Math.max(0,Math.min(1,c?.spread??1)),u=Math.max(0,c?.strength??1),m=r.speed,p=m>0?r.x/m:0,h=m>0?r.y/m:0,f=Math.min(m*s/this.dimensions.width*2.2,m)*u*.01,g=o/this.dimensions.width*2.2;this.particles.forEach(e=>{let t=e.x-a,n=e.y-i,r=Math.sqrt(t*t+n*n);if(r<=0||r>g)return;let s=Math.pow(1-r/g,l),o=d+(1-d)*Math.max(0,-(t/r*p)+-(n/r*h));e.applyForce(p*f*s*o,h*f*s*o)})}constructor(e,t){if((0,ek._)(this,"canvas",void 0),(0,ek._)(this,"ctx",void 0),(0,ek._)(this,"pixelRatio",window.devicePixelRatio||1.5),(0,ek._)(this,"size",16),(0,ek._)(this,"particles",[]),(0,ek._)(this,"dimensions",{width:0,height:0}),(0,ek._)(this,"sparklePath",new Path2D("M7.53 1.282a.5.5 0 0 1 .94 0l.478 1.306a7.492 7.492 0 0 0 4.464 4.464l1.305.478a.5.5 0 0 1 0 .94l-1.305.478a7.492 7.492 0 0 0-4.464 4.464l-.478 1.305a.5.5 0 0 1-.94 0l-.478-1.305a7.492 7.492 0 0 0-4.464-4.464L1.282 8.47a.5.5 0 0 1 0-.94l1.306-.478a7.492 7.492 0 0 0 4.464-4.464Z")),(0,ek._)(this,"blurSparkleImage",new Image),(0,ek._)(this,"offArray",[]),(0,ek._)(this,"octxArray",[]),(0,ek._)(this,"offWhite",null),(0,ek._)(this,"octxWhite",null),(0,ek._)(this,"maskBitmap",null),(0,ek._)(this,"isDisposed",!1),(0,ek._)(this,"bloom",{light:{alpha1:14,alpha2:10,scale1:1.2,scale2:.8},dark:{alpha1:70,alpha2:70,scale1:1.5,scale2:.5}}),(0,ek._)(this,"themeMode",void 0),(0,ek._)(this,"bloomAlpha1",void 0),(0,ek._)(this,"bloomAlpha2",void 0),(0,ek._)(this,"bloomScale1",void 0),(0,ek._)(this,"bloomScale2",void 0),this.themeMode=t,this.canvas=e,this.ctx=e.getContext("2d"),!this.ctx)throw Error("Canvas 2D context not supported");this.themeMode=t,this.bloomAlpha1=this.bloom[t].alpha1,this.bloomAlpha2=this.bloom[t].alpha2,this.bloomScale1=this.bloom[t].scale1,this.bloomScale2=this.bloom[t].scale2,this.blurSparkleImage.src=aX,this.blurSparkleImage.onload=async()=>{this.isDisposed||(await this.createBlurImages(),this.isDisposed||this.init())},this.resize(this.canvas.width,this.canvas.height)}};(0,ek._)(Canvas2DRendererEngine,"BLUR_STEPS",10),(0,ek._)(Canvas2DRendererEngine,"WHITE_COLOR",{r:100,g:255,b:255}),(0,ek._)(Canvas2DRendererEngine,"GRADIENT_START",{r:0,g:0,b:255}),(0,ek._)(Canvas2DRendererEngine,"GRADIENT_END",{r:125,g:0,b:255});let aZ=({width:e,height:t,themeMode:n,className:a})=>{let i=(0,o.useRef)(null),r=(0,o.useRef)(null),[s,c]=(0,o.useState)("loading");return(0,o.useEffect)(()=>{let e=i.current;if(!e)throw Error("Canvas not found");return r.current=new Canvas2DRendererEngine(e,n),c("ready"),()=>{r.current?.dispose()}},[]),(0,o.useEffect)(()=>{r.current?.updateThemeMode(n)},[n]),(0,o.useEffect)(()=>{r.current?.resize(e,t)},[e,t]),az({run:"ready"===s,width:e,height:t,rendererRef:r}),aw(i,{onApplyForce(e,t,n){r.current?.applyForce(e,t,n)}}),(0,l.jsx)("canvas",{ref:i,className:a,style:{width:e,height:t},width:e,height:t})};try{aZ.displayName||(aZ.displayName="Canvas2DRenderer")}catch{}function aJ(e){return e[Math.floor(Math.random()*e.length)]}function aQ(){let[e,t]=(0,o.useState)(()=>aJ(a0)),n=(0,o.useRef)(new Set),[a,i]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{n.current.add(e)},[e]),(0,o.useEffect)(()=>{let e,a=setInterval(()=>{i(!1),e=setTimeout(()=>{let e=a0.filter(e=>!n.current.has(e));if(0===e.length){n.current.clear();let e=aJ(a0);n.current.add(e),t(e)}else{let a=aJ(e);n.current.add(a),t(a)}i(!0)},250)},5100);return()=>{clearInterval(a),clearTimeout(e)}},[]),(0,l.jsxs)("div",{className:"LoadingMessages-module__container--E5sEy",children:[(0,l.jsx)(v,{}),(0,l.jsxs)("div",{className:"LoadingMessages-module__loadingDots--dgYnr",style:{opacity:+!!a},children:[e,[".",".","."].map((e,t)=>(0,l.jsx)("span",{className:"LoadingMessages-module__dot--mE0EP",style:{"--i":t},children:e},t))]})]})}let a0=["Cookin' up something good","Making magic happen","Searching for greatness","Teaching robots new tricks","Translating human to computer","Sprinkling in some artificial intelligence","Assembling digital building blocks","Putting the micro in micro apps","Building tiny tech titans","Crafting code confections","Miniaturizing mighty ideas","Democratizing development","Consulting the silicon oracle","Downloading inspiration","Reticulating digital splines","Gathering ones and zeros","Converting caffeine to code","Herding binary cats","Untangling spaghetti code","Debugging rubber ducks","Optimizing quantum uncertainty","Defragmenting imagination","Compiling creative thoughts","Brainstorming with the machines","Mixing imagination with algorithms","Crafting digital experiences","Weaving code and creativity","Brewing up brilliant solutions","Painting with pixels","Sculpting in silicon","Orchestrating binary symphonies","Choreographing computational ballet","Dreaming in digital","Decoding your wishes","Teaching computers to speak human","Turning words into wonders","Processing prose into programs","Transforming talk into tech","Translating thoughts to things","Converting conversations to code","Whispering to the machines","Bridging human-computer small talk","Making bits and bytes bilingual","Charging flux capacitor","Engaging hyperdrive","Summoning digital wizards","Powering up the matrix","Initiating awesome sequence","Asking HAL nicely","Consulting Deep Thought","Warming up the holodeck","Rolling natural 20s","Fetching coffee for the AI","Teaching AI to high five","Downloading more RAM","Feeding the coding ninjas","Catching all the bugs","Generating random excuses","Researching blockchain buzzwords","Mining digital gold","Baking bits and bytes","Simmering solutions","Stirring the code soup","Adding a pinch of AI","Following grandma\u2019s secret algorithm","Marinating in machine learning","Growing digital gardens","Calculating butterfly effects","Observing code evolution","Applying Murphy\u2019s Law fixes","Channeling quantum inspiration","Dividing by zero (safely)","Tuning the algorithms","Composing code harmonies","Synchronizing binary beats","Dropping the bass (case)","Mixing the perfect batch","Forecasting feature weather","Generating idea storms","Cloud computing (literally)","Waiting for lightning inspiration","Broadcasting good vibes","Searching for aha moments","Strolling through latent space","Reseeding the RNG","Calibrating weirdness","Unrolling infinite loops","Recursing and recursing and","Aligning voxels","Rerolling until inspiration strikes","Convolving creative constructs","Hill climbing towards fun","Hypertuning hyperparameters","Reprompting metaprompts","Solving the halting problem","Dodging off-by-one errors","Centralizing edge cases","Repainting the bikeshed","Validating invalid assumptions","Overloading operators","Shaving a yak"];try{aQ.displayName||(aQ.displayName="LoadingMessages")}catch{}let a1=`
precision mediump float;
precision mediump int;

varying float v_life;
varying float v_alpha;
varying vec2 v_uv;
varying vec3 v_color;
varying float v_glowIntensity;
varying float v_bloomIntensity;
varying float v_trailLength;

uniform vec3 u_color;
uniform float u_glowIntensity;
uniform bool u_isDarkMode;
uniform sampler2D u_texture;
uniform bool u_useTexture;
uniform vec3 u_bloomSettings; // [falloffDistance, colorShift, enabled]
uniform vec2 u_trailSettings; // [colorShift, enabled]
uniform int u_renderPass; // 0 = main particles, 1 = bloom pass

float sparkleShape(vec2 uv) {
  vec2 center = uv - 0.5;
  float dist = length(center);
  float angle = atan(center.y, center.x);
  float rays = abs(sin(angle * 2.0)) * 0.3 + 0.7;
  float star = smoothstep(0.4 * rays, 0.2 * rays, dist);
  float glow = exp(-dist * 8.0) * 0.5;
  return max(star, glow);
}

// Cool down color by reducing red/warm tones
vec3 coolColor(vec3 color, float amount) {
  // Reduce red, slightly increase blue for cooler tone
  vec3 cooled = color;
  cooled.r *= (1.0 - amount * 0.8);
  cooled.g *= (1.0 - amount * 0.3);
  cooled.b *= (1.0 + amount * 0.2);
  return cooled;
}

// Simple tone mapping to prevent HDR blowout
vec3 toneMap(vec3 color) {
  // ACES tone mapping approximation - prevents any color from exceeding 1.0
  const float a = 2.51;
  const float b = 0.03;
  const float c = 2.43;
  const float d = 0.59;
  const float e = 0.14;
  return clamp((color * (a * color + b)) / (color * (c * color + d) + e), 0.0, 1.0);
}

// Create bloom effect with smooth falloff for larger quads
float bloomEffectLarge(vec2 uv, float falloffDistance, float intensity) {
  vec2 center = uv - 0.5;
  float dist = length(center);

  // Smooth falloff that extends beyond the quad bounds
  // Use a more gradual exponential decay for smoother edges
  float bloom = exp(-dist * falloffDistance * 0.5) * intensity;

  // Add a secondary, wider glow for ultra-smooth outer falloff
  float outerGlow = exp(-dist * falloffDistance * 0.15) * intensity * 0.3;

  return bloom + outerGlow;
}

// Create bloom effect with falloff
float bloomEffect(vec2 uv, float falloffDistance, float intensity) {
  vec2 center = uv - 0.5;
  float dist = length(center);
  float bloom = exp(-dist * falloffDistance) * intensity;
  return bloom;
}

void main() {
  // Bloom pass - render only the bloom effect on larger quads
  if (u_renderPass == 1) {
    if (u_bloomSettings.z > 0.5 && v_bloomIntensity > 0.0) { // enabled and has bloom
      float bloom = bloomEffectLarge(v_uv, u_bloomSettings.x, v_bloomIntensity);
      vec3 bloomColor = coolColor(v_color, u_bloomSettings.y);

      // Use additive blending for bloom effect
      vec3 finalBloomColor = bloomColor * bloom * 0.4;
      float finalBloomAlpha = bloom * 0.2;

      // Apply tone mapping and reduce intensity in light mode to prevent HDR blowout
      if (!u_isDarkMode) {
        finalBloomColor = toneMap(finalBloomColor * 0.5);
        finalBloomAlpha = finalBloomAlpha * 0.5;
      }

      gl_FragColor = vec4(finalBloomColor, finalBloomAlpha);
    } else {
      discard; // Don't render particles without bloom in bloom pass
    }
    return;
  }

  // Main particle pass
  float shape;

  if (u_useTexture) {
    vec4 texColor = texture2D(u_texture, v_uv);
    // Use luminance of RGB as alpha for white shapes on transparent background
    float luminance = dot(texColor.rgb, vec3(0.299, 0.587, 0.114));
    float rawShape = luminance * texColor.a;

    // Add subtle edge smoothing for ultra-smooth antialiasing
    shape = smoothstep(0.1, 0.9, rawShape);
  } else {
    shape = sparkleShape(v_uv);
  }

  // Use the per-particle color directly from gradient
  vec3 color = v_color;

  // Apply theme-based color adjustment only for light mode
  if (!u_isDarkMode) {
    // Slightly darken colors in light mode for better visibility
    color = color * 0.9;
  }

  float finalAlpha = shape * v_alpha;

  // Use per-particle glow intensity combined with global glow intensity
  float totalGlowIntensity = u_glowIntensity + v_glowIntensity;

  // Reduce glow intensity in light mode to prevent blowout
  if (!u_isDarkMode) {
    totalGlowIntensity = totalGlowIntensity * 0.6;
  }

  color += vec3(totalGlowIntensity * 0.3) * shape;

  // Apply trail effect if enabled (this would be better handled in a separate render pass)
  if (u_trailSettings.y > 0.5 && v_trailLength > 0.0) { // enabled and has trail
    // Trail effect is mainly handled by rendering multiple particles at trail positions
    // Here we just apply the color cooling for trail segments
    vec3 trailColor = coolColor(v_color, u_trailSettings.x);
    color = mix(color, trailColor, v_trailLength * 0.1);
  }

  // Apply tone mapping in light mode to prevent HDR blowout
  if (!u_isDarkMode) {
    color = toneMap(color);
  } else {
    // Simple clamp in dark mode to preserve HDR while preventing extreme values
    color = clamp(color, 0.0, 2.0);
  }

  gl_FragColor = vec4(color, finalAlpha);
}
`,a2=`
precision mediump float;
precision mediump int;

attribute vec2 a_position;
attribute vec2 a_particlePos;
attribute float a_size;
attribute float a_life;
attribute float a_maxLife;
attribute vec3 a_color;
attribute float a_rotation;
attribute float a_opacity;
attribute float a_glowIntensity;
attribute float a_bloomIntensity;
attribute float a_trailLength;

uniform vec2 u_resolution;
uniform mat3 u_transform;
uniform int u_renderPass; // 0 = main particles, 1 = bloom pass
uniform float u_bloomSizeMultiplier; // How much bigger bloom quads should be

// For non-instanced fallback
uniform vec2 u_particlePos;
uniform float u_particleSize;
uniform float u_particleLife;
uniform float u_particleMaxLife;
uniform vec3 u_particleColor;
uniform float u_particleRotation;
uniform float u_particleOpacity;
uniform float u_particleGlowIntensity;
uniform float u_particleBloomIntensity;
uniform float u_particleTrailLength;

varying float v_life;
varying float v_alpha;
varying vec2 v_uv;
varying vec3 v_color;
varying float v_glowIntensity;
varying float v_bloomIntensity;
varying float v_trailLength;

void main() {
  // Use instanced attributes if available, otherwise use uniforms
  vec2 particlePos = a_particlePos != vec2(0.0) ? a_particlePos : u_particlePos;
  float size = a_size != 0.0 ? a_size : u_particleSize;
  float life = a_life != 0.0 ? a_life : u_particleLife;
  float maxLife = a_maxLife != 0.0 ? a_maxLife : u_particleMaxLife;
  vec3 color = a_color != vec3(0.0) ? a_color : u_particleColor;
  float rotation = a_rotation != 0.0 ? a_rotation : u_particleRotation;
  float opacity = a_opacity != 0.0 ? a_opacity : u_particleOpacity;
  // For glow intensity, always use attribute if instanced rendering, otherwise use uniform
  float glowIntensity = a_glowIntensity >= 0.0 ? a_glowIntensity : u_particleGlowIntensity;
  float bloomIntensity = a_bloomIntensity >= 0.0 ? a_bloomIntensity : u_particleBloomIntensity;
  float trailLength = a_trailLength >= 0.0 ? a_trailLength : u_particleTrailLength;

  // Pass color and effect intensities to fragment shader
  v_color = color;
  v_glowIntensity = glowIntensity;
  v_bloomIntensity = bloomIntensity;
  v_trailLength = trailLength;

  // Use the opacity from gradient instead of calculating based on lifecycle
  v_life = life / maxLife;
  v_alpha = opacity;

  // UV coordinates for the particle quad
  v_uv = a_position * 0.5 + 0.5;

  // Apply rotation to the vertex position
  float cos_r = cos(rotation);
  float sin_r = sin(rotation);
  vec2 rotatedPos = vec2(
    a_position.x * cos_r - a_position.y * sin_r,
    a_position.x * sin_r + a_position.y * cos_r
  );

  // Use constant size (no lifecycle scaling)
  float sizeScale = 1.0;

  // For bloom pass, use larger quads to allow smooth falloff
  float finalSize = size;
  if (u_renderPass == 1) { // bloom pass
    finalSize = size * u_bloomSizeMultiplier;
  }

  // Convert particle position to clip space coordinates (-1 to 1)
  vec2 clipPos = (particlePos / u_resolution) * 2.0 - 1.0;
  clipPos.y = -clipPos.y; // Flip Y to match screen coordinates

  // Calculate particle offset in pixels, then convert to clip space
  vec2 particleOffset = rotatedPos * finalSize * sizeScale;

  // Convert pixel offset to clip space, maintaining aspect ratio
  vec2 clipOffset;
  clipOffset.x = (particleOffset.x / u_resolution.x) * 2.0;
  clipOffset.y = (particleOffset.y / u_resolution.y) * 2.0;

  gl_Position = vec4(clipPos + clipOffset, 0.0, 1.0);
}
`;let PerlinNoise=class PerlinNoise{generatePermutation(){let e=[];for(let t=0;t<256;t++)e[t]=t;for(let t=255;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e.concat(e)}generateGradients(){let e=[];for(let t=0;t<256;t++){let n=Math.random()*Math.PI*2;e[t]={x:Math.cos(n),y:Math.sin(n),z:(Math.random()-.5)*2}}return e}fade(e){return e*e*e*(e*(6*e-15)+10)}lerp(e,t,n){return e+n*(t-e)}dot3d(e,t,n,a){return e.x*t+e.y*n+e.z*a}noise3d(e,t,n){e*=aM,t*=aM,n*=aM;let a=255&Math.floor(e),i=255&Math.floor(t),r=255&Math.floor(n);e-=Math.floor(e),t-=Math.floor(t),n-=Math.floor(n);let s=this.fade(e),o=this.fade(t),l=this.fade(n),c=this.permutation[a]+i,d=this.permutation[c]+r,u=this.permutation[c+1]+r,m=this.permutation[a+1]+i,p=this.permutation[m]+r,h=this.permutation[m+1]+r;return this.lerp(this.lerp(this.lerp(this.dot3d(this.gradients[this.permutation[d]],e,t,n),this.dot3d(this.gradients[this.permutation[p]],e-1,t,n),s),this.lerp(this.dot3d(this.gradients[this.permutation[u]],e,t-1,n),this.dot3d(this.gradients[this.permutation[h]],e-1,t-1,n),s),o),this.lerp(this.lerp(this.dot3d(this.gradients[this.permutation[d+1]],e,t,n-1),this.dot3d(this.gradients[this.permutation[p+1]],e-1,t,n-1),s),this.lerp(this.dot3d(this.gradients[this.permutation[u+1]],e,t-1,n-1),this.dot3d(this.gradients[this.permutation[h+1]],e-1,t-1,n-1),s),o),l)}octaveNoise(e,t,n,a=4){let i=0,r=1,s=1,o=0;for(let l=0;l<a;l++)i+=this.noise3d(e*s,t*s,n*s)*r,o+=r,r*=.5,s*=2;return i/o}getForceAt(e,t,n){let a=aD,i=n*aP;return{x:(this.octaveNoise(e+.01,t,i,a)-this.octaveNoise(e-.01,t,i,a))/.02,y:(this.octaveNoise(e,t+.01,i,a)-this.octaveNoise(e,t-.01,i,a))/.02}}constructor(){(0,ek._)(this,"permutation",void 0),(0,ek._)(this,"gradients",void 0),this.permutation=this.generatePermutation(),this.gradients=this.generateGradients()}};let WebGLParticle=class WebGLParticle{update(e,t){if(this.life+=e,this.isDead())return null;if(t){let n=t.getForceAt(this.x,this.y,this.life+this.noiseOffset);this.vx+=n.x*aL.horizontal*e,this.vy+=n.y*aL.vertical*e}let n=Math.max(0,aN??0);if(n>0){let t=Math.exp(-n*e);this.vx*=t,this.vy*=t}if(this.vy-=aj*e,this.x+=this.vx*e*60,this.y+=this.vy*e*60,this.speed=60*Math.sqrt(this.vx*this.vx+this.vy*this.vy),aU.speedBased.enabled&&this.speed>aU.speedBased.minSpeedThreshold){let e=Math.min((this.speed-aU.speedBased.minSpeedThreshold)/200,1);this.speedBasedGlow=e*aU.speedBased.maxIntensity}else this.speedBasedGlow=0;if(aO.speedBased.enabled&&this.speed>aO.speedBased.minSpeedThreshold){let e=Math.min((this.speed-aO.speedBased.minSpeedThreshold)/200,1);this.speedBasedBloom=e*aO.speedBased.maxIntensity}else this.speedBasedBloom=0;if(aB.speedBased.enabled&&this.speed>aB.speedBased.minSpeedThreshold){let e=Math.min((this.speed-aB.speedBased.minSpeedThreshold)/200,1);this.speedBasedTrailLength=Math.floor(e*aB.speedBased.maxLength*aB.speedBased.lengthMultiplier),this.trailPositions.unshift({x:this.x,y:this.y,alpha:1}),this.trailPositions.length>this.speedBasedTrailLength&&(this.trailPositions=this.trailPositions.slice(0,this.speedBasedTrailLength));for(let e=0;e<this.trailPositions.length;e++){let t=e/this.trailPositions.length,n=aB.speedBased.opacityFalloff||1;this.trailPositions[e].alpha=1-Math.pow(t,n)}}else this.speedBasedTrailLength=0,this.trailPositions=[];let a=this.life/this.maxLife;return this.color=aq(aK(this.gradient,a)),this.opacity=aY(aV,a),this.size=this.initialSize*this.opacity,this.rotation+=this.rotationSpeed*e,this}applyForce(e,t){this.vx+=e/this.mass,this.vy+=t/this.mass}shouldSpawnChild(){if(this.childrenSpawned>=this.maxChildren)return!1;let e=this.life/this.maxLife;return!(e<.2)&&!(e>.8)&&Math.random()<aI}spawnChild(){if(!this.shouldSpawnChild())return null;this.childrenSpawned++;let e=10+20*Math.random(),t=Math.random()*Math.PI*2,n=new WebGLParticle(this.x+Math.cos(t)*e,this.y+Math.sin(t)*e),a=aT.target+(Math.random()-.5)*aT.randomRange;return n.vx=this.vx*a+(Math.random()-.5)*.3,n.vy=this.vy*a-.2*Math.random(),n}isDead(){return this.life>=this.maxLife}isOnScreen(e,t,n=100){return this.x>-n&&this.x<e+n&&this.y>-n&&this.y<t+n}constructor(e,t){(0,ek._)(this,"x",void 0),(0,ek._)(this,"y",void 0),(0,ek._)(this,"vx",void 0),(0,ek._)(this,"vy",void 0),(0,ek._)(this,"life",void 0),(0,ek._)(this,"maxLife",void 0),(0,ek._)(this,"size",void 0),(0,ek._)(this,"initialSize",void 0),(0,ek._)(this,"gradient",void 0),(0,ek._)(this,"color",void 0),(0,ek._)(this,"opacity",void 0),(0,ek._)(this,"rotationSpeed",void 0),(0,ek._)(this,"rotation",void 0),(0,ek._)(this,"childrenSpawned",void 0),(0,ek._)(this,"maxChildren",void 0),(0,ek._)(this,"mass",void 0),(0,ek._)(this,"speed",void 0),(0,ek._)(this,"speedBasedGlow",void 0),(0,ek._)(this,"speedBasedBloom",void 0),(0,ek._)(this,"noiseOffset",void 0),(0,ek._)(this,"trailPositions",void 0),(0,ek._)(this,"speedBasedTrailLength",void 0),this.x=e,this.y=t,this.vx=(Math.random()-.5)*.5,this.vy=-(.5*Math.random())-.2,this.life=0,this.maxLife=aC.min+Math.random()*(aC.max-aC.min);const n=ak.base*ak.randomVariation;this.size=ak.base-Math.random()*n,this.initialSize=this.size,this.gradient=function(e){let t=Object.keys(e);return e[t[Math.floor(Math.random()*t.length)]]}(aW),this.color=aq(aK(this.gradient,0)),this.opacity=aY(aV,0);const a=aE.speed*aE.randomVariation;this.rotationSpeed=aE.speed-Math.random()*a,.5>Math.random()&&(this.rotationSpeed*=-1),this.rotation=Math.random()*Math.PI*2,this.childrenSpawned=0,this.maxChildren=aR,this.mass=1,this.speed=0,this.speedBasedGlow=0,this.speedBasedBloom=0,this.noiseOffset=1e3*Math.random(),this.trailPositions=[],this.speedBasedTrailLength=0}};let ParticleManager=class ParticleManager{update(e){this.timeAccumulator+=e,this.mouseSpawnAccumulator+=e,this.spawnParticles(),this.spawnMouseParticles(),this.updateParticles(e),this.cleanupParticles(),this.spawnChildParticles()}spawnParticles(){let e=1/(this.canvasWidth*(25/1200)*aS);for(;this.timeAccumulator>=e&&this.particles.length<a_;)this.spawnRandomParticle(),this.timeAccumulator-=e}spawnMouseParticles(){if(!this.mouseSpawnActive)return;let e=1/a$.clickSpawnCount;for(;this.mouseSpawnAccumulator>=e&&this.particles.length<a_;)this.spawnParticleAt(this.mouseSpawnPosition.x,this.mouseSpawnPosition.y,1),this.mouseSpawnAccumulator-=e}spawnRandomParticle(){let e=aA,t=new WebGLParticle(this.canvasWidth*(e.x.min+Math.random()*(e.x.max-e.x.min)),this.canvasHeight*(e.y.min+Math.random()*(e.y.max-e.y.min)));return this.particles.push(t),t}spawnParticleAt(e,t,n=1){let a=[];for(let i=0;i<n&&this.particles.length<a_;i++){let n=new WebGLParticle(e+(Math.random()-.5)*20,t+(Math.random()-.5)*20);n.vy-=.3,this.particles.push(n),a.push(n)}return a}updateParticles(e){for(let t=this.particles.length-1;t>=0;t--){let n=this.particles[t];if(null===n.update(e,this.perlinNoise)){this.particles.splice(t,1);continue}n.isOnScreen(this.canvasWidth,this.canvasHeight,200)||this.particles.splice(t,1)}}cleanupParticles(){this.particles=this.particles.filter(e=>!e.isDead())}spawnChildParticles(){let e=[];for(let t of this.particles){let n=t.spawnChild();n&&this.particles.length+e.length<a_&&e.push(n)}this.particles.push(...e)}applyMouseForce(e,t){let{strength:n,radius:a,falloffCurve:i}=a$;for(let r of this.particles){let s=r.x-e,o=r.y-t,l=Math.sqrt(s*s+o*o);if(l<a&&l>0){let e=n*Math.pow(1-l/a,i),t=s/l*e,c=o/l*e;r.applyForce(.01*t,.01*c)}}}applyForce(e,t,n){switch(a$.forceType){case"radial":this.applyMouseForce(e,t);break;case"suction":this.applySuctionForce(e,t);break;case"directional":this.applyDirectionalForce(e,t);break;case"sweep":this.applySweepForce(e,t,n);break;case"follow":this.applyFollowForce(e,t,n);break;case"boids":this.applyBoidsForce(e,t)}}applyBoidsForce(e,t){let{radius:n,falloffCurve:a,boids:i}=a$,r=Math.max(0,i?.speedLimit??200);if(r<=0)return;let s=Math.max(10,.5*n),o=Math.max(5,.5*s),l=Math.max(0,i?.weights?.separation??1.5),c=Math.max(0,i?.weights?.alignment??1),d=Math.max(0,i?.weights?.cohesion??1.2),u=r/60,m=.15*u;for(let i=0;i<this.particles.length;i++){let r,p=this.particles[i],h=p.x-e,f=p.y-t,g=Math.sqrt(h*h+f*f);if(g<=0||g>n)continue;let y=Math.pow(1-g/n,a),b=0,x=0,v=0,w=0,_=0;for(let e=0;e<this.particles.length;e++){if(i===e)continue;let t=this.particles[e],n=t.x-p.x,a=t.y-p.y,r=Math.sqrt(n*n+a*a);if(0!==r&&!(r>s)&&(v+=t.vx,w+=t.vy,_++,r<o)){let e=1/r,t=(o-r)/o;b-=n*e*t,x-=a*e*t}}let S=0,C=0;if(0!==b||0!==x){let e=Math.sqrt(b*b+x*x)||1;S=b/e*u,C=x/e*u}let k=0,E=0;if(_>0){let e=v/_,t=w/_,n=Math.sqrt(e*e+t*t);n>0&&(k=e/n*u,E=t/n*u)}let j=0,N=0,A=-h,I=-f,T=Math.sqrt(A*A+I*I);T>0&&(j=A/T*u,N=I/T*u);let R=p.vx,M=p.vy,L=0;r=0+(S-R)*l,L+=(C-M)*l,r+=(k-R)*c,L+=(E-M)*c,r+=(j-R)*d,L+=(N-M)*d;let P=Math.sqrt((r*=y)*r+(L*=y)*L);if(P>m&&P>0){let e=m/P;r*=e,L*=e}p.applyForce(r,L);let D=Math.sqrt(p.vx*p.vx+p.vy*p.vy);if(D>u&&D>0){let e=u/D;p.vx*=e,p.vy*=e}}}applySuctionForce(e,t){let{strength:n,radius:a,falloffCurve:i}=a$;for(let r of this.particles){let s=e-r.x,o=t-r.y,l=Math.sqrt(s*s+o*o);if(l<a&&l>0){let e=n*Math.pow(1-l/a,i),t=s/l*e,c=o/l*e;r.applyForce(.01*t,.01*c)}}}applyDirectionalForce(e,t){let{strength:n,radius:a}=a$;for(let i of this.particles){let r=i.x-e,s=i.y-t;Math.sqrt(r*r+s*s)<a&&i.applyForce(.01*n,0*n*.01)}}applySweepForce(e,t,n){if(!n||n.speed<1)return;let{strength:a,radius:i,falloffCurve:r,sweep:s}=a$,{speedMultiplier:o,directionalSpread:l}=s,c=n.speed,d=c>0?n.x/c:0,u=c>0?n.y/c:0,m=c*o;for(let n of this.particles){let s=n.x-e,o=n.y-t,c=Math.sqrt(s*s+o*o);if(c<i&&c>0){let e=Math.pow(1-c/i,r),t=s/c,p=o/c,h=a*e*.01,f=m*Math.pow(Math.max(0,t*d+p*u),1/(l+.1))*e*.01,g=h*t+f*d,y=h*p+f*u;n.applyForce(g,y)}}}applyFollowForce(e,t,n){if(!n||n.speed<=0)return;let{strength:a,radius:i,falloffCurve:r,follow:s}=a$,o=Math.max(0,Math.min(1,s?.spread??1)),l=Math.max(0,s?.strength??1),c=Math.max(0,s?.suctionStrength??0),d=n.speed,u=d>0?n.x/d:0,m=d>0?n.y/d:0,p=Math.min(d*a,d)*l*.01;for(let n of this.particles){let a=n.x-e,s=n.y-t,l=Math.sqrt(a*a+s*s);if(l<=0||l>i)continue;let d=Math.pow(1-l/i,r),h=a/l,f=s/l,g=o+(1-o)*Math.max(0,-(h*u)+-(f*m)),y=u*p*d*g,b=m*p*d*g,x=0,v=0;if(c>0){let e=c*d*.01,t=-f;x=-h*e,v=t*e}n.applyForce(y+x,b+v)}}startMouseSpawning(e,t){this.mouseSpawnActive=!0,this.mouseSpawnPosition={x:e,y:t},this.mouseSpawnAccumulator=0}stopMouseSpawning(){this.mouseSpawnActive=!1}applyOverlayRepulsion(e){if(!aG.enabled)return;let{forceMultiplier:t,paddingPixels:n,falloffCurve:a}=aG,i=(e.left+e.right)/2,r=(e.top+e.bottom)/2,s=(e.right-e.left)/2+n,o=(e.bottom-e.top)/2+n;for(let e of this.particles){let n=e.x-i,l=e.y-r,c=n/s,d=l/o,u=Math.sqrt(c*c+d*d);if(u<1&&u>0){let i=Math.sqrt(n*n+l*l);if(i>0){let r=t*Math.pow(1-u,a),s=n/i*r,o=l/i*r;e.applyForce(.02*s,.02*o)}}}}updateMouseSpawnPosition(e,t){this.mouseSpawnActive&&(this.mouseSpawnPosition={x:e,y:t})}resize(e,t){let n=this.canvasWidth,a=this.canvasHeight;if(this.canvasWidth=e,this.canvasHeight=t,n>0&&a>0&&this.particles.length>0){let i=e/n,r=t/a,s=(i+r)/2;for(let e of this.particles)e.x*=i,e.y*=r,e.vx*=s,e.vy*=s}}getParticles(){return this.particles}getParticleCount(){return this.particles.length}clear(){this.particles=[]}constructor(e,t){(0,ek._)(this,"particles",[]),(0,ek._)(this,"perlinNoise",new PerlinNoise),(0,ek._)(this,"lastSpawnTime",0),(0,ek._)(this,"timeAccumulator",0),(0,ek._)(this,"mouseSpawnActive",!1),(0,ek._)(this,"mouseSpawnPosition",{x:0,y:0}),(0,ek._)(this,"mouseSpawnAccumulator",0),(0,ek._)(this,"canvasWidth",800),(0,ek._)(this,"canvasHeight",600),this.canvasWidth=e,this.canvasHeight=t}};let WebGLRendererEngine=class WebGLRendererEngine{initGL(){let e=this.gl;e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),this.resize(this.canvas.width,this.canvas.height)}loadShaders(){let e=this.gl;if(e.attachShader(this.program,this.compileShader(e.VERTEX_SHADER,a2)),e.attachShader(this.program,this.compileShader(e.FRAGMENT_SHADER,a1)),e.linkProgram(this.program),!e.getProgramParameter(this.program,e.LINK_STATUS))throw Error(`Failed to link shader program: ${e.getProgramInfoLog(this.program)}`);this.getLocations(),this.setupBuffers()}compileShader(e,t){let n=this.gl,a=n.createShader(e);if(n.shaderSource(a,t),n.compileShader(a),!n.getShaderParameter(a,n.COMPILE_STATUS))throw Error(`Failed to compile shader: ${n.getShaderInfoLog(a)}`);return a}createParticleTexture(){let e=this.gl,t=document.createElement("canvas"),n=t.getContext("2d");t.width=256,t.height=256,n.clearRect(0,0,256,256),n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high";n.fillStyle="white",n.beginPath();for(let e=0;e<8;e++){let t=e*Math.PI/4,a=e%2==0?102.4:38.4,i=128+Math.cos(t)*a,r=128+Math.sin(t)*a;0===e?n.moveTo(i,r):n.lineTo(i,r)}n.closePath(),n.fill();let a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.bindTexture(e.TEXTURE_2D,null),this.texture=a}getLocations(){let e=this.gl;this.attributes={position:e.getAttribLocation(this.program,"a_position"),particlePos:e.getAttribLocation(this.program,"a_particlePos"),size:e.getAttribLocation(this.program,"a_size"),life:e.getAttribLocation(this.program,"a_life"),maxLife:e.getAttribLocation(this.program,"a_maxLife"),color:e.getAttribLocation(this.program,"a_color"),rotation:e.getAttribLocation(this.program,"a_rotation"),opacity:e.getAttribLocation(this.program,"a_opacity"),glowIntensity:e.getAttribLocation(this.program,"a_glowIntensity"),bloomIntensity:e.getAttribLocation(this.program,"a_bloomIntensity"),trailLength:e.getAttribLocation(this.program,"a_trailLength")},this.uniforms={resolution:e.getUniformLocation(this.program,"u_resolution"),transform:e.getUniformLocation(this.program,"u_transform"),color:e.getUniformLocation(this.program,"u_color"),glowIntensity:e.getUniformLocation(this.program,"u_glowIntensity"),isDarkMode:e.getUniformLocation(this.program,"u_isDarkMode"),texture:e.getUniformLocation(this.program,"u_texture"),useTexture:e.getUniformLocation(this.program,"u_useTexture"),bloomSettings:e.getUniformLocation(this.program,"u_bloomSettings"),trailSettings:e.getUniformLocation(this.program,"u_trailSettings"),renderPass:e.getUniformLocation(this.program,"u_renderPass"),bloomSizeMultiplier:e.getUniformLocation(this.program,"u_bloomSizeMultiplier"),particlePos:e.getUniformLocation(this.program,"u_particlePos"),particleSize:e.getUniformLocation(this.program,"u_particleSize"),particleLife:e.getUniformLocation(this.program,"u_particleLife"),particleMaxLife:e.getUniformLocation(this.program,"u_particleMaxLife"),particleColor:e.getUniformLocation(this.program,"u_particleColor"),particleRotation:e.getUniformLocation(this.program,"u_particleRotation"),particleOpacity:e.getUniformLocation(this.program,"u_particleOpacity"),particleGlowIntensity:e.getUniformLocation(this.program,"u_particleGlowIntensity"),particleBloomIntensity:e.getUniformLocation(this.program,"u_particleBloomIntensity"),particleTrailLength:e.getUniformLocation(this.program,"u_particleTrailLength")}}setupBuffers(){let e=this.gl,t=new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]);this.buffers.position=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.position),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),this.buffers.particlePos=e.createBuffer(),this.buffers.size=e.createBuffer(),this.buffers.life=e.createBuffer(),this.buffers.maxLife=e.createBuffer(),this.buffers.color=e.createBuffer(),this.buffers.rotation=e.createBuffer(),this.buffers.opacity=e.createBuffer(),this.buffers.glowIntensity=e.createBuffer(),this.buffers.bloomIntensity=e.createBuffer(),this.buffers.trailLength=e.createBuffer()}updateParticleData(e){let t=this.gl,n=e.length;if(0===n||!this.buffers.particlePos)return;let a=new Float32Array(2*n),i=new Float32Array(n),r=new Float32Array(n),s=new Float32Array(n),o=new Float32Array(3*n),l=new Float32Array(n),c=new Float32Array(n),d=new Float32Array(n),u=new Float32Array(n),m=new Float32Array(n);for(let t=0;t<n;t++){let n=e[t];a[2*t]=n.x,a[2*t+1]=n.y,i[t]=n.size,r[t]=n.life,s[t]=n.maxLife,l[t]=n.rotation,c[t]=n.opacity,d[t]=n.speedBasedGlow,u[t]=n.speedBasedBloom,m[t]=n.speedBasedTrailLength;let p=aH(n.color);o[3*t]=p.r,o[3*t+1]=p.g,o[3*t+2]=p.b}t.bindBuffer(t.ARRAY_BUFFER,this.buffers.particlePos),t.bufferData(t.ARRAY_BUFFER,a,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.buffers.size),t.bufferData(t.ARRAY_BUFFER,i,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.buffers.life),t.bufferData(t.ARRAY_BUFFER,r,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.buffers.maxLife),t.bufferData(t.ARRAY_BUFFER,s,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.buffers.color),t.bufferData(t.ARRAY_BUFFER,o,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.buffers.rotation),t.bufferData(t.ARRAY_BUFFER,l,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.buffers.opacity),t.bufferData(t.ARRAY_BUFFER,c,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.buffers.glowIntensity),t.bufferData(t.ARRAY_BUFFER,d,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.buffers.bloomIntensity),t.bufferData(t.ARRAY_BUFFER,u,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.buffers.trailLength),t.bufferData(t.ARRAY_BUFFER,m,t.DYNAMIC_DRAW)}render(e){let t=this.gl;if(!this.program)return;this.particleManager.update(e);let n=this.particleManager.getParticles();if(0===n.length)return;let a="dark"===this.themeMode?{r:0,g:0,b:0}:{r:1,g:1,b:1};t.clearColor(a.r,a.g,a.b,0),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(this.program),t.uniform2f(this.uniforms.resolution,this.canvas.width,this.canvas.height),t.uniformMatrix3fv(this.uniforms.transform,!1,[1,0,0,0,1,0,0,0,1]),t.uniform3f(this.uniforms.color,1,.8,.3);let i="dark"===this.themeMode?aU.intensity:Math.min(aU.intensity,.3);if(t.uniform1f(this.uniforms.glowIntensity,i),t.uniform1i(this.uniforms.isDarkMode,+("dark"===this.themeMode)),this.uniforms.bloomSettings){let e=+!!aO.speedBased.enabled;t.uniform3f(this.uniforms.bloomSettings,aO.speedBased.falloffDistance,aO.speedBased.colorShift,e)}if(this.uniforms.trailSettings){let e=+!!aB.speedBased.enabled;t.uniform2f(this.uniforms.trailSettings,aB.speedBased.colorShift,e)}this.uniforms.particleGlowIntensity&&t.uniform1f(this.uniforms.particleGlowIntensity,0),this.uniforms.particleBloomIntensity&&t.uniform1f(this.uniforms.particleBloomIntensity,0),this.uniforms.particleTrailLength&&t.uniform1f(this.uniforms.particleTrailLength,0);let r=aF||!1;t.uniform1i(this.uniforms.useTexture,+!!r),r&&this.texture&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),t.uniform1i(this.uniforms.texture,0));let s=[],o=[];for(let e of n){if(aB.speedBased.enabled&&e.trailPositions&&e.trailPositions.length>1){let t=Math.max(1,aB.speedBased.spacing||1);for(let n=0;n<e.trailPositions.length-1;n++){let a=e.trailPositions[n],i=e.trailPositions[n+1];for(let r=0;r<t;r++){let o=r/t,l=a.x+(i.x-a.x)*o,c=a.y+(i.y-a.y)*o,d=a.alpha+(i.alpha-a.alpha)*o,u={...e,x:l,y:c,opacity:e.opacity*d*.7,speedBasedGlow:e.speedBasedGlow*d*.5,speedBasedBloom:0,speedBasedTrailLength:(n+o)/e.trailPositions.length};s.push(u)}}}o.push(e)}for(let e of o)s.push(e);if(aO.speedBased.enabled){if(t.blendFunc(t.SRC_ALPHA,t.ONE),t.uniform1i(this.uniforms.renderPass,1),t.uniform1f(this.uniforms.bloomSizeMultiplier,aO.sizeMultiplier||3),this.updateParticleData(o),this.instancedArraysExt)this.setupInstancedRendering(),this.instancedArraysExt.drawArraysInstancedANGLE(t.TRIANGLES,0,6,o.length);else{this.setupBasicRendering();for(let e=0;e<o.length;e++)this.updateSingleParticle(o[e]),t.drawArrays(t.TRIANGLES,0,6)}t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}if(t.uniform1i(this.uniforms.renderPass,0),t.uniform1f(this.uniforms.bloomSizeMultiplier,1),this.updateParticleData(s),this.instancedArraysExt)this.setupInstancedRendering(),this.instancedArraysExt.drawArraysInstancedANGLE(t.TRIANGLES,0,6,s.length);else{this.setupBasicRendering();for(let e=0;e<s.length;e++)this.updateSingleParticle(s[e]),t.drawArrays(t.TRIANGLES,0,6)}}setupInstancedRendering(){let e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.buffers.position),e.enableVertexAttribArray(this.attributes.position),e.vertexAttribPointer(this.attributes.position,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.particlePos),e.enableVertexAttribArray(this.attributes.particlePos),e.vertexAttribPointer(this.attributes.particlePos,2,e.FLOAT,!1,0,0),this.instancedArraysExt.vertexAttribDivisorANGLE(this.attributes.particlePos,1),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.size),e.enableVertexAttribArray(this.attributes.size),e.vertexAttribPointer(this.attributes.size,1,e.FLOAT,!1,0,0),this.instancedArraysExt.vertexAttribDivisorANGLE(this.attributes.size,1),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.life),e.enableVertexAttribArray(this.attributes.life),e.vertexAttribPointer(this.attributes.life,1,e.FLOAT,!1,0,0),this.instancedArraysExt.vertexAttribDivisorANGLE(this.attributes.life,1),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.maxLife),e.enableVertexAttribArray(this.attributes.maxLife),e.vertexAttribPointer(this.attributes.maxLife,1,e.FLOAT,!1,0,0),this.instancedArraysExt.vertexAttribDivisorANGLE(this.attributes.maxLife,1),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.color),e.enableVertexAttribArray(this.attributes.color),e.vertexAttribPointer(this.attributes.color,3,e.FLOAT,!1,0,0),this.instancedArraysExt.vertexAttribDivisorANGLE(this.attributes.color,1),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.rotation),e.enableVertexAttribArray(this.attributes.rotation),e.vertexAttribPointer(this.attributes.rotation,1,e.FLOAT,!1,0,0),this.instancedArraysExt.vertexAttribDivisorANGLE(this.attributes.rotation,1),e.bindBuffer(e.ARRAY_BUFFER,this.buffers.opacity),e.enableVertexAttribArray(this.attributes.opacity),e.vertexAttribPointer(this.attributes.opacity,1,e.FLOAT,!1,0,0),this.instancedArraysExt.vertexAttribDivisorANGLE(this.attributes.opacity,1),this.attributes.glowIntensity>=0&&(e.bindBuffer(e.ARRAY_BUFFER,this.buffers.glowIntensity),e.enableVertexAttribArray(this.attributes.glowIntensity),e.vertexAttribPointer(this.attributes.glowIntensity,1,e.FLOAT,!1,0,0),this.instancedArraysExt.vertexAttribDivisorANGLE(this.attributes.glowIntensity,1)),this.attributes.bloomIntensity&&this.attributes.bloomIntensity>=0&&(e.bindBuffer(e.ARRAY_BUFFER,this.buffers.bloomIntensity),e.enableVertexAttribArray(this.attributes.bloomIntensity),e.vertexAttribPointer(this.attributes.bloomIntensity,1,e.FLOAT,!1,0,0),this.instancedArraysExt.vertexAttribDivisorANGLE(this.attributes.bloomIntensity,1)),this.attributes.trailLength&&this.attributes.trailLength>=0&&(e.bindBuffer(e.ARRAY_BUFFER,this.buffers.trailLength),e.enableVertexAttribArray(this.attributes.trailLength),e.vertexAttribPointer(this.attributes.trailLength,1,e.FLOAT,!1,0,0),this.instancedArraysExt.vertexAttribDivisorANGLE(this.attributes.trailLength,1))}setupBasicRendering(){let e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.buffers.position),e.enableVertexAttribArray(this.attributes.position),e.vertexAttribPointer(this.attributes.position,2,e.FLOAT,!1,0,0)}updateSingleParticle(e){let t=this.gl;t.uniform2f(this.uniforms.particlePos,e.x,e.y),t.uniform1f(this.uniforms.particleSize,e.size),t.uniform1f(this.uniforms.particleLife,e.life),t.uniform1f(this.uniforms.particleMaxLife,e.maxLife),t.uniform1f(this.uniforms.particleRotation,e.rotation),this.uniforms.particleOpacity&&t.uniform1f(this.uniforms.particleOpacity,e.opacity),this.uniforms.particleGlowIntensity&&t.uniform1f(this.uniforms.particleGlowIntensity,e.speedBasedGlow),this.uniforms.particleBloomIntensity&&t.uniform1f(this.uniforms.particleBloomIntensity,e.speedBasedBloom),this.uniforms.particleTrailLength&&t.uniform1f(this.uniforms.particleTrailLength,e.speedBasedTrailLength);let n=aH(e.color);t.uniform3f(this.uniforms.particleColor,n.r,n.g,n.b)}resize(e,t){this.gl.viewport(0,0,e,t),this.particleManager?.resize(e,t)}applyOverlayRepulsion(e){this.particleManager.applyOverlayRepulsion(e)}updateThemeMode(e){this.themeMode=e}dispose(){let e=this.gl;for(let t of Object.values(this.buffers))e.deleteBuffer(t);this.texture&&(e.deleteTexture(this.texture),this.texture=null),this.program&&e.deleteProgram(this.program)}constructor(e,t){if((0,ek._)(this,"canvas",void 0),(0,ek._)(this,"gl",void 0),(0,ek._)(this,"program",void 0),(0,ek._)(this,"buffers",void 0),(0,ek._)(this,"uniforms",void 0),(0,ek._)(this,"attributes",void 0),(0,ek._)(this,"texture",void 0),(0,ek._)(this,"instancedArraysExt",void 0),(0,ek._)(this,"particleManager",void 0),(0,ek._)(this,"themeMode",void 0),this.canvas=e,this.particleManager=new ParticleManager(e.width,e.height),this.themeMode=t,this.gl=e.getContext("webgl",{alpha:!0,depth:!1,stencil:!1,antialias:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,powerPreference:"default",colorSpace:"srgb"}),!this.gl)throw Error("WebGL not supported");this.program=this.gl.createProgram(),this.buffers={},this.uniforms={},this.attributes={},this.texture=null;const n=this.gl.getExtension("ANGLE_instanced_arrays");if(!n)throw Error("ANGLE_instanced_arrays not supported");this.instancedArraysExt=n,this.initGL(),this.loadShaders(),this.createParticleTexture()}};let a3=({className:e,width:t,height:n,themeMode:a})=>{let i=(0,o.useRef)(null),r=(0,o.useRef)(null),[s,c]=(0,o.useState)("loading");return(0,o.useEffect)(()=>{let e=i.current;if(!e)throw Error("Canvas not found");return r.current=new WebGLRendererEngine(e,a),c("ready"),()=>{r.current?.dispose()}},[]),(0,o.useEffect)(()=>{r.current?.resize(t,n)},[t,n]),(0,o.useEffect)(()=>{r.current?.updateThemeMode(a)},[a]),az({rendererRef:r,run:"ready"===s,width:t,height:n}),aw(i,{onApplyForce(e,t,n){r.current?.particleManager.applyForce(e,t,n)},onStartSpawning(e,t){r.current?.particleManager.startMouseSpawning(e,t)},onUpdateSpawnPosition(e,t){r.current?.particleManager.updateMouseSpawnPosition(e,t)},onStopSpawning(){r.current?.particleManager.stopMouseSpawning()}}),(0,l.jsx)("canvas",{ref:i,className:e,width:t,height:n})};try{a3.displayName||(a3.displayName="WebGLRenderer")}catch{}let a5=null,a4="LoadingParticles-module__canvas--hbFRr",a6=({className:e})=>{let{status:t}=(()=>{let[e,t]=(0,o.useState)(a5||"checking");return(0,o.useEffect)(()=>{a5?t(a5):(()=>{let e=null;try{let n=(e=document.createElement("canvas")).getContext("webgl",{failIfMajorPerformanceCaveat:!0});if(!n){a5="not-supported",t("not-supported");return}if(n instanceof WebGLRenderingContext||n instanceof WebGL2RenderingContext){let e=n.getExtension("WEBGL_lose_context");e&&e.loseContext()}a5="supported",t("supported")}catch{a5="not-supported",t("not-supported")}finally{e?.remove()}})()},[]),{status:e}})(),{colorScheme:n}=(0,tC.DP)(),a=["dark","night"].some(e=>n?.includes(e))?"dark":"light",[i,r]=o.useState({width:0,height:0}),s=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let e=()=>{if(s.current){let{width:e,height:t}=s.current.getBoundingClientRect();r({width:e,height:t})}};e();let t=new ResizeObserver(e);return s.current&&t.observe(s.current),()=>{t.disconnect()}},[]),(0,l.jsxs)("div",{ref:s,className:(0,y.$)("LoadingParticles-module__container--imSaf",e),children:[(0,l.jsx)(aQ,{}),"checking"===t?null:"supported"===t?(0,l.jsx)(a3,{className:a4,width:i.width,height:i.height,themeMode:a}):(0,l.jsx)(aZ,{className:a4,width:i.width,height:i.height,themeMode:a})]})};try{a6.displayName||(a6.displayName="LoadingParticles")}catch{}let a7="PreviewArea-module__iframe--fl_HS",a9="PreviewArea-module__iframeVisible--Vdt2i",a8="PreviewArea-module__iframeHidden--qiszt";async function ie(e,t,n){if(!e||!t)return;let a=performance.now(),i=new FormData;i.append("app",t.appName),i.append("user",t.userLogin),i.append("payload",t.payload),i.append("proxyPayload",t.proxyPayload),await fetch(`${e}`,{method:"POST",credentials:"include",body:i}),n("preview.cached.url.auth",{duration:performance.now()-a,v2:!0}),await new Promise(e=>setTimeout(e,200))}function it({show:e,onLoad:t,onError:n}){let{previewUrl:a}=(0,nI.yO)(),{acaJwtInfo:i}=(0,ty.B)(),[r,s]=(0,o.useState)(!1),c=(0,tB.s)();return((0,o.useEffect)(()=>{i&&a&&!r&&ie(a,i,c).then(()=>s(!0)).catch(e=>{tL.Ay.error("Preview authentication failed:",e),n?.(e)})},[a,i,c,r,n]),a&&r)?(0,l.jsx)("iframe",{id:nk.Jq,src:a,title:"Preview",style:{width:"100%",height:"100%",border:"none"},className:(0,y.$)(a7,e?a9:a8),allow:"geolocation; microphone; camera; midi; encrypted-media; clipboard-write; web-share",onLoad:t,sandbox:"allow-scripts allow-same-origin allow-forms allow-modals allow-popups allow-presentation"}):null}try{it.displayName||(it.displayName="CachedPreviewIframe")}catch{}let ia="CookieBanner-module__container--AbpNF",ii="CookieBanner-module__title--kx7tL",ir="CookieBanner-module__content--sPV1v",is="CookieBanner-module__sectionTitle--v6XGf",io="CookieBanner-module__link--bK1Qr";function il({websiteUrl:e}){return(0,l.jsxs)("div",{className:ia,children:[(0,l.jsx)("h2",{className:ii,children:"\u26A0\uFE0F Unsupported Browser"}),(0,l.jsx)("div",{className:ir,children:(0,l.jsxs)("section",{children:[(0,l.jsx)("h3",{className:is,children:"Inline live preview on iOS is currently supported only in Safari browser."}),e&&(0,l.jsxs)("p",{children:["You can still preview your Spark in another tab by"," ",(0,l.jsx)("a",{href:e,className:io,target:"_blank",rel:"noopener noreferrer",children:"clicking here."})]})]})})]})}function ic({browserVersion:e,websiteUrl:t,hideCookieBanner:n}){if(!1===e.isSafari&&e.isIos)return(0,l.jsx)(il,{websiteUrl:t});let a=ab(e);return(0,l.jsxs)("div",{className:ia,children:[(0,l.jsx)("h2",{className:ii,children:"\u26A0\uFE0F Cookie Support Required for App Preview"}),(0,l.jsxs)("div",{className:ir,children:[(0,l.jsxs)("section",{children:[(0,l.jsx)("h3",{className:is,children:"Problems with Safari"}),(0,l.jsxs)("p",{children:["The latest version of Safari (18.5+) has"," ",(0,l.jsx)("a",{href:"https://bugs.webkit.org/show_bug.cgi?id=292975",className:io,target:"_blank",rel:"noopener noreferrer",children:"a bug"})," ","preventing us from displaying embedded previews in Spark, which require partitioned cookie support to function properly."]}),a&&(0,l.jsxs)("p",{children:["Versions of Safari older than 18.4 will require that you"," ",(0,l.jsx)("a",{href:"https://gh.io/apple-support-upgrade-safari",className:io,target:"_blank",rel:"noopener noreferrer",children:"upgrade your Safari browser"})," ","once the above issue is fixed. An upgrade currently won't unlock embedded previews, however we do encourage you to stay current on your browser versions."]})]}),(0,l.jsxs)("section",{children:[(0,l.jsx)("h3",{className:is,children:"Alternative Solutions"}),t&&(0,l.jsxs)("p",{children:["You can view preview for your Spark in another tab or window by"," ",(0,l.jsx)("a",{href:t,className:io,target:"_blank",rel:"noopener noreferrer",children:"clicking here."})]}),(0,l.jsxs)("p",{children:["If you cannot upgrade your browser, you can enable third-party cookies in your current Safari version."," ",(0,l.jsx)("a",{href:"https://gh.io/apple-support-prevent-cross-site-tracking-safari",className:io,target:"_blank",rel:"noopener noreferrer",children:"Learn why this option is not preferred"})]}),(0,l.jsxs)("div",{className:"CookieBanner-module__instructions--OiSde",children:[(0,l.jsx)("h4",{className:is,children:"Instructions:"}),(0,l.jsxs)("ol",{className:"CookieBanner-module__orderedList--r9BU0",children:[(0,l.jsxs)("li",{children:["Open Safari ",">"," Settings..."]}),(0,l.jsxs)("li",{children:["Turn off the following settings:",(0,l.jsxs)("ul",{className:"CookieBanner-module__unorderedList--vf1_b",children:[(0,l.jsxs)("li",{children:["Advanced ",">"," Block all cookies"]}),(0,l.jsxs)("li",{children:["Privacy ",">"," Prevent cross-site tracking"]})]})]})]})]})]}),(0,l.jsx)("div",{className:"CookieBanner-module__checkboxWrapper--aLM0E",children:(0,l.jsxs)("label",{className:"CookieBanner-module__checkboxLabel--wZMaD",children:[(0,l.jsx)("input",{type:"checkbox",onChange:()=>n(),className:"CookieBanner-module__checkbox--LiOPV"}),(0,l.jsx)("span",{children:"I have enabled third-party cookies"})]})})]})]})}try{il.displayName||(il.displayName="NonSafariOnIos")}catch{}try{ic.displayName||(ic.displayName="CookieBanner")}catch{}var id=n(76720),iu=n(18754);let im="ErrorDisplay-module__codeText--tLJGU",ip="ErrorDisplay-module__errorMessage--SHpNx";function ih({error:e,linkCallback:t,showSource:n,truncate:a}){let i=(0,ns.e)();return e.path?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("p",{className:`mb-0 ${im} ErrorDisplay-module__errorContainer--ddJRI`,children:[n?(0,l.jsxs)(l.Fragment,{children:[ao(e.source)," at"]}):(0,l.jsx)(l.Fragment,{children:"At"}),(0,l.jsx)(l.Fragment,{children:"\xa0"}),e.path&&(0,l.jsxs)(l.Fragment,{children:[e.path?.includes("node_modules")?(0,l.jsx)("span",{className:"ErrorDisplay-module__errorPath--u4May",children:e.path}):(0,l.jsx)(F.A,{inline:!0,as:"button",className:"ErrorDisplay-module__errorLink--uqMS2",onClick:n=>{n.stopPropagation(),i(e.path,{showCode:!0}),t?.()},children:e.path}),e.location&&(0,l.jsxs)(l.Fragment,{children:[e.location," "]})]})]}),(0,l.jsx)("p",{className:`mb-0 ${im} ${ip} ${a?"ErrorDisplay-module__truncate1--Y30l4":""}`,children:e.messagePretty})]}):(0,l.jsxs)("p",{className:`mb-0 ${im} ${ip} ${a?"ErrorDisplay-module__truncate2--h2_xe":""}`,children:[n&&(0,l.jsxs)(l.Fragment,{children:[ao(e.source),": "]}),e.messagePretty]})}try{ih.displayName||(ih.displayName="ErrorDisplay")}catch{}let ig="ErrorOverlay-module__motion--umn6n";function iy(){let{overlayErrors:e}=ap(),{submitPrompt:t}=(0,iu.V)(),{isAgentBusy:n}=(0,p.dt)(),a=e[0],i=!n&&e.length>0;return(0,l.jsx)("div",{className:i?(0,y.$)(ig,"ErrorOverlay-module__motionVisible--ijDoF"):(0,y.$)(ig),children:(0,l.jsx)("div",{className:"ErrorOverlay-module__errorContent--dRiVO",children:(0,l.jsxs)(id.E,{children:[(0,l.jsx)(id.E.Visual,{children:(0,l.jsx)(g.LogIcon,{size:32})}),(0,l.jsx)(id.E.Heading,{children:(0,l.jsx)("span",{className:"ErrorOverlay-module__label--hd4Sh",children:"Hm, something went wrong"})}),a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(id.E.Description,{children:(0,l.jsx)(ih,{error:a,showSource:!0})}),t&&(0,l.jsx)(G.Q,{variant:"primary",leadingVisual:g.SparkleFillIcon,onClick:()=>{t(ae,"refine","attachments",{attachments:{errors:[{message:a.messageRaw}]}})},disabled:n,inactive:n,className:"mt-3",children:"Autofix error"})]})]})})})}try{iy.displayName||(iy.displayName="ErrorOverlay")}catch{}var ib=n(36523);function ix({show:e,onLoad:t,onError:n}){let{refreshPreview:a,previewBrowserRef:i}=(0,tI.zW)(),{state:r}=(0,ad.tp)(),[s,c]=(0,o.useState)(null),[d,u]=(0,o.useState)("inactive"),m=(0,ib.L)(i),{codespaceData:p}=(0,t2.M)(),h=p?.codespaceInfo?.environment_data?.friendlyName,{authenticateDevTunnelsPortForwarding:f}=af(),g=(0,n9._M)();(0,o.useEffect)(()=>{s&&r.viteServerReady&&!r.viteWsConnected&&a()},[s,r.viteWsConnected,r.viteServerReady,a]),(0,o.useEffect)(()=>{c(""),u("inactive")},[h]);let b=(0,o.useCallback)(async()=>{let{authed:e,url:t}=await f("5000","live_preview");if(!e)throw Error("Failed to authenticate dev tunnels port forwarding");await new Promise(e=>setTimeout(e,200)),c(t)},[f]);return(0,o.useEffect)(()=>{r.viteServerReady&&"authenticated"!==d&&b().then(()=>u("authenticated")).catch(e=>{tL.Ay.error("Live Preview authentication failed:",e),g({type:"SET_BANNER",banner:ax.x1.PREVIEW_AUTH_FAILED}),n?.(e)})},[n,r.viteServerReady,b,g,d]),(0,l.jsx)("iframe",{id:nk.$n,ref:m,src:s??"",title:"Preview",style:{width:"100%",height:"100%",border:"none"},className:(0,y.$)(a7,e?a9:a8),allow:"geolocation; microphone; camera; midi; encrypted-media; clipboard-write; web-share",sandbox:"allow-scripts allow-same-origin allow-forms allow-modals allow-popups allow-presentation",onLoad:e=>t?.(e,!s)})}try{ix.displayName||(ix.displayName="LivePreviewIframe")}catch{}let iv=["#218bff","#2da44e","#8250df","#d1242f"],iw=["M12 7A5 5 0 1 1 2 7a5 5 0 0 1 10 0Z","M3 3h8v8H3V3Z","M14 7C9.284 5.653 8.237 4.524 7 0 5.763 4.524 4.715 5.653 0 7c4.716 1.347 5.763 2.476 7 7 1.237-4.524 2.284-5.653 7-7Z"];function i_(){let e=(0,o.useRef)(null),t=(0,o.useRef)(null),n=(0,o.useRef)(null),a=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let i=t.current,r=e.current;if(!i||!r)return;let s=r.clientWidth,o=r.clientHeight,l=Math.min(window.devicePixelRatio,2);i.width=s*l,i.height=o*l;let c=i.getContext("2d");if(!c)return;c.setTransform(1,0,0,1,0,0),c.scale(l,l),n.current=ik(s,o);let d=performance.now();a.current=requestAnimationFrame(function e(t){let i=(t-d)/16.667;d=t,n.current&&c&&(n.current=n.current.map(e=>ij(e,s,o,i)),iE(c,n.current,s,o)),a.current=requestAnimationFrame(e)});let u=new ResizeObserver(e=>{let t=e[0];t&&i&&(s=t.contentRect.width,o=t.contentRect.height,l=Math.min(window.devicePixelRatio,2),i.width=s*l,i.height=o*l,c.setTransform(1,0,0,1,0,0),c.scale(l,l))});return u.observe(r),()=>{a.current&&cancelAnimationFrame(a.current),u.disconnect()}},[]),(0,l.jsx)("div",{ref:e,className:"CanvasParticles-module__container--SwKgr",children:(0,l.jsx)("canvas",{ref:t,className:"CanvasParticles-module__canvas--SJIrw"})})}let iS=e=>{if(0===e.length)throw Error("Cannot get random element from empty array");return e[Math.floor(Math.random()*e.length)]},iC=(e,t,n=!1,a=0)=>{let i=Math.random(),r=.8+.9*Math.random(),s=-(35e-5+35e-5*Math.random()*.1),o=iS(iv);return{x:i,y:n?1+.8*(1-a):1.05,scale:r,speed:s,color:o,shape:new Path2D(iS(iw)),rotation:Math.random()*Math.PI*2}},ik=(e,t)=>Array.from({length:80},(n,a)=>iC(e,t,!0,a/80)),iE=(e,t,n,a)=>{for(let i of(e.clearRect(0,0,n,a),t))e.save(),e.translate(i.x*n,i.y*a),e.rotate(i.rotation),e.scale(i.scale,i.scale),e.fillStyle=i.color,e.translate(7,7),e.fill(i.shape),e.restore()},ij=(e,t,n,a)=>{let i,r=Math.min(a,32),{speed:s,color:o,shape:l}=e,c=e.x,d=e.y,u=e.scale,m=e.rotation;return d+=s*r,m+=.01*r,(u=(i=- -((d-1)*1*.4)+1)<0?0:i>1?1:i,d<=.1)?iC(t,n,!1):{x:c,y:d,scale:u,speed:s,color:o,shape:l,rotation:m}};try{i_.displayName||(i_.displayName="CanvasParticles")}catch{}let iN=["Cookin' up something good","Making magic happen","Searching for greatness","Teaching robots new tricks","Translating human to computer","Sprinkling in some artificial intelligence","Assembling digital building blocks","Putting the micro in micro apps","Building tiny tech titans","Crafting code confections","Miniaturizing mighty ideas","Democratizing development","Consulting the silicon oracle","Downloading inspiration","Reticulating digital splines","Gathering ones and zeros","Converting caffeine to code","Herding binary cats","Untangling spaghetti code","Debugging rubber ducks","Optimizing quantum uncertainty","Defragmenting imagination","Compiling creative thoughts","Brainstorming with the machines","Mixing imagination with algorithms","Crafting digital experiences","Weaving code and creativity","Brewing up brilliant solutions","Painting with pixels","Sculpting in silicon","Orchestrating binary symphonies","Choreographing computational ballet","Dreaming in digital","Decoding your wishes","Teaching computers to speak human","Turning words into wonders","Processing prose into programs","Transforming talk into tech","Translating thoughts to things","Converting conversations to code","Whispering to the machines","Bridging human-computer small talk","Making bits and bytes bilingual","Charging flux capacitor","Engaging hyperdrive","Summoning digital wizards","Powering up the matrix","Initiating awesome sequence","Asking HAL nicely","Consulting Deep Thought","Warming up the holodeck","Rolling natural 20s","Fetching coffee for the AI","Teaching AI to high five","Downloading more RAM","Feeding the coding ninjas","Catching all the bugs","Generating random excuses","Researching blockchain buzzwords","Mining digital gold","Baking bits and bytes","Simmering solutions","Stirring the code soup","Adding a pinch of AI","Following grandma\u2019s secret algorithm","Marinating in machine learning","Growing digital gardens","Calculating butterfly effects","Observing code evolution","Applying Murphy\u2019s Law fixes","Channeling quantum inspiration","Dividing by zero (safely)","Tuning the algorithms","Composing code harmonies","Synchronizing binary beats","Dropping the bass (case)","Mixing the perfect batch","Forecasting feature weather","Generating idea storms","Cloud computing (literally)","Waiting for lightning inspiration","Broadcasting good vibes","Searching for aha moments","Strolling through latent space","Reseeding the RNG","Calibrating weirdness","Unrolling infinite loops","Recursing and recursing and","Aligning voxels","Rerolling until inspiration strikes","Convolving creative constructs","Hill climbing towards fun","Hypertuning hyperparameters","Reprompting metaprompts","Solving the halting problem","Dodging off-by-one errors","Centralizing edge cases","Repainting the bikeshed","Validating invalid assumptions","Overloading operators","Shaving a yak"];function iA({message:e}){return(0,l.jsxs)("div",{className:"PreviewOverlay-module__loadingDots--krods",children:[e,(0,l.jsx)("span",{className:"dot",style:{"--i":"0"},children:"."}),(0,l.jsx)("span",{className:"dot",style:{"--i":"1"},children:"."}),(0,l.jsx)("span",{className:"dot",style:{"--i":"2"},children:"."})]})}function iI({isLoading:e}){let[t,n]=(0,o.useState)(iN[0]),[a,i]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=new Set([t]),a=setInterval(()=>{let t=iN.filter(t=>!e.has(t)),a=t[Math.floor(Math.random()*t.length)];e.add(a),e.size===iN.length&&(e.clear(),e.add(a)),n(a)},5100);return()=>clearInterval(a)},[t]),(0,o.useEffect)(()=>{i(e)},[e]),(0,l.jsxs)("div",{className:(0,y.$)("PreviewOverlay-module__motion--M1TLG",{"PreviewOverlay-module__motionVisible--dG016":a}),children:[(0,l.jsx)(i_,{}),(0,l.jsxs)("div",{className:"PreviewOverlay-module__sparkleSpinnerContainer--HaoHk",children:[(0,l.jsx)(v,{}),(0,l.jsx)(iA,{message:t})]})]})}try{iA.displayName||(iA.displayName="LoadingDots")}catch{}try{iI.displayName||(iI.displayName="PreviewOverlay")}catch{}function iT({show:e,onLoad:t,onPreviewAvailableChange:n,onReady:a}){let i=(0,tB.s)(),{authenticateDevTunnelsPortForwarding:r}=af(),{codespaceData:s}=(0,t2.M)(),{isInitialIteration:c}=(0,tN.P9)(),{agentLifeCycle:d}=(0,ac.sU)(),{isAgentBusy:u}=(0,p.dt)(),m=s?.codespaceInfo?.environment_data.friendlyName,[h,f]=(0,o.useState)(null),[g,b]=(0,o.useState)("inactive"),x=(0,o.useRef)(null),v=(0,o.useRef)(!1),{getFileSyncerV2:w,fileSyncerStarted:_,syncerMode:S}=(0,tj.d)();return(0,o.useEffect)(()=>{if(!u||"ready"!==s.codespaceState||"inactive"!==g||c||"codespace"!==S||!_)return;let e=w();!e||v.current||(v.current=!0,f(null),(async()=>{let t=performance.now();x.current=t,i("preview.static.build.start",{timestamp:new Date().toISOString(),v2:!0,...ay(s)});try{await e.buildStaticPreview(),b("built"),n?.(!0),i("preview.static.build.success",{timestamp:new Date().toISOString(),v2:!0,duration:performance.now()-t,...ay(s)})}catch(e){tL.Ay.error("Failed to build static preview:",e),b("inactive"),n?.(!1),i("preview.static.build.error",{timestamp:new Date().toISOString(),duration:performance.now()-t,v2:!0,error:e instanceof Error?e.message:String(e),...ay(s)})}finally{v.current=!1}})())},[s,u,c,g,w,S,_]),(0,o.useEffect)(()=>{if(!u||"ready"!==s.codespaceState||"built"!==g)return;let e=null,t=null,a=performance.now();i("preview.static.server.poll.start",{timestamp:new Date().toISOString(),v2:!0,...ay(s)});let r=async()=>{try{let r=s?.remoteProvider?.tunnelProps,o=r?.domain??"app.github.dev",l=r?.connectAccessToken;if(!l||!m)return{authed:!1,url:""};let c=`https://${m}-${nk.w6}.${o}/`,d=new Headers;d.set("X-Tunnel-Authorization",`tunnel ${l}`),(await fetch(c,{signal:AbortSignal.timeout(500),headers:d})).ok&&(e&&window.clearInterval(e),t&&clearTimeout(t),b("running"),n?.(!0),i("preview.static.server.poll.success",{timestamp:new Date().toISOString(),duration:performance.now()-a,v2:!0,...ay(s)}))}catch{}};return r(),e=window.setInterval(r,500),t=setTimeout(()=>{"built"===g&&(e&&window.clearInterval(e),b("inactive"),n?.(!1),i("preview.static.server.poll.timeout",{timestamp:new Date().toISOString(),duration:performance.now()-a,timeoutMs:1e4,v2:!0,...ay(s)}))},1e4),()=>{e&&clearInterval(e),t&&clearTimeout(t)}},[s,s.codespaceState,s?.remoteProvider?.tunnelProps,m,u,c,g]),(0,o.useEffect)(()=>{u||"inactive"!==g&&(i("preview.static.deactivate",{timestamp:new Date().toISOString(),staticPreviewState:g,v2:!0,...ay(s)}),b("inactive"),n?.(!0),f(null),x.current=null)},[s,u,g,n]),(0,o.useEffect)(()=>{if(!u||"ready"!==s.codespaceState||"running"!==g)return;let e=null;return async function(){let t=performance.now();i("preview.static.auth.start",{timestamp:new Date().toISOString(),v2:!0,...ay(s)});let{authed:o,url:l}=await r(nk.w6,"static_preview");if(!o){tL.Ay.error("Failed to authenticate static preview"),b("inactive"),n?.(!1),i("preview.static.auth.error",{timestamp:new Date().toISOString(),duration:performance.now()-t,v2:!0,...ay(s)});return}await new Promise(t=>{e=setTimeout(t,200)}),u&&(f(l),b("authenticated"),"showPreviewRequested"!==d&&a?.(),i("preview.static.auth.success",{timestamp:new Date().toISOString(),duration:performance.now()-t,v2:!0,...ay(s)}),i("preview.static.activated",{timestamp:new Date().toISOString(),staticPreviewUrl:l,v2:!0,totalDuration:x.current?performance.now()-x.current:null,...ay(s)}))}(),()=>{e&&clearTimeout(e)}},[r,s,s.codespaceState,u,g,a,n,d]),(0,o.useEffect)(()=>{f(""),b("inactive")},[m]),(0,l.jsx)("iframe",{id:nk.Dj,src:h??"",title:"Preview",style:{width:"100%",height:"100%",border:"none"},className:(0,y.$)(a7,e?a9:a8),allow:"geolocation; microphone; camera; midi; encrypted-media; clipboard-write; web-share",sandbox:"allow-scripts allow-same-origin allow-forms allow-modals allow-popups allow-presentation",onLoad:e=>t?.(e,!h)})}try{iT.displayName||(iT.displayName="StaticPreviewIframe")}catch{}let iR={pill:"StatusPill-module__pill--j0dBI",visible:"StatusPill-module__visible--oQQIt",statusDot:"StatusPill-module__statusDot--WNIkz",statusMessage:"StatusPill-module__statusMessage--XJ2MB",loading:"StatusPill-module__loading--G84qK",pulseWithScale:"StatusPill-module__pulseWithScale--clylw",ready:"StatusPill-module__ready--Jecra",error:"StatusPill-module__error--EaiVZ"},iM=({state:e})=>{let[t,n]=(0,o.useState)(!1),[a,i]=(0,o.useState)(!0),r=(0,o.useRef)(null);return((0,o.useEffect)(()=>{if("ready"!==e){i(!0);let e=setTimeout(()=>{n(!0)},50);return()=>clearTimeout(e)}{let t=setTimeout(()=>{"ready"===e&&(n(!1),r.current=setTimeout(()=>{"ready"===e&&i(!1)},300))},2e3);return()=>{clearTimeout(t),r.current&&clearTimeout(r.current)}}},[e]),a)?(0,l.jsxs)("div",{className:(0,y.$)(iR.pill,t&&iR.visible,iR[e]),children:[(0,l.jsx)("div",{className:iR.statusDot}),(0,l.jsx)("span",{className:iR.statusMessage,children:(()=>{switch(e){case"ready":return"Ready";case"error":return"Error";default:return"Loading"}})()})]}):null};try{iM.displayName||(iM.displayName="StatusPill")}catch{}let iL=()=>{let e=(0,tB.s)(),t=(0,n6.i)(),{codespaceData:n}=(0,t2.M)(),{mobileViewActive:a,refreshPreview:i}=(0,tI.zW)(),{isAgentBusy:r}=(0,p.dt)(),{rehydrateCompleted:s,agentLifeCycle:c,setAgentLifeCycle:d}=(0,ac.sU)(),{state:u}=(0,ad.tp)(),{overlayErrors:m}=ap(),h=function(){let e,t=navigator.userAgent,n=t.match(/Version\/(\d+)\.(\d+)/),{isIOS:a}=(0,U.R0)(),i=a?(e=navigator.userAgent,/Safari/.test(e)&&!/CriOS|FxiOS|EdgiOS|OPiOS|DuckDuckGo|Brave/.test(e)):/^((?!chrome|android).)*safari/i.test(t);return i&&n?{isSafari:i,major:parseInt(n[1]??"0",10),minor:parseInt(n[2]??"0",10),isIos:a}:{isSafari:!1,isIos:a}}(),f=!1===h.isSafari?h.isIos:!!ab(h)||18===h.major&&h.minor>=5||h.major>=19,g=(0,n9._M)(),{banner:b}=(0,n9.vg)(),{onIFrameLoaded:x}=(0,ad.tp)(),[v,w]=(0,o.useState)(null),[_,S]=(0,o.useState)(null),[C,k]=(0,o.useState)({live:!1,static:!1,cached:!1}),[E,j]=(0,o.useState)(!1),[N,A]=(0,o.useState)("loading"),[I,T]=(0,o.useState)(!1),[R,M]=(0,o.useState)(!1),[L,P]=(0,o.useState)(!0),{isInitialIteration:D}=(0,tN.P9)(),$=(0,o.useMemo)(()=>performance.now(),[]),F=n?.codespaceInfo?.environment_data.friendlyName,O=r&&"showPreviewRequested"!==c,[B,W]=(0,n7.M)("spark:cookie-banner-override",!f),[V,G]=(0,o.useState)(f&&!B),z=(0,o.useCallback)(()=>{W(!0),G(!1)},[W]),H=(0,o.useCallback)(()=>{u.viteWsConnected||V||(e("preview.connection_reload_banner.displayed",{timestamp:new Date().toISOString(),rootElementEmpty:u.rootElementEmpty,viteServerReady:u.viteServerReady,viteWsConnected:u.viteWsConnected,v2:!0,...ay(n)}),g({type:"SET_BANNER",banner:ax.x1.CONNECTION_RELOAD}))},[n,g,e,V,u.rootElementEmpty,u.viteServerReady,u.viteWsConnected]),q=(0,o.useCallback)(()=>{b===ax.x1.CONNECTION_RELOAD&&g({type:"SET_BANNER",banner:void 0})},[b,g]),K=(0,o.useRef)(null);(0,o.useEffect)(()=>(s||n?.codespaceState!=="ready"||K.current||(K.current=setTimeout(()=>{M(!0),K.current=null},3e4)),()=>{K.current&&(clearTimeout(K.current),K.current=null)}),[s,n?.codespaceState]);let Y=(0,o.useCallback)(()=>{if(!O){if(!E){j(!0);let t=void 0!==n.readyTimestamp?performance.now()-n.readyTimestamp:-1;tL.Ay.log(`Live preview loaded duration ${t.toFixed(2)}ms`),e("preview.ready.success",{duration:t,v2:!0})}A("ready"),S("live")}},[O,E,e,n.readyTimestamp]);(0,o.useEffect)(()=>{n?.codespaceState==="ready"&&u.viteWsConnected&&(s||R||!u.rootElementEmpty)&&(s||tL.Ay.log("Rehydrate event not received, continuing anyways"),u.rootElementEmpty?T(!0):Y())},[n?.codespaceState,u.viteWsConnected,s,u.rootElementEmpty,Y,R]);let X=(0,o.useRef)(null);(0,o.useEffect)(()=>(I&&!X.current&&(X.current=setTimeout(()=>{Y(),X.current=null,T(!1)},3e3)),()=>{X.current&&(clearTimeout(X.current),X.current=null)}),[Y,I]),(0,o.useEffect)(()=>{let e=null;return _&&C[_]&&(e=setTimeout(()=>{"cached"===_&&A("loading"),w(_),S(null)},1e3)),()=>{e&&(clearTimeout(e),e=null)}},[C,_]);let Z=(0,o.useCallback)((e,t)=>{k(t=>({...t,[e]:!0})),"live"===e&&x(t)},[x]),J=O&&(D||!L),Q=!V&&(!v||J);(0,o.useEffect)(()=>{let e=null;async function t(n=2e3){await new Promise(t=>{e&&clearTimeout(e),e=setTimeout(t,n)})}if(r||!u.viteServerReady||!C.live)return void q();async function n(){await t(5e3),i(),await t(3e3),H()}return u.viteWsConnected?q():n(),()=>{e&&clearTimeout(e)}},[u.viteWsConnected,H,q,r,i,u.viteServerReady,C.live]),(0,o.useEffect)(()=>{if(u.viteServerReady){let t=void 0!==n.readyTimestamp?performance.now()-n.readyTimestamp:-1;tL.Ay.log(`viteServerReady duration ${t.toFixed(2)}ms`),e("preview.viteServerReady.success",{duration:t,v2:!0})}},[u.viteServerReady,n.readyTimestamp]),(0,o.useEffect)(()=>{if(u.viteWsConnected){let t=void 0!==n.readyTimestamp?performance.now()-n.readyTimestamp:-1;tL.Ay.log(`viteWsConnected duration ${t.toFixed(2)}ms`),e("preview.viteWsConnected.success",{duration:t,v2:!0})}},[u.viteWsConnected,n.readyTimestamp]),(0,o.useEffect)(()=>{if(s){let t=void 0!==n.readyTimestamp?performance.now()-n.readyTimestamp:-1;tL.Ay.log(`rehydrate duration ${t.toFixed(2)}ms`),e("preview.rehydrate.success",{duration:t,v2:!0})}},[s,n.readyTimestamp]),(0,o.useEffect)(()=>{e("preview.info",{isFetching:r,showCookieBanner:V,rootElementEmpty:u.rootElementEmpty,rootElementExists:u.rootElementExists,viteServerReady:u.viteServerReady,viteWsConnected:u.viteWsConnected,viteUpdated:u.viteUpdated,viteError:u.viteError,viteSessionId:u.viteSessionId,codespaceNamePresent:void 0!==F,showPreviewOverlay:Q,readOnlyState:"cached"===v,overlayErrors:m?.length||0,iframeToShow:v,v2:!0,...ay(n),timestamp:new Date().toISOString()}),t?.isStaff&&tL.Ay.log(`Empty app handling conditions:
        isAgentBusy: ${r}
        viteServerReady: ${u.viteServerReady}
        viteWsConnected: ${u.viteWsConnected}
        viteUpdated: ${u.viteUpdated}
        viteError: ${u.viteError}
        viteSessionId: ${u.viteSessionId}
        rootElementEmpty: ${u.rootElementEmpty}
        rootElementExists: ${u.rootElementExists}
        rehydrateCompleted: ${s}
        readOnlyMode: ${"cached"===v}
        overlayErrors: ${m?.length||0}
        iframeToShow: ${v}
        agentLifeCycle: ${c}
      `)},[F,r,V,Q,u.rootElementEmpty,u.viteServerReady,u.viteWsConnected,n,s,m?.length,v,c]);let ee=(0,o.useRef)(r);(0,o.useEffect)(()=>{let e=ee.current;ee.current=r,r&&"showPreviewRequested"===c?i():!r&&e&&("showPreviewRequested"!==c&&i(),d("idle"))},[r,c,i,d]);let et=(0,o.useCallback)(()=>{w("cached"),A("loading")},[]);(0,o.useEffect)(()=>{"live"!==v||C.live||(C.cached?et():w(null))},[v,C,et]);let en=(0,o.useMemo)(()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(it,{show:"cached"===v,onLoad:t=>{Z("cached",t),et();let n=(performance.now()-$).toFixed(2);tL.Ay.log(`Cached url loaded duration ${n}ms`),e("preview.cached.url.loaded",{duration:n,v2:!0})}}),(0,l.jsx)(ix,{show:"live"===v,onLoad:(e,t)=>{t?k(e=>({...e,live:!1})):Z("live",e)}}),(0,l.jsx)(iT,{show:"static"===v,onPreviewAvailableChange:e=>{P(e)},onReady:()=>{S("static")},onLoad:(e,t)=>{t?k(e=>({...e,static:!1})):Z("static",e)}})]}),[v,Z,et,$,e]);return(0,l.jsxs)("div",{id:nk.hL,className:(0,y.$)("PreviewArea-module__previewContainer--cS3lN",a&&"PreviewArea-module__previewContainerMobileBackground--uVIOX"),children:[!Q&&(0,l.jsx)(iM,{state:N}),(0,l.jsx)("div",{className:"PreviewArea-module__iframeWrapper--ZV6wC",children:(0,l.jsx)("div",{className:a?"PreviewArea-module__mobileFrame--UQxhm":void 0,children:en})}),(0,l.jsx)(ex.t,{fallback:(0,l.jsx)(iI,{isLoading:Q}),children:Q?(0,l.jsx)(a6,{}):null}),(0,l.jsx)(iy,{}),V&&(0,l.jsx)(ic,{browserVersion:h,websiteUrl:ag(n,"5000"),hideCookieBanner:z})]})};try{iL.displayName||(iL.displayName="PreviewAreaV2")}catch{}function iP({copilotCurrentTopic:e,Editor:t}){let n=(0,ty.B)(),{codespaceData:a}=(0,t2.M)(),{state:{isCollapsed:i},dispatch:r}=(0,n1.P)(),{workingMode:s}=(0,tI.zW)(),c=(0,o.useRef)(null),[d,u]=(0,o.useState)("hidden"),[m,p]=(0,o.useState)(!1),[h,f]=(0,o.useState)("preview"===s?"hidden":"idle"),[g,b]=(0,o.useState)("code"===s?"hidden":"idle"),x=(0,o.useRef)([]),v=(0,tB.s)(),w=(0,o.useCallback)(()=>{i&&v("terminal.open",{is_new:n2,is_connected:n2,codespace_state:a.codespaceState}),r({type:"TOGGLE_TERMINAL_IS_COLLAPSED",isCollapsed:!i})},[a.codespaceState,v,r,i]),_=(0,o.useCallback)(()=>{u(e=>"visible"===e?"hidden":"visible")},[]);(0,o.useEffect)(()=>{if(m){let e=setTimeout(()=>p(!1),1e3);return()=>clearTimeout(e)}},[m]),(0,o.useEffect)(()=>{"preview"===s&&"hidden"!==h&&"exiting"!==h?f("exiting"):"preview"!==s&&"hidden"===h&&f("entering"),"code"===s&&"hidden"!==g&&"exiting"!==g?b("exiting"):"code"!==s&&"hidden"===g&&b("entering");let e=x.current;return()=>{for(let t of e)clearTimeout(t)}},[s,h,g]),(0,o.useEffect)(()=>{if("exiting"===h){let e=setTimeout(()=>f("hidden"),300);x.current.push(e)}else if("entering"===h){let e=setTimeout(()=>f("idle"),300);x.current.push(e)}},[h,s]),(0,o.useEffect)(()=>{if("exiting"===g){let e=setTimeout(()=>b("hidden"),300);x.current.push(e)}else if("entering"===g){let e=setTimeout(()=>b("idle"),300);x.current.push(e)}},[g,s]);let S=(0,y.$)("MainContent-module__editorAndTerminal--veakR","entering"===h&&"MainContent-module__codeViewEntering--NdDbV","exiting"===h&&"MainContent-module__codeViewExiting--bdg_W","split"===s&&n4,"code"===s&&n3),C=(0,y.$)("MainContent-module__previewContainer--Vh92w","split"===s&&n4,"preview"===s&&n3,"entering"===g&&"MainContent-module__previewEntering--yqmrh","exiting"===g&&"MainContent-module__previewExiting--IWgL0");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"MainContent-module__container--rJGkK",children:(0,l.jsxs)("div",{className:"MainContent-module__contentContainer--yOVNM",children:[(0,l.jsx)("div",{className:S,children:(0,l.jsx)("div",{className:(0,y.$)("MainContent-module__editorContainer--Cc_Mc","hidden"!==h&&n5),children:(0,l.jsx)(t,{copilotAccessAllowed:n.copilotAccessAllowed,copilotCurrentTopic:e,onTerminalClick:w})})}),(0,l.jsx)("div",{ref:c,className:(0,y.$)(C,"hidden"!==g&&n5),children:(0,l.jsx)(iL,{})})]})}),(0,l.jsx)(n0.N,{detailsDialogVisibility:d,onDetailsClick:_,codespaceData:a})]})}try{iP.displayName||(iP.displayName="MainContent")}catch{}var iD=n(40235);function i$({channel:e}){let t=(0,o.useRef)(void 0),{getFileSyncerV2:n,forceContentRefresh:a,forceFileTreeRefresh:i}=(0,tj.d)(),r=(0,o.useCallback)(async()=>{let e=n();!e||t.current&&Date.now()-t.current<2e3||(t.current=Date.now(),await e.syncRepository()&&(a(),i()))},[a,i,n]);return(0,iD.x)(e,r),null}try{i$.displayName||(i$.displayName="RepositoryNotificationHandler")}catch{}var iF=n(24037),iO=n(83494);let iB="targeted-edits-input";function iU({element:e,onSubmit:t}){let{inputRef:n,lastFocusedButtonLocRef:a,themePanelRef:i}=(0,tA.kH)(),[r,s]=(0,o.useState)({top:0,left:0,width:0,height:0}),[c,d]=(0,o.useState)("");(0,o.useEffect)(()=>{let e=document.getElementById(nk.hL),t=()=>{let{top:t,left:n,width:a,height:i}=e.getBoundingClientRect();s({top:t,left:n,width:a,height:i})};t();let n=new ResizeObserver(()=>{t()});return n.observe(e),()=>{n.unobserve(e),n.disconnect()}},[]);let{position:u}=e,m=async n=>{n?.preventDefault(),0===c.trim().length||t(c,e.location??e.component.location)};return(0,l.jsx)("div",{id:iB,className:"TargetedEditsInput-module__container--SvIeS",style:{position:"fixed",zIndex:10,top:r.top+u.top+u.height+8,left:r.left+u.left+u.width/2,transform:"translateX(-50%)"},children:(0,l.jsx)(iO.tL,{commands:{"github:submit-form":()=>m()},children:(0,l.jsx)("form",{className:"TargetedEditsInput-module__form--nS08E",onSubmit:m,children:(0,l.jsx)(tQ.A,{ref:n,block:!0,trailingAction:(0,l.jsx)(tQ.A.Action,{type:"submit",icon:g.PaperAirplaneIcon,"aria-label":"Send now"}),placeholder:"Make a quick change here...",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{if("Escape"===e.key){e.preventDefault();let t=document.getElementById(nk.$n);if(t&&t.contentWindow){let e="*";if(t.src)try{e=new URL(t.src,window.location.origin).origin}catch{e="*"}t.contentWindow.postMessage({type:"spark:designer:bridge:restore-focus",buttonDataLoc:a.current},e)}}else if("Enter"===e.key&&e.shiftKey&&(e.preventDefault(),i.current)){let e=i.current.querySelector('button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])');e&&e.focus()}}})})})})}try{iU.displayName||(iU.displayName="TargetedEditsInput")}catch{}function iW({icon:e,title:t}){return(0,l.jsxs)("div",{className:"PanelBlankslate-module__container--NoK02",children:[(0,l.jsx)(e,{size:32}),(0,l.jsx)("span",{className:"fgColor-muted",children:t})]})}try{iW.displayName||(iW.displayName="PanelBlankslate")}catch{}var iV=n(4817),iG=n(50899),iz=n(5956);let iH=[".md",".tsx",".html",".ts",".css"],iq=({isExpanded:e,onExpandedChange:t,refinement:n,isActivelyGenerating:a})=>{let i=(0,ns.e)(),{latestAgentUpdate:r}=(0,ac.sU)(),{previousRefinementSha:s}=(0,tN.P9)(),{getFileSyncerV2:c,fileSyncerStarted:d}=(0,tj.d)(),{setOriginalFileContent:u,editorMode:m,setDiffComputed:p,editorPath:h}=(0,tE.m)(),f=Object.values(n.files??{}),[b,x]=(0,o.useState)(null),[v,w]=(0,o.useState)(null),[_,S]=(0,o.useState)(null),C=(0,o.useRef)(new Map),k=!!s;(0,o.useEffect)(()=>{"editor"===m&&(x(null),u(null))},[h,m,x,u]);let E=(0,o.useCallback)((e,t)=>{let n=C.current.get(t),a=e.currentTarget;n&&a&&n.contains(a)&&w(t)},[]),j=(0,o.useCallback)((e,t)=>{let n=C.current.get(t),a=e.relatedTarget;n&&a&&n.contains(a)||w(null)},[]),N=(0,o.useCallback)((e,t)=>{let n=C.current.get(t),a=e.relatedTarget;n&&a&&n.contains(a)||S(null)},[]),A=(0,o.useCallback)((e,t)=>{if(t?.parentElement){let n=t.closest("li");n&&C.current.set(e,n)}else C.current.delete(e)},[]),I=(0,o.useCallback)(e=>{i(e.fileName.replace(/^\/workspaces\/spark(?:-template)?\//,""),{showCode:!0}),x(null)},[i]),T=(0,o.useCallback)(async e=>{let t=c();if(t&&d&&s)try{let n=await t.getGitCatFile(s,e);u(n)}catch(t){tL.Ay.error("Error retrieving previousRefinementSha file content:",s,e,t),u("")}},[d,c,s,u]),R=(0,o.useCallback)(async e=>{if(!s)return;let{fileName:t}=e;if(b===t)return void I(e);x(t),u(null);let n=t.replace(/^\/workspaces\/spark(?:-template)?\//,"");T(n),p(!1),i(n,{editorMode:"diff-editor",showCode:!0})},[b,T,I,i,s,p,u]);return"from_repository"===n.iteration_type?null:0!==f.length||a?(0,l.jsxs)("div",{className:"border borderColor-muted rounded-3 bgColor-default",children:[(0,l.jsxs)("button",{onClick:()=>t(!e),"aria-expanded":e,className:(0,y.$)("AgentActivity-module__buttonNaked--vcCf4","AgentActivity-module__triggerButton--XfOLN","text-small",{"rounded-bottom-3":!e}),children:[(0,l.jsx)(g.ChevronRightIcon,{size:16,"data-expanded":e,className:"AgentActivity-module__chevron--ECKKZ"}),a?(0,l.jsx)(iZ,{children:"Generating"}):(0,l.jsx)("span",{children:`Made ${f.length} change${1!==f.length?"s":""}`})]}),e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"border-top borderColor-muted",children:f.length>0&&(0,l.jsx)(eU.l,{children:f.map(e=>{let t=k&&"update"===e.editType&&iH.some(t=>e.fileName.endsWith(t))&&(v===e.fileName||_===e.fileName||b===e.fileName);return(0,l.jsxs)(eU.l.Item,{ref:t=>{A(e.fileName,t)},onSelect:()=>I(e),onMouseEnter:t=>E(t,e.fileName),onMouseLeave:t=>j(t,e.fileName),onFocus:()=>S(e.fileName),onBlur:t=>N(t,e.fileName),"aria-label":`Open ${iY(e.fileName)}`,"aria-labelledby":void 0,children:[(0,l.jsxs)("div",{className:"d-flex flex-row gap-2 flex-items-center py-0",children:[iX(e.editType),(0,l.jsx)("div",{children:iY(e.fileName)})]}),t&&(0,l.jsx)(eU.l.TrailingAction,{className:(0,y.$)("AgentActivity-module__diffButton--JdqAz",b===e.fileName&&"AgentActivity-module__diffButtonActive--PpEsn"),label:"View diff",icon:g.DiffIcon,onClick:()=>R(e),onMouseLeave:t=>j(t,e.fileName),onBlur:t=>N(t,e.fileName)})]},e.fileName)})})}),a&&(0,l.jsxs)("div",{className:(0,y.$)("AgentActivity-module__agentMessageContainer--AFAtH",{"mt-3":0===f.length}),children:[(0,l.jsx)(g.CopilotIcon,{className:"AgentActivity-module__copilotIcon--nVzP3"}),(0,l.jsx)(iK,{text:r||"Copilot is thinking",speed:30})]})]})]}):(0,l.jsx)("div",{className:"AgentActivity-module__containerNoChanges--G8qlB",children:"No changes made"})},iK=({text:e,speed:t=50})=>{let[n,a]=(0,o.useState)(""),[i,r]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let n=0;a(""),r(!1);let i=setInterval(()=>{a(e.slice(0,++n)),n===e.length&&(clearInterval(i),r(!0))},t);return()=>clearInterval(i)},[e,t]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"sr-only","aria-live":"polite",children:i?e:""}),(0,l.jsxs)("span",{className:"text-small fgColor-muted","aria-hidden":"true",children:[n,i&&(0,l.jsx)("span",{className:"AgentActivity-module__dots--P6li1"})]})]})},iY=e=>{if(!e)return"";let t=e.lastIndexOf("/");return -1!==t?e.slice(t+1):e},iX=e=>{switch(e){case"create":return(0,l.jsx)(g.FileAddedIcon,{className:"fgColor-success"});case"update":return(0,l.jsx)(g.FileDiffIcon,{className:"fgColor-muted"});case"delete":return(0,l.jsx)(g.FileRemovedIcon,{className:"fgColor-danger"});default:return(0,l.jsx)(g.FileCodeIcon,{className:"fgColor-muted"})}},iZ=({children:e,className:t})=>(0,l.jsx)("div",{className:(0,y.$)("AgentActivity-module__shimmerText--keE1N",t),children:e});try{iq.displayName||(iq.displayName="AgentActivity")}catch{}try{iK.displayName||(iK.displayName="Typewriter")}catch{}try{iZ.displayName||(iZ.displayName="WithShimmerEffect")}catch{}var iJ=n(56149);let iQ="Suggestions-module__transitionWrapper--eu8tp",i0="Suggestions-module__headerText--pjzuQ",i1="Suggestions-module__suggestionsList--fZm_K",i2="workbench-suggestions-expanded",i3=()=>{try{let e=localStorage.getItem(i2);return null===e||"true"===e}catch{return!0}},i5=({suggestions:e,errors:t,onSelectSuggestion:n,attachAll:a,fixAll:i})=>{let[r,s]=(0,o.useState)(()=>i3()),c=(0,o.useRef)(!1),d=t.filter(e=>!e.dismissed),{isAgentBusy:u}=(0,p.dt)(),m=!u&&d.length>0,[h,f]=(0,o.useState)(),b=(0,tD.c)(tD.U.GENERATE_ACTIONS),x=t.some(e=>e.attached);(0,o.useEffect)(()=>{u?c.current||(s(!1),c.current=!0):(c.current=!1,s(i3()))},[u]);let v=(0,o.useRef)(null);(0,o.useEffect)(()=>{v.current&&(0,iJ.cw)(v.current,"exampleBox-dialog")},[v]);let w=m?r?"Hide errors":"Show errors":r?"Hide suggestions":"Show suggestions",_=m?"error-list":"suggestion-list";return(0,l.jsxs)("div",{className:(0,y.$)("Suggestions-module__container--ELC_r",r?"Suggestions-module__containerExpanded--svTDG":"Suggestions-module__containerCollapsed--arTMD"),children:[(0,l.jsxs)("div",{className:(0,y.$)("Suggestions-module__header--vRpMp",m&&!t.some(e=>!e.attached)&&"mb-2"),children:[(0,l.jsxs)("span",{className:(0,y.$)("Suggestions-module__headerSummary--dXj5a"),children:[(0,l.jsx)(G.Q,{variant:"invisible","aria-expanded":r,"aria-controls":_,className:"px-2 bgColor-transparent",onClick:()=>{s(e=>{let t=!e;try{localStorage.setItem(i2,String(t))}catch{}return t})},"aria-label":w,children:(0,l.jsx)(g.ChevronRightIcon,{className:(0,y.$)("Suggestions-module__chevron--T1T2O","fgColor-muted"),"data-expanded":r})}),m?(0,l.jsx)("span",{className:`${i0} Suggestions-module__headerTextError--T2U0S`,children:`${t.length} Error${1===t.length?"":"s"}`}):(0,l.jsx)("span",{className:i0,children:"Suggestions"})]}),m&&(0,l.jsxs)("div",{className:"d-flex flex-row gap-1",children:[(0,l.jsx)(G.Q,{className:"ml-auto",size:"small",variant:"default",leadingVisual:g.PaperclipIcon,onClick:()=>a(!x),disabled:b,children:x?"Remove":"Attach"}),(0,l.jsx)(G.Q,{size:"small",variant:"primary",onClick:i,disabled:b,children:"Fix all"})]})]}),!m&&e&&!u&&(0,l.jsx)("div",{id:_,className:iQ,children:(0,l.jsx)(eU.l,{className:(0,y.$)(i1,"pb-2"),children:e.map(e=>(0,l.jsxs)(eU.l.Item,{onSelect:()=>n(e),role:"button",tabIndex:r?0:-1,disabled:b,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.LightBulbIcon,{className:"Suggestions-module__suggestionIcon--EL6nF"})}),e]},e))})}),u&&!m&&(0,l.jsx)("div",{className:iQ,children:(0,l.jsx)(i4,{})}),m&&t.some(e=>!e.attached)&&(0,l.jsx)("div",{id:_,className:(0,y.$)(i1,iQ,"pb-2 mx-2"),children:(0,l.jsx)(eU.l,{variant:"full",children:t.map((e,t)=>e.attached||e.dismissed?null:(0,l.jsx)("div",{className:"Suggestions-module__errorContainer--lK4Tk",children:(0,l.jsxs)(eU.l.Item,{"data-testid":`attach-error-${t}`,onSelect:()=>{f(t)},className:"Suggestions-module__actionListItem--DmPxO",tabIndex:r?0:-1,children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.BugIcon,{className:"fgColor-danger"})}),(0,l.jsx)(ih,{error:e,truncate:!0})]})},e.messageRaw))})}),(!!h||0===h)&&(0,l.jsx)(nx.l,{onClose:()=>f(void 0),title:ao(t[h]?.source),renderFooter:()=>(0,l.jsxs)("div",{className:"border-top Suggestions-module__dialogFooter--g46Cr",children:[t.length>1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(D.K,{"aria-label":"Previous error",size:"small",variant:"invisible",icon:g.ChevronLeftIcon,onClick:()=>{f(e=>void 0===e?e:0===e?t.length-1:e-1)}}),(0,l.jsx)("span",{className:"fgColor-muted",children:`${t.findIndex((e,t)=>t===h)+1} / ${t.length}`}),(0,l.jsx)(D.K,{"aria-label":"Next error",size:"small",variant:"invisible",icon:g.ChevronRightIcon,onClick:()=>{f(e=>void 0===e?e:e===t.length-1?0:e+1)}})]}),(0,l.jsx)(G.Q,{size:"small",variant:"default",className:"ml-auto",onClick:()=>{let e;return e=(t[h]?.messageRaw||"").replace(/\s+/g," ").trim(),void navigator.clipboard.writeText(e)},children:"Copy"}),(0,l.jsx)(G.Q,{size:"small",variant:"default",leadingVisual:g.PaperclipIcon,onClick:()=>{a(!0),f(void 0)},children:"Attach"}),(0,l.jsx)(G.Q,{size:"small",variant:"primary",onClick:()=>{i(),f(void 0)},children:"Fix all"})]}),renderBody:()=>(0,l.jsx)("div",{className:"Suggestions-module__errorContentContainer--Dg84t",children:t[h]&&(0,l.jsx)(ih,{error:t[h],linkCallback:()=>f(void 0)})})})]})},i4=()=>(0,l.jsx)("div",{className:"px-3 pb-2",children:[60,70,80].map(e=>(0,l.jsx)(nt.r,{lines:1,maxWidth:`${e}%`,className:"mb-2"},e))});try{i5.displayName||(i5.displayName="Suggestions")}catch{}try{i4.displayName||(i4.displayName="SuggestionSkeleton")}catch{}var i6=n(63279);let i7="IteratePanel-module__activityItem--g26Qm",i9="IteratePanel-module__refinement--ASoR4",i8="IteratePanel-module__alertBanner--l3BSP",re=e=>({errors:e.map(e=>({message:e.messageRaw}))}),rt=({workbenchData:e})=>{let{cancelPrompt:t,submitPrompt:n,setIsMobileSidebarOpen:a,suggestions:i=[]}=e,{isAgentBusy:r}=(0,p.dt)(),{promptText:s,setPromptText:c,pendingSubmission:d,promptError:u,setPromptError:m,promptImage:h,attachImage:f,attachImageFromFile:b,clearImageAttachment:x,imageUploadError:v,setImageUploadError:_}=(0,w.Cq)(),{previousRefinements:S,currentRefinementSha:C,refreshGitHistory:k,setIsNavigatingHistory:E,gitHistoryRestored:j}=(0,tN.P9)(),{updateWorkbenchCurrentRefinement:A}=(0,iu.V)(),{codespaceData:I}=(0,t2.M)(),{friendlyName:T}=I.codespaceInfo?.environment_data||{},R=I.remoteProvider?.tunnelProps.domain??"app.github.dev",M=I.codespaceInfo?.environment_data.connection.tunnelProperties?.connectAccessToken||"",$=!!T&&!!R&&!!M&&"ready"===I.codespaceState,{iterateErrors:F,deployBuildErrors:O,setDeployBuildErrors:B}=ap(),[V,G]=(0,o.useState)([]),z=V.filter(e=>e.attached),H=(0,tD.c)(tD.U.GENERATE_ACTIONS),{isDragOver:q,handleDragEnter:K,handleDragOver:Y,handleDragLeave:X,handleDrop:Z,handlePaste:J}=W({attachImageFromFile:b,isDisabled:r||H,onSuccess:e=>(0,nj.i)(`Image ${"drop"===e?"attached":"pasted and attached"}`),onError:e=>(0,nj.i)(`Failed to ${"drop"===e?"attach":"paste"} image`)}),Q=(0,o.useRef)(null),ee=(0,o.useRef)(null),et=(0,o.useRef)(null),en=(0,o.useRef)(null),ea=(0,o.useRef)(null),ei=(0,tB.s)(),{fileSyncerStarted:er,syncerMode:es,getFileSyncerV2:eo,forceContentRefresh:el,forceFileTreeRefresh:ec}=(0,tj.d)(),{reloadQuota:ed}=(0,p.MY)(),eu=S.length?"refine":"generate",em=!H&&$&&!r&&j,ep=(0,o.useCallback)(e=>{let t=Q.current;t&&(t.value=e??d?.promptText??"",t.style.height="auto",t.style.height=`${t.scrollHeight}px`)},[Q,d?.promptText]);(0,o.useEffect)(()=>{ep(s)},[s,ep]);let eh=(0,o.useMemo)(()=>S.find(e=>e.sha===C),[C,S]),ef=(0,o.useMemo)(()=>eh?.suggestions?.length?eh.suggestions:i,[eh,i]);(0,o.useLayoutEffect)(()=>{let e=setTimeout(()=>{let e=document.querySelector('[data-timeline-refinement-active="true"]');e&&e.scrollIntoView({block:"start",behavior:"smooth"})},100);return()=>{clearTimeout(e)}},[]);let eg=(0,o.useRef)(S.length);(0,o.useEffect)(()=>{S.length!==eg.current&&(ea.current?.scrollTo({top:ea.current.scrollHeight,behavior:"smooth"}),eg.current=S.length)},[S]);let[ey,eb]=(0,o.useState)(eh);(0,o.useEffect)(()=>{G(e=>{let t=new Map(e.map(e=>[e.messageRaw,{attached:e.attached,dismissed:e.dismissed}]));return F.map(e=>({source:e.source,messageRaw:e.messageRaw,messagePretty:e.messagePretty,path:e.path,line:e.line,column:e.column,location:e.location,attached:t.get(e.messageRaw)?.attached??!1,dismissed:t.get(e.messageRaw)?.dismissed??!1}))})},[F]),(0,o.useEffect)(()=>{v&&ee.current?.focus()},[v]);let ex=(0,o.useCallback)(e=>{G(t=>t.map(t=>({...t,attached:e})))},[]),ev=(0,iG.K)(async(e,t,i)=>{let r;if(!$)return;ed(),ep(""),B([]),a(!1),m(null);let s=re(z);r=await n(e,eu,t,{attachments:s,additionalTelemetryProperties:i}),0!==s.errors.length&&ex(!1),r?.success||(ep(e),B(O),m(r?.error?.message??"Failed to process prompt."))}),ew=(0,o.useCallback)(e=>{if(!(0,N.G7)("spark_prompt_recall"))return;let t=S.filter(e=>"ai"===e.iteration_type),[n,a]=["ArrowUp"===e.key,"ArrowDown"===e.key];if(!Q.current||!n&&!a||e.nativeEvent.isComposing)return;let i=Q.current.selectionStart,r=i===Q.current.selectionEnd,s=Q.current.textLength;if(r&&0===i&&n)if(e.preventDefault(),ey){let e=t.find(e=>e.id===ey.parentId);if(!e?.prompt)return;eb(e),ep(e.prompt),Q.current.setSelectionRange(0,0)}else eb(t.at(-1)),ep(t.at(-1)?.prompt??""),Q.current.setSelectionRange(0,0);if(r&&i===s&&a&&ey){e.preventDefault();let n=t.find(e=>e.parentId===ey.id);n?.prompt?(eb(n),ep(n.prompt??""),Q.current.setSelectionRange(n.prompt.length,n.prompt.length)):(eb(void 0),ep(""))}},[S,ey,ep]),e_=(0,o.useCallback)(e=>{ew(e);let t="Enter"===e.key;!t||e.shiftKey||(0,U.Fr)()||t&&e.nativeEvent.isComposing||(e.preventDefault(),ev(Q.current.value,"iterate_prompt"))},[Q,ev,ew]),eS=(0,o.useCallback)(async e=>{if(!er||"codespace"!==es)return;let t=eo();if(!t)return;let n=!e.branchName&&e.sha||"";await t?.checkoutCommitish(n,!0,e.branchName),A(e.id),await k(),el(),ec()},[er,es,eo,A,k,el,ec]),eC=(0,o.useCallback)(async t=>{E(!0),ei("iteration_history.previous_iteration_selected",{refinementId:t.id,workbenchId:e.id});try{await eS(t)}catch(e){ei("iteration_history.previous_iteration_selected_error",{...null!=t.id&&{refinementId:t.id},...null!=t.sha&&{refinementSha:t.sha},error:e.message})}finally{E(!1)}},[eS,ei,E,e.id]),ek=(0,o.useMemo)(()=>S.map(e=>({...e,prompt:e.prompt?.includes(at)?e.prompt.split(at)[0]:e.prompt})),[S]);return(0,l.jsxs)("div",{className:"IteratePanel-module__container--VuOXS",children:[(0,l.jsx)(i6.I,{scrollingRef:ea}),(0,l.jsx)("div",{ref:ea,className:"IteratePanel-module__contentArea--OMF9P",children:(0,l.jsx)(ra,{previousRefinements:ek.map(e=>({...e,prompt:e.prompt?.includes(at)?e.prompt.split(at)[0]:e.prompt})),onSelectRefinement:eC,activeRefinement:eh})}),v&&(0,l.jsx)(L.l,{className:i8,ref:ee,variant:"critical",title:"Error attaching image",description:v,hideTitle:!0,onDismiss:()=>{en.current?.focus(),_(void 0)}}),u&&(0,l.jsx)(L.l,{className:i8,variant:"critical",title:"Failed",description:u,hideTitle:!0,onDismiss:()=>{Q.current?.focus(),m(null)}}),em&&(ef.length>0||V.length>0)&&(0,l.jsx)(i5,{suggestions:ef,errors:V,onSelectSuggestion:e=>{ev(e,"suggestion",{suggestion_text:e,rank:ef.indexOf(e)})},attachAll:ex,fixAll:()=>{0===V.length||(n(ae,eu,"attachments",{attachments:re(V)}),ex(!1),B([]))}}),(0,l.jsxs)("form",{className:"IteratePanel-module__formContainer--QnWKv",onSubmit:e=>{e.preventDefault(),em&&ev(Q.current.value,"iterate_prompt")},children:[(0,l.jsx)(P.Ay,{id:"iterate-modal-input","data-testid":"iterate-modal-input",ref:Q,className:(0,y.$)("IteratePanel-module__promptInputContainer--wXWv8",q&&"IteratePanel-module__promptInputContainerDragOver--xkqlI"),block:!0,rows:1,resize:"none",placeholder:em?"What do you want to change?":"Copilot is working...",onChange:e=>ep(e.target.value),onKeyDown:e_,onBlur:e=>c(e.target.value),onPaste:J,onDragEnter:K,onDragOver:Y,onDragLeave:X,onDrop:Z,disabled:!em}),(0,l.jsxs)("div",{className:"IteratePanel-module__formContainerActions--aRykK",children:[h&&(0,l.jsx)("div",{role:"toolbar","aria-label":"Attachments",className:"IteratePanel-module__attachmentToolbar--LT5Np",children:(0,l.jsxs)("div",{className:"IteratePanel-module__referenceToken--jN2Wp",children:[(0,l.jsx)(g.ImageIcon,{className:"fgColor-muted"}),(0,l.jsx)("span",{className:"IteratePanel-module__referenceTokenLabel--UYZjK",children:h.name}),(0,l.jsx)(D.K,{icon:g.XIcon,variant:"invisible",size:"small","aria-label":"Remove image",onClick:()=>{x(),(0,nj.i)("Image removed"),Q.current?.focus()}})]})}),(0,l.jsxs)("div",{className:"d-flex flex-items-center gap-1",children:[!h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(D.K,{variant:"invisible",icon:g.PaperclipIcon,"aria-label":"Attach image",ref:en,onClick:()=>et.current?.click(),disabled:!em}),(0,l.jsx)("input",{id:"image-uploader",hidden:!0,ref:et,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:f})]}),r?(0,l.jsx)(D.K,{className:"IteratePanel-module__stopButton--YUIzu","aria-label":"Stop current generation",icon:g.SquareFillIcon,variant:"invisible",onClick:e=>{e.preventDefault(),e.stopPropagation(),t()}}):(0,l.jsx)(D.K,{"aria-label":$?"Send now":"Establishing connection\u2026",icon:g.PaperAirplaneIcon,variant:"invisible",type:"submit",inactive:!em,disabled:!em})]})]})]})]})},rn=e=>e.id?e.id:e.sha?e.sha:Object.keys(e.files).join(":"),ra=({activeRefinement:e,previousRefinements:t,onSelectRefinement:n})=>{let a=(0,o.useMemo)(()=>((e,t)=>{let n=e=>void 0!==e.sha?e.sha:e.id,a=e=>void 0!==e.parentSha?e.parentSha:e.parentId,i=new Map(t.map(e=>[e.id,e])),r=new Map(t.map(e=>[e.sha,e])),s=[...t].reverse(),o=[],l=new Set;for(let t=e;t;){let e=n(t);if(null!=e&&l.has(e))break;null!=e&&l.add(e),o.push(t);let s=a(t);t=s&&"string"==typeof s&&r.has(s)?r.get(s):s?i.get(s):void 0}let c=[],d=0,u=0;for(;d<s.length;){let e=s[d],t=e?n(e):void 0,a=o[u]?n(o[u]):void 0;if(t!==a&&0===u)c.push({type:"refinement",refinement:e}),d++;else if(t===a)c.push({type:"refinement",refinement:e}),d++,u++;else{let e=[],t=o[u]?n(o[u]):void 0;for(;d<s.length&&s[d]&&n(s[d])!==t;d++){let t=s[d];t&&e.push(t)}e.length&&c.push({type:"skip",skippedRefinements:e.reverse()})}}return c.reverse()})(e,t),[e,t]),i=(0,o.useMemo)(()=>a.findLastIndex(e=>e?.type==="refinement")??a.length-1,[a]);return(0,l.jsx)("div",{className:"IteratePanel-module__activityLogContainer--HhEIR",children:(0,l.jsx)(iz.A,{children:a.map((e,t)=>{if("refinement"===e.type){let{refinement:a}=e;return(0,l.jsx)(rr,{refinement:a,isLastRefinement:t===i,isFirstRefinement:0===t,onSelectRefinement:n},rn(e.refinement))}if("skip"===e.type){let t=e.skippedRefinements;return(0,l.jsx)("div",{className:"IteratePanel-module__skippedActivityContainer--tHq5h",children:(0,l.jsx)(rd,{skippedRefinements:t,onSelectRefinement:n})},t.map(e=>rn(e)).join("-"))}})})})};function ri(e){return e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight}let rr=({variant:e="default",refinement:t,isLastRefinement:n,isFirstRefinement:a,onSelectRefinement:i})=>{let{deploymentSha:r}=(0,nI.yO)(),[s,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=document.querySelector(`[data-timeline-refinement-id="${t.id}"] .${i9}`);e&&ri(e)?c(!0):c(!1)},[t.id]);let{isNavigatingHistory:m,currentRefinementSha:h,gitHistoryRestored:f}=(0,tN.P9)(),{fileSyncerStarted:b,syncerMode:x}=(0,tj.d)(),{status:v,isAgentBusy:w}=(0,p.dt)(),_=b&&"codespace"===x&&!w&&!m&&!t.error&&f,S="default"===e,C=(0,o.useMemo)(()=>!!w&&!!n||!!n&&"user"===t.iteration_type&&t.sha===tN.zJ&&h===tN.zJ||null!=t.sha&&t.sha===h,[w,n,t.iteration_type,t.sha,h]),k=t.sha&&r&&t.sha===r,E=(v===p.i.GENERATING||v===p.i.WILL_GENERATE_INITIAL)&&n;return(0,l.jsxs)(iz.A.Item,{condensed:!0,"data-timeline-refinement-id":t.id,"data-timeline-refinement-active":C,"data-timeline-badge":S,className:(0,y.$)("IteratePanel-module__timelineItem--veMvH","ml-1",{"IteratePanel-module__lastTimelineItem--FV1f1":n,"IteratePanel-module__firstTimelineItem--uzU6y":a}),children:[S&&(0,l.jsxs)(iz.A.Badge,{className:"IteratePanel-module__timelineBadge--BH07s",children:[(0,l.jsx)(g.DotFillIcon,{className:(0,y.$)({"fgColor-accent":C&&!k,"fgColor-success":k})}),k&&(0,l.jsx)("span",{className:"IteratePanel-module__pulsingDot--Q9Kma"})]}),(0,l.jsxs)(iz.A.Body,{tabIndex:0,className:"IteratePanel-module__timelineBody--mPiO4",children:["skipped"===e?(0,l.jsx)(rc,{refinement:t,collapsed:d}):C?(0,l.jsx)(ro,{refinement:t,isActivelyGenerating:E,collapsed:d}):(0,l.jsx)(rl,{refinement:t,collapsed:d}),(0,l.jsxs)("div",{className:"IteratePanel-module__actionsContainer--l6LGp",children:["ai"===t.iteration_type&&(0,l.jsxs)(l.Fragment,{children:[s&&(0,l.jsx)(D.K,{variant:C?"invisible":"default",size:"small",icon:d?g.UnfoldIcon:g.FoldIcon,"aria-label":d?"Expand prompt":"Collapse prompt",onClick:()=>{u(e=>!e),(0,nj.i)(d?"Prompt expanded":"Prompt collapsed")}}),(0,l.jsx)(nN.T,{variant:C?"invisible":"default",size:"small",textToCopy:t.prompt??"",ariaLabel:"Copy prompt"})]}),!C&&(0,l.jsx)(G.Q,{size:"small",variant:"default",onClick:()=>i(t),disabled:!1===_,children:"Restore"})]}),(0,l.jsx)("div",{className:"IteratePanel-module__actionsContainerTouchOnly--tA49i",children:(0,l.jsxs)(t5.W,{children:[(0,l.jsx)(t5.W.Anchor,{children:(0,l.jsx)(D.K,{icon:g.KebabHorizontalIcon,variant:"invisible","aria-label":"More actions"})}),(0,l.jsx)(t5.W.Overlay,{width:"auto",children:(0,l.jsxs)(eU.l,{children:[(0,l.jsxs)(eU.l.Item,{disabled:C||!1===_,onSelect:()=>{i(t)},children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.HistoryIcon,{})}),"Restore"]}),"ai"===t.iteration_type&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eU.l.Item,{onSelect:()=>{(0,tf.D)(t.prompt??"")},children:[(0,l.jsx)(eU.l.LeadingVisual,{children:(0,l.jsx)(g.CopyIcon,{})}),"Copy prompt"]}),s&&(0,l.jsxs)(eU.l.Item,{onSelect:()=>{u(e=>!e)},children:[(0,l.jsx)(eU.l.LeadingVisual,{children:d?(0,l.jsx)(g.UnfoldIcon,{}):(0,l.jsx)(g.FoldIcon,{})}),(0,l.jsx)("span",{children:d?"Expand prompt":"Collapse prompt"})]})]})]})})]})})]})]})},rs=({refinement:e,collapsed:t,active:n})=>{let a=(0,o.useMemo)(()=>e.prompt?.replaceAll(`

`,`
`)??"",[e.prompt]),[i,r]=(0,o.useState)(!1),s=(0,o.useRef)(null);switch((0,o.useLayoutEffect)(()=>{s.current&&r(ri(s.current))},[a]),e.iteration_type){case"ai":if(t)return(0,l.jsx)("p",{ref:s,"data-fade":n&&i,className:i9,style:{"--lines-to-show":n?5:2},children:a});return(0,l.jsx)(iV.To,{markdown:e.prompt??"",chatMode:"assistive",className:"IteratePanel-module__markdownContent--VZ8zx"});case"user":return(0,l.jsx)(z.A,{variant:"secondary",children:"Manual edit"});case"from_repository":return(0,l.jsx)(z.A,{variant:"secondary",children:"Synced from repository"})}},ro=({refinement:e,isActivelyGenerating:t,collapsed:n})=>{let{deploymentSha:a,deployedAt:i}=(0,nI.yO)(),r=e.sha&&a&&e.sha===a,[s,c]=(0,o.useState)(!0);return(0,l.jsxs)("div",{className:(0,y.$)(i7,"IteratePanel-module__activityItemActive--gam3E"),children:[(0,l.jsxs)("div",{children:[r&&i&&(0,l.jsxs)("div",{className:"text-small fgColor-success mb-2",children:["Published ",(0,l.jsx)(eW.A,{date:new Date(i)})]}),(0,l.jsx)(rs,{refinement:e,collapsed:n,active:!0})]}),(0,l.jsx)(iq,{refinement:e,isActivelyGenerating:t,isExpanded:s,onExpandedChange:c})]})},rl=({refinement:e,collapsed:t})=>{let{deploymentSha:n,deployedAt:a}=(0,nI.yO)(),i=e.sha&&n&&e.sha===n;return(0,l.jsx)("div",{className:(0,y.$)(i7),children:(0,l.jsxs)("div",{children:[i&&a&&(0,l.jsxs)("div",{className:"text-small fgColor-success",children:["Published ",(0,l.jsx)(eW.A,{date:new Date(a)})]}),(0,l.jsx)(rs,{refinement:e,collapsed:t})]})})},rc=({refinement:e,collapsed:t})=>{let{deploymentSha:n,deployedAt:a}=(0,nI.yO)(),i=e.sha&&n&&e.sha===n;return(0,l.jsx)("div",{className:(0,y.$)(i7,"IteratePanel-module__activityItemSkipped--Xu6i6"),children:(0,l.jsxs)("div",{children:[i&&a&&(0,l.jsxs)("div",{className:"text-small fgColor-success",children:["Published ",(0,l.jsx)(eW.A,{date:new Date(a)})]}),(0,l.jsx)(rs,{refinement:e,collapsed:t})]})})},rd=({skippedRefinements:e,onSelectRefinement:t})=>{let[n,a]=(0,o.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("button",{onClick:()=>a(e=>!e),className:(0,y.$)("IteratePanel-module__buttonNaked--YYfvM","IteratePanel-module__skippedCaption--Mml4R"),"aria-expanded":n,children:[(0,l.jsx)("div",{className:"IteratePanel-module__chevron--FegDd","data-expanded":n,children:(0,l.jsx)(g.ChevronRightIcon,{size:12})}),(0,l.jsx)("span",{className:"text-small",children:1===e.length?"1 ignored version":`${e.length} ignored versions`})]}),n&&(0,l.jsx)("div",{className:"IteratePanel-module__skippedContainer--wtInf",children:e.map(e=>(0,l.jsx)(rr,{variant:"skipped",refinement:e,isFirstRefinement:!1,isLastRefinement:!1,onSelectRefinement:t},e.id))})]})};try{rt.displayName||(rt.displayName="IteratePanel")}catch{}try{ra.displayName||(ra.displayName="ActivityLog")}catch{}try{rr.displayName||(rr.displayName="RefinementTimelineItem")}catch{}try{rs.displayName||(rs.displayName="RefinementLabel")}catch{}try{ro.displayName||(ro.displayName="ActiveRefinementEntry")}catch{}try{rl.displayName||(rl.displayName="InactiveRefinementEntry")}catch{}try{rc.displayName||(rc.displayName="SkippedRefinementEntry")}catch{}try{rd.displayName||(rd.displayName="SkippedRefinementsTimelineItem")}catch{}let ru=(0,tg.Y)(async()=>({default:(await n.e(37260).then(n.bind(n,37260))).AiPanel})),rm=(0,tg.Y)(async()=>({default:(await n.e(62879).then(n.bind(n,62879))).AssetsPanel})),rp=(0,tg.Y)(async()=>({default:(await Promise.all([n.e(18697),n.e(90851)]).then(n.bind(n,74102))).ThemePanel})),rh=(0,tg.Y)(async()=>({default:(await Promise.all([n.e(18697),n.e(65972)]).then(n.bind(n,22277))).TargetedEditsPanel})),rf=(0,tg.Y)(async()=>({default:(await Promise.all([n.e(3088),n.e(18885)]).then(n.bind(n,18885))).DataPanel})),rg=[{type:iF.Zk.ITERATE,label:"Iterate",icon:g.SparkleFillIcon},{type:iF.Zk.THEME,label:"Theme",icon:g.PaintbrushIcon,preload:rp.preload},{type:iF.Zk.DATA,label:"Data",icon:g.DatabaseIcon,preload:rf.preload},{type:iF.Zk.AI,label:"Prompts",icon:g.AiModelIcon,preload:ru.preload},{type:iF.Zk.ASSETS,label:"Assets",icon:g.ImageIcon,preload:rm.preload}],ry="spark-side-panel-tab-",rb="spark-side-panel-tabpanel";function rx({workbenchData:e,selectedPanel:t,setSelectedPanel:n,onRequestCollapse:a}){let{sidePanelOpen:i}=(0,tI.zW)(),{selectedElement:r,targetedEditsEnabled:s,disableTargetedEdits:c}=(0,tA.kH)(),d=(0,o.useRef)(null),u=`${ry}${t}`;return(0,o.useEffect)(()=>{let e=d.current;e&&e.toggleAttribute("inert",!i)},[i]),(0,o.useEffect)(()=>{s&&(rh.preload(),n("theme"))},[s,n]),(0,o.useEffect)(()=>{if(!i||!a)return;let e=e=>{if("Escape"!==e.key)return;let t=document.activeElement;t&&d.current?.contains(t)&&(e.preventDefault(),e.stopPropagation(),a("escape"))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[a,i]),(0,o.useEffect)(()=>{if(!s)return;let e=e=>{[d.current,document.querySelector(`[aria-label="${nZ}"]`),document.getElementById(iB)].some(t=>t?.contains(e.target))||c()},t=document.getElementById("workbench-root"),n=setTimeout(()=>{t.addEventListener("click",e)},100);return()=>{t.removeEventListener("click",e),clearTimeout(n)}},[s,c]),(0,l.jsxs)("div",{className:"SidePanel-module__container--l7C5Y",ref:d,"aria-hidden":!i,"data-testid":"side-panel",children:[(0,l.jsx)("div",{className:"SidePanel-module__navContainer--aCDP1",children:(0,l.jsx)("div",{className:"SidePanel-module__navList--mYx22",role:"tablist","aria-label":"Workbench side panel tabs",children:rg.map(e=>{let a=`${ry}${e.type}`;return(0,l.jsxs)("button",{type:"button",className:(0,y.$)("SidePanel-module__navButton--eRJtG",{"SidePanel-module__navButtonActive--yrfIb":t===e.type}),id:a,role:"tab","aria-selected":t===e.type,"aria-controls":rb,onClick:()=>{n(e.type),s&&c()},onMouseEnter:()=>e.preload?.(),onFocus:()=>e.preload?.(),children:[(0,l.jsx)("span",{className:"SidePanel-module__navButtonLabel--_wF27",children:e.label}),(0,l.jsx)("span",{className:"SidePanel-module__navButtonLabelInvisible--zJlcx","aria-hidden":"true",children:e.label})]},e.type)})})}),(0,l.jsxs)("div",{className:"SidePanel-module__panel--cLGax",role:"tabpanel",id:rb,"aria-labelledby":u,children:["iterate"===t&&(0,l.jsx)(rt,{workbenchData:e}),"theme"===t&&(s?r?(0,l.jsx)(o.Suspense,{children:(0,l.jsx)(rh,{element:r,onClose:()=>{c(),n("theme")}},JSON.stringify(r.location?.start??r.component.location?.start))}):(0,l.jsx)(iW,{title:"Select an element to edit",icon:nE.dS}):(0,l.jsx)(o.Suspense,{children:(0,l.jsx)(rp,{})})),"data"===t&&(0,l.jsx)(o.Suspense,{children:(0,l.jsx)(rf,{})}),"ai"===t&&(0,l.jsx)(o.Suspense,{children:(0,l.jsx)(ru,{})}),"assets"===t&&(0,l.jsx)(o.Suspense,{children:(0,l.jsx)(rm,{})})]})]})}try{ru.displayName||(ru.displayName="AiPanel")}catch{}try{rm.displayName||(rm.displayName="AssetsPanel")}catch{}try{rp.displayName||(rp.displayName="ThemePanel")}catch{}try{rh.displayName||(rh.displayName="TargetedEditsPanel")}catch{}try{rf.displayName||(rf.displayName="DataPanel")}catch{}try{rx.displayName||(rx.displayName="SidePanel")}catch{}var rv=n(72931);function rw(){let{isAgentBusy:e,status:t}=(0,p.dt)(),n=(0,o.useRef)(void 0),a=(0,o.useRef)(!1),i=(0,o.useCallback)(()=>{(0,rv.iD)("pending"),a.current=!0},[]),r=(0,o.useCallback)(e=>{(0,rv.iD)(e),a.current=!1,clearTimeout(n.current),n.current=setTimeout(()=>{(0,rv.gd)()},15e3)},[]);return(0,o.useEffect)(()=>(e?i():a.current&&t===p.i.CONNECTED?r("success"):a.current&&t===p.i.ERROR?r("failure"):(0,rv.gd)(),()=>clearTimeout(n.current)),[t,e,i,r]),null}try{rw.displayName||(rw.displayName="SparkStatusFavicon")}catch{}var r_=n(6551);function rS(){return{state:document.hidden?"hidden":"visible",stateChangeTimestamp:performance.now(),sessionId:(0,tY.u)()}}let rC=Object.freeze({...rS(),previousStateDurationMs:0}),rk=(0,o.createContext)(rC);function rE(e){let[t,n]=(0,o.useState)(()=>rC),a=(0,r_.S)(t);(0,o.useEffect)(()=>{let e=()=>{n(rS())};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]);let i=a?.stateChangeTimestamp??t.stateChangeTimestamp,r=(0,o.useMemo)(()=>({sessionId:t.sessionId,state:t.state,stateChangeTimestamp:t.stateChangeTimestamp,previousStateDurationMs:t.stateChangeTimestamp-i}),[t.sessionId,t.stateChangeTimestamp,t.state,i]);return(0,l.jsx)(rk,{value:r,...e})}function rj(){return(0,o.use)(rk)}try{rC.displayName||(rC.displayName="PAGE_VISIBILITY_STATE")}catch{}try{rk.displayName||(rk.displayName="PageVisibilityContext")}catch{}try{rE.displayName||(rE.displayName="PageVisibilityProvider")}catch{}var rN=n(42914);let rA=e=>{let t=e?.getBoundingClientRect().top??0;return t>0?t:0};function rI({Editor:e}){let t,[n,i]=(0,o.useState)("iterate"),r=(0,tB.s)(),{sidePanelOpen:s,workingMode:c,setWorkingMode:d,createRepositoryModelOpen:u,setCreateRepositoryModelOpen:m,toggleSidePanel:p}=(0,tI.zW)(),{offsetTop:h,rootRef:g}=function(){let e=(0,o.useRef)(null),[t,n]=(0,o.useState)(()=>rA(e?.current)),a=(0,o.useCallback)(()=>{n(rA(e?.current))},[]);return(0,tS.w)(a,e),{offsetTop:t,rootRef:e}}(),{headerHeight:b,headerRef:x}=function(){let e=(0,o.useRef)(null),[t,n]=(0,o.useState)(()=>e?.current?.clientHeight??0),a=(0,o.useCallback)(()=>{n(e?.current?.clientHeight??0)},[]);return(0,tS.w)(a,e),{headerHeight:t,headerRef:e}}();t=(0,o.useRef)(null),(0,o.useEffect)(()=>{let e=document.querySelector(".AppHeader");if(e&&(null===t.current&&(t.current=e.hidden),!e.hidden))return e.hidden=!0,()=>{e&&null!==t.current&&(e.hidden=t.current)}},[]);let{copilot:{ssoOrganizations:v,currentTopic:w},createRepoOwner:_,isNewFilePage:S,repositoryChannel:C}=(0,ty.B)(),[k,E]=(0,o.useState)(C),{disableTargetedEdits:j}=(0,tA.kH)(),N=(0,o.useMemo)(()=>new rN.wn(v.map(e=>e.id)),[v]),A=(0,iu.V)(),{submitPrompt:I,isMobileSidebarOpen:T,setIsMobileSidebarOpen:R,createRepository:M,friendlyName:L}=A,P=(0,o.useCallback)(e=>{R(!1),p(!1),a?.()},[R,p]),D=(0,o.useCallback)(e=>{R(!1),p(!1),"escape"===e&&a?.()},[R,p]);(0,o.useEffect)(()=>{let e;S||((e=new URL(window.location.href,window.location.origin)).searchParams.delete(tK),(0,tq.kd)(e.toString()))},[S]);let{selectedElement:$}=(0,tA.kH)(),{width:F}=eF();(0,o.useEffect)(()=>{F&&F<1012&&"split"===c&&d("preview")},[d,F,c]);let O=rj();(0,o.useEffect)(()=>{let e=O.previousStateDurationMs,t="visible"===O.state?"active":"inactive";tL.Ay.log(`page became ${O.state} after ${e.toFixed(2)}ms of ${"active"===t?"inactivity":"activity"}`),r("workbench.page-visibility-change",{previous_state_duration_ms:e})},[O.state,O.previousStateDurationMs]);let B=(0,o.useCallback)(()=>{m(!1)},[m]),U=(0,o.useCallback)(async(e=0)=>{if(e>=3||C)return;let t=await (0,f.lS)(`/copilot/spark/workbench/${A.id}/repository_notifications`,{method:"POST"}),n=await t.json();n.subscribed?E(n.channel):(await new Promise(e=>setTimeout(e,2e3)),U(e+1))},[A,C]),W=(0,o.useCallback)(async(e,t)=>{await M(e,t),U()},[M,U]);return N?(0,l.jsx)(nI.JU,{children:(0,l.jsx)(am,{children:(0,l.jsxs)("div",{id:"workbench-root",ref:g,"data-hpc":!0,children:[(0,l.jsx)(rw,{}),(0,l.jsxs)(nb.M,{containerWidth:"full",padding:"none",rowGap:"condensed",columnGap:"none",className:"Workbench-module__pageLayout--LxYSx",style:{"--workspace-editor-offset-top":`${h}px`,"--workspace-editor-header-height":`${b}px`},children:[(0,l.jsx)(nb.M.Header,{className:"mb-0",children:(0,l.jsx)(nQ,{headerRef:x})}),(0,l.jsx)(nb.M.Pane,{position:"start","aria-label":"Side pane",className:(0,y.$)("Workbench-module__pagePane--G9bRB",{"Workbench-module__pagePaneExpanded--j2uIR":s},"d-none d-md-block"),width:{default:"100%",min:"100%",max:"100%"},children:(0,l.jsx)("div",{className:"Workbench-module__sidePanelWrapper--e5eSQ",children:(0,l.jsx)(rx,{workbenchData:A,selectedPanel:n,setSelectedPanel:i,onRequestCollapse:P})})}),(0,l.jsx)(nb.M.Content,{as:"div",padding:"none",width:"full",className:(0,y.$)("Workbench-module__pageContent--L22YP",{"Workbench-module__contentFullWidth--X2mQ_":!s}),children:(0,l.jsx)(iP,{copilotCurrentTopic:w,Editor:e})})]}),T&&(0,l.jsx)(nx.l,{title:"Edit your spark",position:{narrow:"left",regular:"left"},height:"large",width:"xlarge",className:(0,y.$)("Workbench-module__sidePanelDialog--CVTpR","hide-lg hide-xl height-full"),onClose:D,children:(0,l.jsx)("div",{className:"height-full",style:{minWidth:"332px"},children:(0,l.jsx)(rx,{workbenchData:A,selectedPanel:n,setSelectedPanel:i,onRequestCollapse:P})})}),k&&(0,l.jsx)(i$,{channel:k}),u&&(0,l.jsx)(nw,{name:L,ownerLogin:_||A.workbench.billableOwner.login,onCancel:B,onSubmit:W}),$&&(0,l.jsx)(iU,{element:$,onSubmit:(e,t)=>{I(e,"refine","targeted_prompt",{attachments:{locations:[{filePath:t.start.filePath,startLine:t.start.line,startColumn:t.start.column,endLine:t.end.line,endColumn:t.end.column}]}}),j(),i("iterate")}})]})})}):null}try{rI.displayName||(rI.displayName="Workbench")}catch{}var rT=n(53552),rR=n(1747),rM=n(78314),rL=n(73189),rP=n(82697),rD=n(53279),r$=n(56691),rF=n(98860),rO=n(65047),rB=n(90322),rU=n(5985),rW=n(46474),rV=n(7087),rG=n(41256),rz=n(93515);let rH=new Set([ax.ju.Deleted,ax.ju.Failed,ax.ju.Unavailable]),rq=async(e,t,n)=>await (0,ah.L)(async()=>{let n=await (0,f.Sr)(e,{});if((0,rz.vA)(n.ok,rG.j$.fromResponse(n,"Request to refresh codespace info failed")),!n.ok){let e=await n.json();throw new rG.pf(e.error??`${n.status} - ${n.statusText}`)}let a=await n.json();return(0,rz.Qx)(a,"Failed to refresh codespace info"),(0,rz.vA)(a.environment_data.state!==ax.ju.Failed,new rG.kV("Codespace is in the failed state.",a.environment_data.state)),(0,rz.vA)(a.environment_data.state===t,new rG.El(t,a.environment_data.state)),a},{...n,retries:n.retries??1/0,retryDelayMs:n.retryDelayMs??1e3,exponentialBackoffFactor:n.exponentialBackoffFactor??1.02,shouldStopRetries:(e,t)=>"function"==typeof n.shouldStopRetries?n.shouldStopRetries(e,t):e instanceof rG.kV&&e.codespaceState?rH.has(e.codespaceState):e instanceof rG.j$&&!e.isRetriable()}),rK=async(e,t)=>await (0,ah.L)(async()=>{let t=await (0,f.Sr)(e,{body:{},method:"POST"});if(!t.ok){let e=await t.json();throw new rG.pf(e.error??`${t.status} - ${t.statusText}`)}let n=await t.json();return(0,rz.Qx)(n,"Failed to start codespace"),n},{...t,retries:t.retries??3,retryDelayMs:t.retryDelayMs??1e3,shouldStopRetries:(e,n)=>"function"==typeof t.shouldStopRetries?t.shouldStopRetries(e,n):e instanceof rG.j$&&!e.isRetriable()});function rY({children:e}){let{repo:t}=(0,ty.B)(),n=function(e){let t=(0,o.useMemo)(()=>`/var/lib/docker/codespacemount/workspace/${e.name}`,[e.name]),[n,a]=(0,o.useState)(null),[i,r]=(0,o.useState)("none"),[s,l]=(0,o.useState)(void 0),[c,d]=(0,o.useState)(void 0),[u,m]=(0,o.useState)(!1),[p,h]=(0,o.useState)(void 0),[f,g]=(0,o.useState)("connecting"),[y,b]=(0,o.useState)(void 0),x=(0,o.useRef)(void 0),v=(0,rW.rI)(),w=(0,tB.s)(),_=(0,ty.B)(),{currentUser:S}=_,C=`/${e.ownerLogin}/${e.name}/copilot/workbench/cloud_environment`,k=(0,o.useCallback)(()=>{m(!1),d(void 0),v(null),a(null),h(void 0),x.current=void 0},[v]);function E(e,t){if(r(e),"ready"===e&&(tL.Ay.log("Codespace is ready"),b(performance.now())),"creating"===e)return;if("failed"===e)return void k();(0,rz.iY)(t,`Codespace info must be set for the ${e} state.`);let{environment_data:n,cloud_environment:i}=t,{connection:s}=n,{tunnelProperties:o}=s,l=c;o&&!l&&d(l=new rO.ut(o,3)),l&&"ready"===e&&(R(l),T(l)),v({codespace_id:i.guid,codespace_session_id:n2,connection_id:o?.tunnelId,cluster_id:o?.clusterId}),a(t)}(0,rV.hb)({onAction:async e=>{if(c)try{if("disconnected"===f)return void I();let t=e?.type.replace(" ","")||"unknown";await c.notifyClientActivity(["workbench",[t]])}catch(e){e instanceof Error&&e.message.includes("No stream available")&&I()}},throttle:5e3});let j=(0,o.useCallback)(async()=>{let e=performance.now();try{w("codespace.requested",{...N()}),E("creating"),l(void 0);let t=await (0,rU.A)(`${C}?spark_id=${_.workbench.id}`,!1,{onBeforeRetry(e,t){w("codespace.error",{message:`Failed to create Codespace: ${e.message}`,retries_left:t,is_fatal:!1,...N()})}});k();let n=t.data,a=n.cloud_environment.guid;E("starting",n),w("codespace.created",{...N(n),elapsed_time_ms:performance.now()-e}),n.environment_data?.state===ax.ju.ShuttingDown&&(n=await rq(`${C}/${a}`,ax.ju.Shutdown,{onBeforeRetry(e,t){e instanceof rG.El||w("codespace.error",{message:`Failed while shutting down codespace: ${e.message}`,_retries_left:t,is_fatal:!1,...N(n)})}}),E("starting",n)),n.environment_data?.state===ax.ju.Shutdown&&(n=await rK(`${C}/${a}`,{onBeforeRetry(e,t){w("codespace.error",{message:`Failed to start the codespace: ${e.message}`,_retries_left:t,is_fatal:!1,...N(n)})}}),E("starting",n)),n=await rq(`${C}/${a}`,ax.ju.Available,{onBeforeRetry(e,t){e instanceof rG.El||w("codespace.error",{message:`Failed while waiting for the codespace to become Available: ${e.message}`,_retries_left:t,is_fatal:!1,...N(n)})}}),E("ready",n),w("codespace.ready",{elapsed_time_ms:performance.now()-e,...N(n)})}catch(n){let t=n instanceof Error?n.message:`Unknown error object: ${n}.`;l(t),w("codespace.error",{message:`Codespace creation failed: ${t}`,attempts_made:n instanceof AggregateError?n.errors.length:NaN,elapsed_time_ms:performance.now()-e,is_fatal:!0}),E("failed")}},[C]);function N(e){return{codespace_id:e?.cloud_environment?.guid??n2,sku:e?.environment_data?.skuName??n2,location:e?.environment_data?.location??n2,connection_id:e?.environment_data?.connection?.tunnelProperties?.tunnelId??n2,cluster_id:e?.environment_data?.connection?.tunnelProperties?.clusterId??n2,state:e?.environment_data?.state??n2}}let A=(0,o.useRef)(!1);(0,o.useEffect)(()=>{A.current||(A.current=!0,S?.isStaff||((0,rO.He)("error"),(0,rB.setLogLevel)("error")),j())},[j,i,S?.isStaff]);let I=(0,o.useCallback)(async()=>{k(),await j()},[k,j]),T=async e=>{try{let t=await e.isRecoveryContainer();m(t)}catch{}},R=(0,o.useCallback)(e=>{(0,ah.L)(async()=>{x.current||(x.current=await e.getTerminalChannel({}),x.current.onClosed(e=>{tL.Ay.log("disconnected from the Codespace"),g("disconnected"),x.current=void 0}),tL.Ay.log("connected to the Codespace"),g("connected"))},{onBeforeRetry(e,t){tL.Ay.log(`connecting to the Codespace.. (${t} retries left)`),g("connecting"),x.current=void 0},retries:3,retryDelayMs:1e3})},[g]);return{workspaceRoot:t,codespaceState:i,codespaceInfo:n,remoteProvider:c,creationErrorMessage:s,isRecoveryContainer:u,permissionsStatus:p,recreateCodespace:I,pollForPermissionsAccepted:(0,o.useCallback)(()=>{},[]),readyTimestamp:y}}(t),{onCodespaceStatus:a}=(0,p.MY)();(0,o.useEffect)(()=>{a(n.codespaceState)},[n.codespaceState,a]);let i=(0,o.useMemo)(()=>({codespaceData:n}),[n]);return(0,l.jsx)(t2.x,{value:i,children:e})}try{rY.displayName||(rY.displayName="CodespaceContextProvider")}catch{}var rX=n(95455),rZ=n(46203);function rJ(e){return{startLineNumber:e.start.line+1,startColumn:e.start.character+1,endLineNumber:e.end.line+1,endColumn:e.end.character+1}}function rQ(e){return{character:e.column-1,line:e.lineNumber-1}}function r0(e){switch(e){case rZ.CompletionItemKind.Text:return tG.languages.CompletionItemKind.Text;case rZ.CompletionItemKind.Method:return tG.languages.CompletionItemKind.Method;case rZ.CompletionItemKind.Function:return tG.languages.CompletionItemKind.Function;case rZ.CompletionItemKind.Constructor:return tG.languages.CompletionItemKind.Constructor;case rZ.CompletionItemKind.Field:return tG.languages.CompletionItemKind.Field;case rZ.CompletionItemKind.Variable:return tG.languages.CompletionItemKind.Variable;case rZ.CompletionItemKind.Class:return tG.languages.CompletionItemKind.Class;case rZ.CompletionItemKind.Interface:return tG.languages.CompletionItemKind.Interface;case rZ.CompletionItemKind.Module:return tG.languages.CompletionItemKind.Module;case rZ.CompletionItemKind.Property:return tG.languages.CompletionItemKind.Property;case rZ.CompletionItemKind.Unit:return tG.languages.CompletionItemKind.Unit;case rZ.CompletionItemKind.Value:return tG.languages.CompletionItemKind.Value;case rZ.CompletionItemKind.Enum:return tG.languages.CompletionItemKind.Enum;case rZ.CompletionItemKind.Keyword:return tG.languages.CompletionItemKind.Keyword;case rZ.CompletionItemKind.Snippet:return tG.languages.CompletionItemKind.Snippet;case rZ.CompletionItemKind.Color:return tG.languages.CompletionItemKind.Color;case rZ.CompletionItemKind.File:return tG.languages.CompletionItemKind.File;case rZ.CompletionItemKind.Reference:return tG.languages.CompletionItemKind.Reference;case rZ.CompletionItemKind.Folder:return tG.languages.CompletionItemKind.Folder;case rZ.CompletionItemKind.EnumMember:return tG.languages.CompletionItemKind.EnumMember;case rZ.CompletionItemKind.Constant:return tG.languages.CompletionItemKind.Constant;case rZ.CompletionItemKind.Struct:return tG.languages.CompletionItemKind.Struct;case rZ.CompletionItemKind.Event:return tG.languages.CompletionItemKind.Event;case rZ.CompletionItemKind.Operator:return tG.languages.CompletionItemKind.Operator;case rZ.CompletionItemKind.TypeParameter:return tG.languages.CompletionItemKind.TypeParameter;default:return tG.languages.CompletionItemKind.Text}}let r1=null,r2="diff-editor-original-contents",r3=["go","javascript","typescript","typescriptreact","python"];function r5(e){return e.uri.toString().startsWith(`file:///${r2}`)}let r4=new Map;function r6(e,t,n){if(!r1){if(e){let a=r4.get(t)||[];a.push({model:e,initialFileContent:n}),r4.set(t,a)}return}!e||t&&r1.enableLanguageFeatures(e,t,n)}var r7=new WeakMap,r9=new WeakMap;let r8=class EditableFile{addModel(e){(0,ev._)(this,r7).add(e),e.onWillDispose(()=>{(0,ev._)(this,r7).delete(e)})}hasFileUri(e){return this.fileUri===e}hasModel(e){return(0,ev._)(this,r7).has(e)}hasAnyModel(){return(0,ev._)(this,r7).size>0}hasLspClient(e){return(0,ev._)(this,r9).has(e)}getVersionId(){let e=0;for(let t of(0,ev._)(this,r7))e+=t.getVersionId();return e}getLanguageId(){return(0,rO.Z0)(this.filepath)}getCurrentValue(){let e=(0,ev._)(this,r7).values().next().value;return e?e.getValue():""}addLspClient(e,t){(0,ev._)(this,r9).set(e,t)}getLspClient(e){let t=(0,ev._)(this,r9).get(e);return t&&!t?.disposed?t:((0,ev._)(this,r9).delete(e),null)}getModels(){return(0,ev._)(this,r7)}constructor(e,t,n=""){(0,ew._)(this,r7,{writable:!0,value:new Set}),(0,ew._)(this,r9,{writable:!0,value:new Map}),(0,ek._)(this,"lastSyncedContent",void 0),(0,ek._)(this,"latestDiagnostics",[]),(0,ek._)(this,"filepath",void 0),(0,ek._)(this,"fileUri",void 0),(0,ek._)(this,"originalContent",void 0),this.filepath=e,this.fileUri=t,this.originalContent=n,this.lastSyncedContent=n??""}};var se=new WeakMap,st=new WeakMap,sn=new WeakMap,sa=new WeakSet,si=new WeakSet,sr=new WeakSet,ss=new WeakSet;let so=class MonacoLspConnector{registerContextOperations(e){this.contextOperations={openFileInFileExplorer:e.openFileInFileExplorer,closeFileExplorer:e.closeFileExplorer}}async enableLanguageFeatures(e,t,n){let a=`file://${this.workspaceRoot}/${t}`,i=(0,ev._)(this,se).find(e=>e.fileUri===a);i?.hasModel(e)||(i||(i=new r8(t,a,n),(0,ev._)(this,se).push(i)),i.addModel(e),await (0,eS._)(this,si,sc).call(this,t,i,e))}async enableLanguageFeaturesForAllModels(){for(let e of(0,ev._)(this,se))for(let t of e.getModels())await (0,eS._)(this,si,sc).call(this,e.fileUri,e,t)}dispose(){if(!(0,ev._)(this,sn)){for(let e of((0,e_._)(this,sn,!0),(0,ev._)(this,st)))try{e.dispose()}catch{}for(let e of((0,e_._)(this,st,[]),this.monacoInstance.editor.getModels()))this.monacoInstance.editor.setModelMarkers(e,"Codespaces LSP",[])}}async getLspClientForModel(e,t){let n=(0,ev._)(this,se).find(e=>e.hasModel(t))||null;if(!n)throw Error(`Model not registered for ${t.uri}. This should not happen.`);let a=n.getLspClient(e)||null;return(!a||a.disposed)&&(a=await (0,eS._)(this,sr,sd).call(this,e,n,t)),a}setupCopilotCompletionV2(){let e,t=this.getLspClientForModel.bind(this),n=this.monacoInstance,a=(0,ev._)(this,se),i=n.languages.registerInlineCompletionsProvider(["*"],{provideInlineCompletions:async(i,r)=>{if(e=i,r5(i))return;let s=a.find(e=>e.hasModel(i));if(!s)throw Error(`No editable file found for ${i.uri}`);let o=await t(rO.$c.CopilotV2,i);if(o&&o instanceof rO.Xd)return{items:(await o.textDocumentInlineCompletion({textDocument:{uri:s.fileUri,version:s.getVersionId()},position:rQ(r),context:{triggerKind:rZ.InlineCompletionTriggerKind.Automatic},formattingOptions:{tabSize:1,insertSpaces:!0}})).map(e=>{let t=e.insertText.slice(e.range.end.character);return{range:new n.Range(r.lineNumber,r.column,r.lineNumber,t.length),insertText:t,label:t,command:{id:this.telemetryCommandId,title:"LSP acceptance",arguments:[{language:i.getLanguageId(),type:o.type,file_uri:s.fileUri,change_size_chars:t.length}]}}})}},handleItemDidShow:t=>{if(!e||!a.find(t=>t.hasModel(e))||!t.items[0])return},freeInlineCompletions(){}});(0,ev._)(this,st).push(i)}registerHoverProvider(){let e=this.getLspClientForModel.bind(this),t=this.monacoInstance,n=(0,ev._)(this,se),a=t.languages.registerHoverProvider(r3,{async provideHover(t,a){if(r5(t))return;let i=n.find(e=>e.hasModel(t));if(!i)throw Error(`No editable file found for ${t.uri}`);let r=(0,rO.Z0)(i.fileUri),s=(0,rO.Pn)(r);if(!s)return;let o=await e(s,t),l=await o?.getHover({textDocument:{uri:i.fileUri},position:rQ(a)});if(!l)return;let c=[];if(l.contents)if(Array.isArray(l.contents))for(let e of l.contents)"string"==typeof e?c.push({value:e}):c.push({value:e.value});else"string"==typeof l.contents?c.push({value:l.contents}):c.push({value:l.contents.value});return{contents:c,range:l.range?rJ(l.range):void 0}}});(0,ev._)(this,st).push(a)}registerCompletionProvider(){let e=this.getLspClientForModel.bind(this),t=this.monacoInstance,n=(0,ev._)(this,se),a=this.telemetryCommandId,i=t.languages.registerCompletionItemProvider(r3,{async provideCompletionItems(t,a){if(r5(t))return;let i=n.find(e=>e.hasModel(t));if(!i)throw Error(`No editable file found for ${t.uri}`);let s=(0,rO.Z0)(i.fileUri),o=(0,rO.Pn)(s);if(!o)return;let l=await e(o,t),c=await l?.getCompletion({textDocument:{uri:i.fileUri},position:rQ(a)});if(!c)return;let d=[];return Array.isArray(c)?{suggestions:d=r(c,t,a)}:(d=r(c.items,t,a),{incomplete:c.isIncomplete,suggestions:d})}});function r(e,t,i){return e.map(e=>{let r=e.textEdit;if(r&&"range"in r){let i=rJ(r.range);return{label:e.label,kind:r0(e.kind),insertText:e.label,range:i,command:{id:a,title:"LSP acceptance",arguments:[{language:t.getLanguageId(),type:"unknown",file_uri:n.find(e=>e.hasModel(t))?.fileUri,change_size_chars:e.label.length}]}}}{let r=t.getLineContent(i.lineNumber),s=r.match(/^\s*/)?.[0]||"",o=e.insertText||e.label,l=t.getValueInRange({startLineNumber:i.lineNumber,startColumn:i.column-o.length-s.length,endLineNumber:i.lineNumber,endColumn:i.column}),c=o.startsWith(l)?o.substring(l.length):o;return{label:e.label,kind:r0(e.kind),insertText:c,range:{startLineNumber:i.lineNumber,startColumn:i.column-l.length+s.length,endLineNumber:i.lineNumber,endColumn:i.column+s.length+1},command:{id:a,title:"LSP acceptance",arguments:[{language:t.getLanguageId(),type:"unknown",file_uri:n.find(e=>e.hasModel(t))?.fileUri,change_size_chars:e.label.length}]}}}})}(0,ev._)(this,st).push(i)}async textDocumentDidClose(e,t){await e.textDocumentDidClose({textDocument:{uri:t.fileUri}})}constructor(e,t,n,a,i){(0,eC._)(this,sa),(0,eC._)(this,si),(0,eC._)(this,sr),(0,eC._)(this,ss),(0,ew._)(this,se,{writable:!0,value:[]}),(0,ek._)(this,"contextOperations",null),(0,ew._)(this,st,{writable:!0,value:[]}),(0,ew._)(this,sn,{writable:!0,value:!1}),(0,ek._)(this,"monacoInstance",void 0),(0,ek._)(this,"getLspClient",void 0),(0,ek._)(this,"workspaceRoot",void 0),(0,ek._)(this,"sendEvent",void 0),(0,ek._)(this,"telemetryCommandId",void 0),this.monacoInstance=e,this.getLspClient=t,this.workspaceRoot=n,this.sendEvent=a,this.telemetryCommandId=i,MonacoLspConnector.DefaultLspsForAllModels=[rO.$c.CopilotV2]}};async function sl(e,t,n){let a={uri:t.fileUri,languageId:t.getLanguageId(),version:t.getVersionId(),text:t.getCurrentValue()};await e.textDocumentDidOpen({textDocument:a});let i=n.onDidChangeContent(async n=>{await e.textDocumentDidChange({textDocument:{uri:t.fileUri,version:t.getVersionId()},contentChanges:n.changes.map(e=>{var t;return{range:{start:{line:(t=e.range).startLineNumber-1,character:t.startColumn-1},end:{line:t.endLineNumber-1,character:t.endColumn-1}},rangeLength:e.rangeLength,text:e.text}})})});(0,ev._)(this,st).push(i)}async function sc(e,t,n){let a=(0,rO.Pn)((0,rO.Z0)(e));for(let e of a?[a,...so.DefaultLspsForAllModels]:so.DefaultLspsForAllModels){let a=t.getLspClient(e);!a||a.disposed?await (0,eS._)(this,sr,sd).call(this,e,t,n):this.monacoInstance.editor.setModelMarkers(n,"Codespaces LSP",t.latestDiagnostics)}}async function sd(e,t,n){this.monacoInstance.editor.setModelMarkers(n,"Codespaces LSP",[]);let a=await this.getLspClient(e);return a&&(t.addLspClient(e,a),a.registerOnDiagnosticsHandler((0,eS._)(this,ss,su).bind(this)),await (0,eS._)(this,sa,sl).call(this,a,t,n)),a}function su({uri:e,diagnostics:t}){let n=(0,ev._)(this,se).find(t=>t.fileUri===e),a=n?.getModels(),i=t.map(e=>{var t;return e?.range?.start&&e?.range?.end?{severity:1===(t=e.severity)?8:2===t?4:3===t?2:1,message:e.message,startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1}:null}).filter(e=>null!=e);if(n&&(n.latestDiagnostics=i),a&&0!==a.size)for(let e of a)this.monacoInstance.editor.setModelMarkers(e,"Codespaces LSP",i)}(0,ek._)(so,"DefaultLspsForAllModels",void 0);let sm={hovers:!1,completionItems:!1,diagnostics:!1,definitions:!1},sp={noSemanticValidation:!0,noSyntaxValidation:!0};var sh=n(56557);function sf(){return decodeURIComponent(window.location.pathname.replace(nr.k_,""))}function sg({children:e}){let{path:t,workbench:n}=(0,ty.B)(),{fileChangeStack:a,setFileChangeStack:i,forceContentRefresh:r}=(0,tj.d)(),{getFileList:s}=(0,ni.AU)(),{sparkFileUrl:c}=(0,nr._C)(),{isAgentBusy:d}=(0,p.dt)(),u=(0,h.Z)(),m=(0,tB.s)(),{codespaceData:f}=(0,t2.M)(),{registerMonaco:g}=function(e,t,n,a){let[i,r]=(0,o.useState)(()=>new Set([rO.$c.CopilotV2,...a||[]])),s=(0,o.useRef)([]),l=(0,o.useRef)(null),c=(0,o.useRef)({}),{codespaceInfo:d,codespaceState:u,workspaceRoot:m}=e,p="ready"===u,h=(0,o.useCallback)(e=>{if(l.current&&e&&e===rO.$c.Typescript)for(let e of(c.current={js:{compilerOptions:{...l.current.languages.typescript.javascriptDefaults.getCompilerOptions()},diagnosticsOptions:{...l.current.languages.typescript.javascriptDefaults.getDiagnosticsOptions()},modeConfiguration:{...l.current.languages.typescript.javascriptDefaults.modeConfiguration}},ts:{compilerOptions:{...l.current.languages.typescript.typescriptDefaults.getCompilerOptions()},diagnosticsOptions:{...l.current.languages.typescript.typescriptDefaults.getDiagnosticsOptions()},modeConfiguration:{...l.current.languages.typescript.typescriptDefaults.modeConfiguration}}},l.current.languages.typescript.javascriptDefaults.setCompilerOptions({allowNonTsExtensions:!0}),l.current.languages.typescript.typescriptDefaults.setCompilerOptions({}),l.current.languages.typescript.javascriptDefaults.setDiagnosticsOptions(sp),l.current.languages.typescript.typescriptDefaults.setDiagnosticsOptions(sp),l.current.languages.typescript.javascriptDefaults.setModeConfiguration(sm),l.current.languages.typescript.typescriptDefaults.setModeConfiguration(sm),l.current.editor.getModels()))l.current.editor.setModelMarkers(e,"Codespaces LSP",[])},[l]),f=(0,o.useCallback)(e=>{l.current&&e&&e===rO.$c.Typescript&&(c.current?.js&&(l.current.languages.typescript.javascriptDefaults.setCompilerOptions(c.current.js.compilerOptions),l.current.languages.typescript.javascriptDefaults.setDiagnosticsOptions(c.current.js.diagnosticsOptions),l.current.languages.typescript.javascriptDefaults.setModeConfiguration(c.current.js.modeConfiguration)),c.current?.ts&&(l.current.languages.typescript.typescriptDefaults.setCompilerOptions(c.current.ts.compilerOptions),l.current.languages.typescript.typescriptDefaults.setDiagnosticsOptions(c.current.ts.diagnosticsOptions),l.current.languages.typescript.typescriptDefaults.setModeConfiguration(c.current.ts.modeConfiguration)))},[l]);(0,o.useEffect)(()=>{if(!p||!d?.environment_data?.connection?.tunnelProperties||!n){if(s.current.length>0){for(let e of(t("lsp.clients.dispose",{codespaceId:d?.cloud_environment?.guid??"",codespaceState:u}),s.current))try{e.kill(),e.connection.dispose()}catch{}finally{e.disposed=!0}s.current=[]}if(l.current)for(let e of l.current.editor.getModels())l.current.editor.setModelMarkers(e,"Codespaces LSP",[]);return}let e=[...i].filter(e=>!s.current.some(t=>t.type===e));if(e.length>0){let a=async e=>{try{let a=await (0,rO.v0)(e,n,m);s.current=[...s.current,a],h(e),r1&&r1.enableLanguageFeaturesForAllModels(),t("lsp.client.creation.successful",{lsp_server_type:e})}catch{t("lsp.client.creation.error",{lsp_server_type:e})}};for(let t of e)a(t)}},[d,p,i,m,n,h,l,u]);let g=(0,o.useCallback)(async e=>{let t=s.current.find(t=>t.type===e);if(t)if(!t.disposed)return Promise.resolve(t);else return f(e),s.current=s.current.filter(e=>e!==t),null;return i.has(e)||r(t=>new Set([...t,e])),null},[f,s,i]);return{registerMonaco:(0,o.useCallback)((e,n)=>{if(e){(a=e).languages.typescript.javascriptDefaults.setEagerModelSync(!0),a.languages.typescript.typescriptDefaults.setEagerModelSync(!0),a.languages.typescript.typescriptDefaults.setDiagnosticsOptions(sp),a.languages.typescript.javascriptDefaults.setDiagnosticsOptions(sp),l.current=e;var a,i,r=s.current;if(r1){if(r1.monacoInstance!==e)throw Error("Only one Monaco instance can be connected to LSPs. This should not happen.");r1.getLspClient!==g&&(r1.getLspClient=g),r1.workspaceRoot!==m&&(r1.workspaceRoot=m),r.length>0&&(0,rO.Y1)(e=>{e===rO.xL.DISABLED&&(r1?.dispose(),r1=null)})}else{for(let[a,r]of((i=r1=new so(e,g,m,t,n)).setupCopilotCompletionV2(),i.registerHoverProvider(),i.registerCompletionProvider(),r4)){for(let e of r){let{model:t,initialFileContent:n}=e;r1.enableLanguageFeatures(t,a,n)}r4.delete(a)}}}},[g,m,t])}}(f,m,f.remoteProvider,[rO.$c.Typescript]),y=(0,sh.A)(d),b=(0,sh.A)(t),x=(0,o.useRef)(0),[v,w]=(0,o.useState)(!1),[_,S]=(0,o.useState)(!1),[C,k]=(0,o.useState)(t||nU.V8),[E,j]=(0,o.useState)(null),[N,A]=(0,o.useState)(null),[I,T]=(0,o.useState)("editor"),[R,M]=(0,o.useState)(!1),L=(0,sh.A)(C),P=(0,o.useCallback)(()=>{if(y&&!d){i([]),T("editor");return}if(!d){let e=sf();a.some(t=>t.path===e)&&r(),a.length>0&&i([])}},[d,y,a,i,r]),D=(0,o.useCallback)(()=>{let e=Date.now()-x.current,t=e<5e3&&0!==x.current;return{shouldDelay:t,remainingTime:t?5e3-e:0}},[]),$=(0,o.useCallback)(()=>{if(!d)return;let e=s(),t=a.findIndex(t=>"added"===t.changeType||"modified"===t.changeType&&e.find(e=>e.path===t.path)),o=a[t];if(!o)return;if(_){let e=window.setTimeout($,5e3);return()=>clearTimeout(e)}let{shouldDelay:l,remainingTime:m}=D();if(l){let e=window.setTimeout($,m);return()=>clearTimeout(e)}i(e=>e.slice(t+1)),T("editor");let p=o.path;if(sf()===p){j(p),r();return}u(c({sparkId:n.id,path:p})),k(p),j(p)},[d,s,a,_,D,i,u,c,n.id,r]);(0,o.useEffect)(()=>{C!==L&&(x.current=Date.now())},[C,L]),(0,o.useEffect)(()=>{null!==b&&t!==b&&k(t)},[t,b,C]),(0,o.useEffect)(()=>{P()},[P,a,d,y]),(0,o.useEffect)(()=>$(),[$,d,a]);let F=(0,o.useMemo)(()=>({ORIGINAL_CONTENTS_URI_PREFIX:r2,diffComputed:R,editorMode:I,editorPath:C,enableLanguageFeatures:r6,getLanguage:rO.Z0,hasInitializedModelValue:v,isAnimating:_,originalFileContent:N,registerMonaco:g,setDiffComputed:M,setEditorMode:T,setEditorPath:k,setHasInitializedModelValue:w,setIsAnimating:S,setOriginalFileContent:A,setWatchingPath:j,watchingPath:E}),[R,I,C,v,_,N,g,E]);return(0,l.jsx)(tE.p,{value:F,children:e})}try{sg.displayName||(sg.displayName="EditorContextProvider")}catch{}var sy=n(91747),sb=n(50534),sx=n(13773),sv=n(59696),sw=n(69449);async function s_(e){let t=new FileReader;return new Promise((n,a)=>{t.onloadend=e=>{n(e.target?.result)},t.onerror=a,t.readAsText(e)})}var sS=new WeakMap,sC=new WeakSet,sk=new WeakSet;let AzureBlobFileSyncerClient=class AzureBlobFileSyncerClient{async hasContent(){try{for await(let e of(0,ev._)(this,sS).listBlobsFlat())return!0;return!1}catch{return!1}}async openFile(e){let t=(0,eS._)(this,sC,sE).call(this,e),n=(0,ev._)(this,sS).getBlobClient(t);if(!await n.exists())throw Error(`File not found: ${e}`)}async createDirectory(e){}async deleteFile(e){}async renameFile(e,t){}async writeFileString(e,t,n){}async writeFileBytes(e,t){}async writeFileDiff(e,t){}async getIterationHistory(){return[]}async getLastCommit(){return{prompt:"",sha:"",iteration_type:"from_repository",files:{},suggestions:[],message:"",parentSha:null,branchName:""}}async readFileString(e){let t=(0,eS._)(this,sC,sE).call(this,e),n=(0,ev._)(this,sS).getBlobClient(t),a=await n.download(0);return await s_(await a.blobBody)}async readFileBytes(e){let t=await this.readFileString(e);return new TextEncoder().encode(t)}async readFileDiff(e){return{hunks:[],oldFileName:e,newFileName:e}}async getDirectoryContents(e){let t=[],n=await this.getFileManifest();for await(let e of(0,ev._)(this,sS).listBlobsFlat()){let a=(0,eS._)(this,sk,sj).call(this,e.name);if(!n||n.has(a)){let e={path:a,type:"file"};t.push(e)}}return t}async getFileManifest(){try{let e=(await this.readFileString(".file-manifest")).split(`
`).filter(e=>""!==e.trim());return new Set(e)}catch{return null}}async pauseFileWatchers(){}async resumeFileWatchers(){}async createCommit(e,t){return{sha:""}}async checkoutCommitish(e,t){return""}async getGitStatus(){return{}}async getGitCatFile(e,t){return""}async syncRepository(){return!1}async buildStaticPreview(){throw Error("Method not supported on blob file syncer.")}async executeCommand(e,t){throw Error("Method not implemented.")}async getCommitHistory(e,t){throw Error("Method not implemented.")}async getChangedFilesFiltered(e){throw Error("Method not implemented.")}dispose(){}constructor(e){(0,eC._)(this,sC),(0,eC._)(this,sk),(0,ew._)(this,sS,{writable:!0,value:void 0}),(0,e_._)(this,sS,new sw.b(e))}};function sE(e){let t=e.startsWith("/")?e.substring(1):e;return t.startsWith("spark-template/")||(t=`spark-template/${t}`),t}function sj(e){return e.replace(/^spark-template\//,"")}let CodespaceFileSyncerClient=class CodespaceFileSyncerClient{async openFile(e){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("openFile",{path:e})}async createDirectory(e){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("createDirectory",{path:e})}async deleteFile(e){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("deleteFile",{path:e})}async renameFile(e,t){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("renameFile",{oldPath:e,newPath:t})}async writeFileString(e,t){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("writeFileString",{path:e,content:t})}async writeFileBytes(e,t){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("writeFileBytes",{path:e,content:t})}async writeFileDiff(e,t){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("writeFileDiff",{path:e,diff:t})}async readFileString(e){if(this.isDisposed)throw Error("FileSyncer is disposed");return e.startsWith("src/assets/")?"":await this.jsonRpcClient.timeout(5e3).request("readFileString",{path:e})}async readFileBytes(e){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("readFileBytes",{path:e})}async readFileDiff(e){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("readFileDiff",{path:e})}async getDirectoryContents(e){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("getDirectoryContents",{path:e})}async pauseFileWatchers(){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("pauseFileWatchers",{})}async resumeFileWatchers(){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("resumeFileWatchers",{})}async createCommit(e,t,n){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(3e4).request("createCommit",{message:e,sasUri:t,writeIterationHistoryToGit:n})}async checkoutCommitish(e,t,n){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("checkoutCommitish",{sha:e,shouldForcePushToRemote:t,branchName:n})}async getGitStatus(){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("getGitStatus",{})}async getGitCatFile(e,t){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("getGitCatFile",{sha:e,path:t})}async syncRepository(){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("syncRepository",{})}async buildStaticPreview(){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(3e4).request("buildStaticPreview",{})}async executeCommand(e,t){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("executeCommand",{command:e,args:t})}async getCommitHistory(e,t){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("getCommitHistory",{maxCount:e,skip:t})}async getIterationHistory(){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(3e4).request("getIterationHistory",{})}async getLastCommit(){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("getLastCommit",{})}async getChangedFilesFiltered(e){if(this.isDisposed)throw Error("FileSyncer is disposed");return await this.jsonRpcClient.timeout(5e3).request("getChangedFilesFiltered",{sha:e})}dispose(){this.isDisposed=!0,this.jsonRpcClient.rejectAllPendingRequests("FileSyncerClient is disposed"),this.jsonRpcServer.removeMethod("notifyFileChanged"),this.connection.removeAllListeners("data"),this.connection.removeAllListeners(),this.connection.destroy()}constructor(e,t){(0,ek._)(this,"isDisposed",!1),(0,ek._)(this,"jsonRpcClient",void 0),(0,ek._)(this,"jsonRpcServer",void 0),(0,ek._)(this,"connection",void 0),this.jsonRpcClient=e.client,this.jsonRpcServer=e.server,this.connection=t}};function sN({children:e}){let{codespaceData:t}=(0,t2.M)(),n=(0,sy.u)("copilot_workbench_session_snapshot"),{onConnected:a,onDisconnected:i}=(0,p.MY)(),r=(0,n9._M)(),s=(0,tB.s)(),[c,d]=(0,o.useState)(!1),[u,m]=(0,o.useState)(-1),[h,f]=(0,o.useState)(-1),[g,y]=(0,o.useState)(-1),[b,x]=(0,o.useState)([]),v=(0,o.useRef)(null),w=(0,o.useRef)(null),_=(0,o.useRef)(null),S=(0,o.useCallback)(()=>v.current,[v]),C=(0,o.useCallback)(e=>{w.current=e},[]),[k,E]=(0,o.useState)(n?"blobStorage":"codespace"),{snapshotUploadUri:j}=(0,ty.B)(),N=(0,o.useCallback)(()=>{m(Date.now())},[]),A=(0,o.useCallback)(()=>{f(Date.now())},[]),I=(0,o.useCallback)(()=>{y(Date.now())},[]),T=(0,o.useCallback)(()=>{v.current?.dispose(),v.current=null,d(!1),i({service:p.kl.FILE_SYNCER})},[i]);(0,o.useEffect)(()=>{t?.codespaceState!=="ready"&&"codespace"===k&&c&&(T(),tL.Ay.log("FileSyncerContext: Codespace disconnected, stopping file syncer"))},[t?.codespaceState,T,c,i,k]);let R=(0,o.useCallback)(async e=>{_.current?.abort();let n=new AbortController;_.current=n;let a=await (0,ah.L)(async()=>n.signal.aborted?null:await e.getStreamFromPort(13e3,sb.TunnelProtocol.Http),{retries:12,retryDelayMs:5e3,shouldStopRetries:()=>!!n.signal.aborted&&(tL.Ay.log("FileSyncerContext: Aborting retries due to abort signal"),!0)});if(n.signal.aborted&&!a)throw tL.Ay.log("FileSyncerContext: Aborted connection attempt - this is normal if a new attempt is made"),Error("FileSyncerContext: Connection attempt aborted - this is normal if a new attempt is made");if(a)tL.Ay.log("FileSyncerContext: Established connection to file syncer");else throw tL.Ay.log("FileSyncerContext: Failed to establish connection to file syncer"),Error("FileSyncerContext: Failed to establish connection to file syncer");s("file_syncer.connection.success",{timestamp:new Date().toISOString(),...ay(t)});let i=new sx.JSONRPCClient(e=>{try{if(!a||!a.writable||a.destroyed||a.closed)return tL.Ay.log("FileSyncer:: Connection is not writable, rejecting request"),T(),Promise.reject(Error("Connection is not writable"));{let t=`${JSON.stringify(e)}
`;return a.write(t),Promise.resolve()}}catch(e){return Promise.reject(e)}}),r=new sx.JSONRPCServer;r.addMethod("notifyFileChanged",e=>{let t=e.map(e=>({...e,path:e.path.replace(/^\/workspaces\/[a-zA-Z0-9_-]+/,"")}));I(),A(),x(e=>{let n=t.filter(t=>!e.some(e=>e.path===t.path));return[...e,...n]})});let o=new sx.JSONRPCServerAndClient(r,i),l="";return a.on("data",e=>{if(!a.destroyed&&!a.closed)try{let t=(l+=e.toString()).split(`
`);for(let e of(l=t.pop()||"",t))if(e.trim()){let t=JSON.parse(e);o.receiveAndSend(t)}}catch(e){tL.Ay.log(`FileSyncer:: Error processing data: ${e}`)}}),a.on("close",()=>{tL.Ay.log("FileSyncer Connection closed"),o.rejectAllPendingRequests("Connection is closed"),T()}),tL.Ay.log("FileSyncerContext: FileSyncer client created and connected"),new CodespaceFileSyncerClient(o,a)},[T]);(0,o.useEffect)(()=>{c&&(t?.codespaceState==="ready"&&"codespace"===k||t?.codespaceState!=="ready"&&"blobStorage"===k)||!async function(){if("blobStorage"===k&&j&&n)if(t?.codespaceState==="ready")await e();else{let e=new AzureBlobFileSyncerClient(j);if(!await e.hasContent())return;v.current=e,d(!0),a({service:p.kl.FILE_SYNCER})}else c||t?.codespaceState!=="ready"||await e()}();async function e(){if(t.remoteProvider)try{v.current=await R(t.remoteProvider),E("codespace"),A(),N(),d(!0),tL.Ay.log("FileSyncerContext: Codespaces file syncer started"),a({service:p.kl.FILE_SYNCER})}catch(e){if(e instanceof sv.Y)tL.Ay.log("FileSyncerContext: Error occurred while starting Codespace syncer - BANNER",e),s("file_syncer.connection_reload_banner.displayed",{timestamp:new Date().toISOString(),errorMessage:e?.message,...ay(t)}),r({type:"SET_BANNER",banner:ax.x1.CONNECTION_RELOAD});else throw tL.Ay.log("FileSyncerContext: Error occurred while starting Codespace syncer - NO-BANNER",e),e}}},[t?.codespaceState,t.remoteProvider,k,j,n,c]);let M=(0,o.useMemo)(()=>({contentStateStamp:u,fileSyncerStarted:c,fileTreeStateStamp:h,lastEditStateStamp:g,notifyEdited:I,forceContentRefresh:N,forceFileTreeRefresh:A,getFileSyncerV2:S,syncerMode:k,setSyncerMode:E,fileContentsRef:w,fileChangeStack:b,setFileChangeStack:x,setFileContentsRef:C}),[u,c,h,g,I,N,A,S,k,b,x,C]);return(0,l.jsx)(tj.K,{value:M,children:e})}try{sN.displayName||(sN.displayName="FileSyncerContextProvider")}catch{}var sA=n(67180);function sI(e){return{isCollapsed:!0,pane:"terminal",history:(0,al.g4)(),tasks:e.tasks,codespaceData:e.codespaceData,previewUrl:e.previewUrl}}function sT({children:e}){let{codespaceData:t}=(0,t2.M)(),{dataScraper:n,forwardedUrl:a}=(0,sA.m)(t.remoteProvider),[i,r]=(0,o.useReducer)(al.DY,{codespaceData:t,tasks:{},previewUrl:a},sI);(0,o.useEffect)(()=>{r({type:"SET_CODESPACE_DATA",codespaceData:t})},[t.codespaceState,t.isRecoveryContainer,t.permissionsStatus]);let s=(0,o.useCallback)(()=>{let e=t.remoteProvider,n=t.codespaceInfo?.environment_data.connection.sessionPath;if(!e||!n)throw Error("Failed executing command");return{remoteProvider:e,sessionPath:n}},[t.remoteProvider,t.codespaceInfo?.environment_data.connection.sessionPath]),c=(0,o.useCallback)(async e=>{if(!t.remoteProvider)throw Error("Failed opening shell - remote provider not available");let a=await t.remoteProvider?.getTerminalChannel({...e});return a?.onDataReceived(e=>{n(e.toString("utf-8"))}),a},[t.remoteProvider,n]),d=(0,o.useCallback)(async(e,t)=>{let{remoteProvider:a,sessionPath:o}=s();return await new Promise(async s=>{let l="";r({type:"START_COMMAND",command:{command:e,task:t,output:l,collapsed:i.isCollapsed,exitCode:null,channel:null,loading:!0,stopped:!1,startTime:null,endTime:null}});let c=await a.getCommandChannel();c.onExitCode(({status:e})=>{let n=e??0;r({type:"COMPLETE_COMMAND",task:t,exitCode:n}),r({type:"SET_PREVIEW_URL",previewUrl:void 0}),s({exitCode:n,output:l})});let d=e=>{n(e),r({type:"UPDATE_COMMAND",task:t,output:l+=e})};c.onStandardOutput(d),c.onErrorOutput(d),c.executeCommand(`cd ${o} && ${e}`),r({type:"UPDATE_COMMAND",task:t,loading:!1,channel:c,startTime:new Date})})},[n,s]),u=(0,o.useCallback)(e=>{if(e.channel){e.channel.stop("INT"),r({type:"UPDATE_COMMAND",task:e.task,stopped:!0});return}e.loading&&r({type:"UPDATE_COMMAND",task:e.task,stopped:!0,startTime:null,endTime:null,exitCode:0,channel:null})},[]),m=(0,o.useCallback)(async e=>{u(e),await d(e.command,e.task)},[d,u]),p=(0,o.useMemo)(()=>({state:i,dispatch:r,executeCommand:d,openTerminalChannel:c,stopCommand:u,restartCommand:m,WindowChangeRequestMessage:rB.WindowChangeRequestMessage}),[i,d,u,m,c]);return(0,l.jsx)(n1.G,{value:p,children:e})}try{sT.displayName||(sT.displayName="TerminalContextProvider")}catch{}var sR=n(99183);let sM=(0,tY.u)(),sL="workbench_session_id";function sP({children:e}){let{workbench:t,copilotAccessAllowed:n,userAnalyticsTrackingId:a}=(0,ty.B)(),i=rj(),r=(0,o.useCallback)(()=>{let e;return{feature_flags:{},workbench_id:t.id,runtime_permanent_name:t.runtime.app.permanentName,runtime_session_id:sM,browser_session_id:(e=sessionStorage.getItem(sL))||(sessionStorage.setItem(sL,(0,tY.u)()),sessionStorage.getItem(sL)??"cannot-use-session-storage"),copilot_access_allowed:n,user_analytics_tracking_id:a,page_visibility_state:i.state,page_visibility_session_id:i.sessionId}},[n,a,t.id,t.runtime.app.permanentName,i.state,i.sessionId]);return(0,l.jsx)(sR.Bl,{name:"global",metadata:r,children:e})}try{sM.displayName||(sM.displayName="APP_RUNTIME_SESSION_ID")}catch{}try{sP.displayName||(sP.displayName="GlobalAnalyticsContextProvider")}catch{}function sD(e){let t=(0,ty.B)(),{copilotAccessAllowed:n,refInfo:a,path:i,repo:r,copilot:s,findFileWorkerPath:c,workbench:u}=t,[h]=o.useState(t?.currentUser),f=(0,e3.Vv)(u.id),g={"workspace-editor:toggle-file-tree-pane":rL.l,[(0,U.U0)()?"workspace-editor:escape-editor--mac":"workspace-editor:escape-editor"]:rL.l};return(0,l.jsxs)(m.LB,{initialValue:m.Gy.xxxlarge,children:[(0,l.jsx)(iO.ak,{commands:g}),(0,l.jsx)(rE,{children:(0,l.jsx)(sP,{children:(0,l.jsx)(n6.Q,{user:h,children:(0,l.jsx)(rT.qV,{refInfo:a,path:i,action:"blob",copilotAccessAllowed:n,children:(0,l.jsx)(rM.d,{repository:r,children:(0,l.jsx)(r$.D,{children:(0,l.jsx)(rP.Nq,{children:(0,l.jsx)(rD.TC,{children:(0,l.jsx)(d.Mj,{topic:s.currentTopic,workerPath:c,threadId:f,refs:[],mode:"assistive",ssoOrganizations:s.ssoOrganizations,copilotChatPayload:s,children:(0,l.jsx)(p.c8,{children:(0,l.jsx)(nr.m_,{children:(0,l.jsx)(n9.em,{children:(0,l.jsx)(rR.BH,{children:(0,l.jsx)(rY,{children:(0,l.jsx)(sN,{children:(0,l.jsx)(ni.Ac,{children:(0,l.jsx)(tI.e$,{children:(0,l.jsx)(sg,{children:(0,l.jsx)(sT,{children:(0,l.jsx)(rX.Dt,{runtimePermanentName:u.runtime.app.permanentName,children:(0,l.jsx)(tN.Z8,{children:(0,l.jsx)(ad.Nz,{children:(0,l.jsx)(rF.v,{children:(0,l.jsx)(tA.BV,{children:(0,l.jsx)(ac.iF,{children:e.children})})})})})})})})})})})})})})})})})})})})})})})})})]})}try{sD.displayName||(sD.displayName="SharedWorkbenchContext")}catch{}function s$(e){return(0,l.jsx)(w.w,{children:e.children})}let sF=(0,o.memo)(s$);try{s$.displayName||(s$.displayName="BridgeComponent")}catch{}try{sF.displayName||(sF.displayName="SparkBridge")}catch{}let sO=()=>o.createElement(sD,{},o.createElement(rI,{Editor:ny}));(0,s.o)("workbench",()=>({App:sF,routes:[(0,r.a)({path:"/copilot/spark/:spark_id",Component:sO}),(0,r.a)({path:"/copilot/spark/:spark_id/file/:path/*",Component:sO}),(0,r.a)({path:"/spark/:owner/:id",Component:sO}),(0,r.a)({path:"/spark/:owner/:id/file/:path/*",Component:sO}),(0,r.a)({path:"/spark",Component:tu})]}))},88315:(e,t,n)=>{"use strict";n.d(t,{P$:()=>i,V8:()=>a});let a="src/App.tsx",i={ACTION_UNAVAILABLE_ITERATION:"Action unavailable while iterating",ACTION_UNAVAILABLE_MODE:"Action unavailable in this mode",ACTION_UNAVAILABLE_READ_ONLY:"Action unavailable in read-only mode",ACTION_UNAVAILABLE:"Action unavailable",ACTION_LOADING:"Action loading"}},89237:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var a=n(74848),i=n(16522);function r(e){let t,n,r,s,o,l=(0,i.c)(8);return l[0]!==e?({className:t,...n}=e,l[0]=e,l[1]=t,l[2]=n):(t=l[1],n=l[2]),l[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsxs)("g",{clipPath:"url(#clip0_216_3161)",children:[(0,a.jsx)("path",{d:"M7.99837 7.99967C7.99837 6.52683 9.1922 5.33301 10.665 5.33301C12.1379 5.33301 13.3317 6.52683 13.3317 7.99967C13.3317 9.47252 12.1379 10.6663 10.665 10.6663C9.1922 10.6663 7.99837 9.47252 7.99837 7.99967Z",fill:"#1ABCFE"}),(0,a.jsx)("path",{d:"M2.66504 13.3337C2.66504 11.8608 3.85886 10.667 5.33171 10.667H7.99837V13.3337C7.99837 14.8065 6.80455 16.0003 5.33171 16.0003C3.85886 16.0003 2.66504 14.8065 2.66504 13.3337Z",fill:"#0ACF83"}),(0,a.jsx)("path",{d:"M7.99837 0V5.33333H10.665C12.1379 5.33333 13.3317 4.13951 13.3317 2.66667C13.3317 1.19382 12.1379 0 10.665 0H7.99837Z",fill:"#FF7262"}),(0,a.jsx)("path",{d:"M2.665 2.66667C2.665 4.13951 3.85883 5.33333 5.33167 5.33333H7.99833V0H5.33167C3.85883 0 2.665 1.19382 2.665 2.66667Z",fill:"#F24E1E"}),(0,a.jsx)("path",{d:"M2.66504 7.99967C2.66504 9.47252 3.85886 10.6663 5.33171 10.6663H7.99837V5.33301H5.33171C3.85886 5.33301 2.66504 6.52683 2.66504 7.99967Z",fill:"#A259FF"})]}),l[3]=r):r=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_216_3161",children:(0,a.jsx)("rect",{width:"10.6667",height:"16",fill:"white",transform:"translate(2.665)"})})}),l[4]=s):s=l[4],l[5]!==t||l[6]!==n?(o=(0,a.jsxs)("svg",{"aria-label":"Figma logo",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,...n,children:[r,s]}),l[5]=t,l[6]=n,l[7]=o):o=l[7],o}try{r.displayName||(r.displayName="FigmaIcon")}catch{}},91230:(e,t,n)=>{"use strict";n.d(t,{E7:()=>O});var a=n(74848),i=n(96540);let r=(0,i.createContext)({actions:[],staticMenuActions:[],label:"Actions",gap:0}),s=({children:e,value:{actions:t=[],staticMenuActions:n,variant:s="toolbar",label:o,gap:l}})=>{let c=(0,i.useMemo)(()=>({actions:t,staticMenuActions:n,variant:s,label:o,gap:l}),[t,n,s,o,l]);return(0,a.jsx)(r,{value:c,children:e})},o=()=>{let e=(0,i.use)(r);if(!e)throw Error("useActionBarContent must be used with ActionBarContentProvider.");return e};try{r.displayName||(r.displayName="ActionBarContentContext")}catch{}try{s.displayName||(s.displayName="ActionBarContentProvider")}catch{}let l=(0,i.createContext)({outerContainerRef:(0,i.createRef)(),itemContainerRef:(0,i.createRef)()}),c=({value:{anchorRef:e},children:t})=>{let n=(0,i.useRef)(null),r=(0,i.useRef)(null),s=(0,i.useMemo)(()=>({outerContainerRef:n,itemContainerRef:r,anchorRef:e}),[e]);return(0,a.jsx)(l,{value:s,children:t})},d=()=>(0,i.use)(l);try{l.displayName||(l.displayName="ActionBarRefContext")}catch{}try{c.displayName||(c.displayName="ActionBarRefProvider")}catch{}var u=n(73189),m=n(80293),p=n(93330);let h=e=>{if(!e)return 0;let t=window.getComputedStyle(e);return t?.columnGap?parseInt(t.columnGap,10):0},f=(e,t)=>{let n=window.getComputedStyle(e),a=parseInt(n.marginLeft,10)||0,i=parseInt(n.marginRight,10)||0;return e.offsetWidth+a+i+2*t},g=(e,t)=>{let n=y(e,t);if(void 0===n)return;let a=n;return t&&(a-=t.offsetLeft),a},y=(e,t)=>{if(!e)return;let n=e.offsetWidth;return t&&(n-=t.offsetWidth),n},b=(0,i.createContext)({visibleChildEndIndex:0,justifySpaceBetween:!1,recalculateItemSize:u.l}),x=({children:e,value:{actionKeys:t}})=>{let n=t.length,[r,s]=(0,m.N)(n),{outerContainerRef:o,itemContainerRef:l}=d(),[c,u]=(0,i.useState)(),[x,v]=(0,i.useState)(),[w,_]=(0,i.useState)(()=>new Map(t.map(e=>[e,void 0]))),[S,C]=(0,i.useState)(!1),k=(0,i.useMemo)(()=>t.slice(0,r).every(e=>w.has(e)&&"number"==typeof w.get(e)),[t,w,r]),E=(0,i.useCallback)(e=>{let n=t[e];if(n)return w.get(n)},[t,w]),j=(0,i.useCallback)((e,t)=>{let n=l.current;if(!n)return;let a=f(t,h(n));_(t=>{if(a===t.get(e)||isNaN(a))return t;let n=new Map(Array.from(t.entries()));return n.set(e,a),n})},[l]),N=(0,i.useCallback)(()=>{if(!k)return;let e=o.current,t=l.current,n=y(e,t);if(void 0===n)return;let a=g(e,t);void 0!==a&&n<=a&&s(Math.max(0,r-1))},[k,o,l,s,r]),A=(0,i.useCallback)(()=>{let e=o.current,t=l.current,a=y(e,t);if(void 0===a)return;let i=E(r);if(void 0===i)return;let c=g(e,t);void 0!==c&&a>c+i&&s(Math.min(n,r+1))},[o,l,E,r,s,n]),I=(0,i.useCallback)(()=>{let e=o.current,t=l.current;if(!e||!t)return;let n=e.offsetWidth;n&&(void 0===c||n<=c?N():n>c&&A(),u(n),C(n<=(x??t.offsetWidth)))},[A,N,x,c,o,l]);(0,i.useLayoutEffect)(()=>{let e=l.current;if(!e)return;let n=[];for(let a of t){let t=e.querySelector(`[data-action-bar-item="${a}"]`);t&&n.push({key:a,el:t})}_(((e,t)=>{let n=new Map;if(0===e.length)return n;let a=h(t);for(let{key:t,el:i}of e)n.set(t,f(i,a));return n})(n,e))},[t,l]),(0,i.useLayoutEffect)(()=>{let e=l.current;e&&v(e.offsetWidth)},[l]),(0,i.useLayoutEffect)(()=>{I()},[I]),(0,p.w)(I,o);let T=(0,i.useMemo)(()=>({visibleChildEndIndex:r,justifySpaceBetween:S,recalculateItemSize:j}),[r,S,j]);return(0,a.jsx)(b,{value:T,children:e})},v=()=>(0,i.use)(b);try{b.displayName||(b.displayName="ActionBarResizeContext")}catch{}try{x.displayName||(x.displayName="ActionBarResizeProvider")}catch{}var w=n(29731),_=n(97068),S=n(45800),C=n(34164),k=n(38621),E=n(94236),j=n(26108),N=n(5524),A=n(12683);let I=k.KebabHorizontalIcon,T="invisible",R=({anchorProps:{"aria-label":e,icon:t=I,variant:n=T,...r}={icon:I,variant:T},open:s,onOpenChange:l})=>{let{anchorRef:c}=d(),{actions:u,staticMenuActions:m,label:p}=o(),{visibleChildEndIndex:h}=v(),f=(0,i.useMemo)(()=>(0,A.h1)(r,{"aria-label":e?.trim()||`More ${p}`,icon:t,className:"OverflowMenu-module__IconButton_0--cxtvS",variant:n}),[e,t,p,n,r]),g=(0,i.useMemo)(()=>u?.slice(h),[u,h]),y=g&&g.length>0,b=m&&m.length>0;return y||b?(0,a.jsxs)(E.W,{anchorRef:c,open:s,onOpenChange:l,children:[(0,a.jsx)(E.W.Anchor,{children:(0,a.jsx)(j.K,{...(0,w.G)("overflow-menu-anchor"),...f})}),(0,a.jsx)(E.W.Overlay,{align:"end","data-overflow-menu-overlay":!0,children:(0,a.jsxs)(N.l,{children:[b&&m.map(e=>(0,a.jsx)(i.Fragment,{children:e.render()},e.key)),g?.map(e=>(0,a.jsx)(i.Fragment,{children:e.render(!0)},e.key))]})})]}):null};try{R.displayName||(R.displayName="OverflowMenu")}catch{}var M=n(50463);let L=({children:e,actionKey:t})=>{let n=(0,i.useRef)(null),{recalculateItemSize:r}=v();return(0,M.A)(()=>{n.current&&r(t,n.current)},[n,r,t]),(0,a.jsx)("div",{...(0,w.G)(`action-bar-item-${t}`),"data-action-bar-item":t,ref:n,className:"VisibleItem-module__Box_0--BsJkb",children:e})};try{L.displayName||(L.displayName="VisibleItem")}catch{}let P=({className:e,style:t})=>{let{itemContainerRef:n}=d(),{actions:i,gap:r}=o(),{visibleChildEndIndex:s}=v(),l=i?.slice(0,s);return(0,a.jsx)("div",{...(0,w.G)("action-bar"),ref:n,className:(0,C.$)(e,"VisibleItems-module__Box_1--LOtDr"),style:{gap:r,...t},children:l?.map(({key:e,render:t})=>(0,a.jsx)(L,{actionKey:e,children:t(!1)},e))})};try{P.displayName||(P.displayName="VisibleItems")}catch{}let D=({overflowMenuToggleProps:e,overflowMenuProps:t,children:n,...i})=>{let{outerContainerRef:r}=d(),{label:s,variant:l,gap:c}=o(),{justifySpaceBetween:u}=v();return(0,S.G)({containerRef:r,bindKeys:_.z0.ArrowHorizontal|_.z0.HomeAndEnd,focusOutBehavior:"wrap",disabled:"toolbar"!==l},[r]),(0,a.jsxs)("div",{ref:r,...(0,w.G)("action-bar-container"),role:"toolbar"===l?"toolbar":void 0,"aria-label":"toolbar"===l?s:void 0,style:{gap:c},className:(0,C.$)("VisibleAndOverflowContainer-module__Box_0--KyT2b",u&&"VisibleAndOverflowContainer-module__space--fVHr3"),children:[(0,a.jsx)(P,{...i}),n,(0,a.jsx)(R,{anchorProps:e,...t})]})};try{D.displayName||(D.displayName="VisibleAndOverflowContainer")}catch{}let $="normal",F=({children:e,...t})=>(0,a.jsx)(D,{...t,children:e}),O=({actions:e=[],staticMenuActions:t,overflowMenuToggleProps:n,overflowMenuProps:r,children:o,label:l,variant:d,density:u=$,anchorRef:m,className:p,style:h})=>{let f=(0,i.useMemo)(()=>({actions:e,staticMenuActions:t,variant:d,label:l,gap:"condensed"===u?"var(--base-size-4)":"spacious"===u?"var(--base-size-16)":"none"===u?0:"var(--base-size-8)"}),[e,t,d,l,u]),g=(0,i.useMemo)(()=>({actionKeys:e.map(e=>e.key)}),[e]),y=t&&t.length>0,b=e&&e.length>0;if(!b&&!y)return null;let v={overflowMenuToggleProps:n,overflowMenuProps:r,className:p,style:h};return(0,a.jsx)(c,{value:{anchorRef:m},children:(0,a.jsx)(s,{value:f,children:b?(0,a.jsx)(x,{value:g,children:(0,a.jsx)(F,{...v,children:o})}):(0,a.jsx)(F,{...v,children:o})})})};try{F.displayName||(F.displayName="InternalActionBar")}catch{}try{O.displayName||(O.displayName="ActionBar")}catch{}},93380:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var a=n(16522),i=n(96540);function r(e){let t,n,r,s=(0,a.c)(4),[o,l]=(0,i.useState)(e);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>l(!0),s[0]=t):t=s[0];let c=t;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>l(!1),s[1]=n):n=s[1];let d=n;return s[2]!==o?(r=[o,c,d],s[2]=o,s[3]=r):r=s[3],r}},93515:(e,t,n)=>{"use strict";n.d(t,{vA:()=>a.v,iY:()=>r,Qx:()=>s});var a=n(84231),i=n(41256);function r(e,t){if(null==e)throw"string"==typeof t?new i.pf(t):t}function s(e,t){let n="Codespace info is not valid";(0,a.v)("environment_data"in e,`${t}: ${n} because environment data is not set.`),(0,a.v)("cloud_environment"in e,`${t}: ${n} because cloud environment data is not set.`)}},95378:(e,t,n)=>{"use strict";n.d(t,{kx:()=>k,ao:()=>C});var a,i,r=n(74848),s=n(20263),o=n(73017),l=n(29731),c=n(34164),d=n(96540),u=n(56825),m=n(35220),p=n(29622),h=n(87670),f=n(46720),g=n(24347);let y="Selection-module__centerAligned--HIRyI",b="Selection-module__compact--azMKM";var x=n(60257),v=n(74501);let w=()=>{let{variant:e}=(0,m.e)(),{isSelectable:t,hasDragHandle:n}=(0,g.v)(),{isSelected:a,onSelect:i}=(0,x.r)(),{title:s}=(0,v.J)(),{alignment:o}=(0,p.m)();return t?(0,r.jsxs)("div",{className:(0,c.$)(n?"Selection-module__containerWithDragHandle--mLWh4":"Selection-module__container--OQE4d","center"===o&&y),...(0,l.G)("list-view-item-selection"),children:[n&&(0,r.jsx)(h.BS.DragTrigger,{className:(0,c.$)("Selection-module__dragTrigger--SM4bZ","compact"===e&&b)}),(0,r.jsx)(f.A,{className:(0,c.$)("Selection-module__checkbox--X3ras","compact"===e&&b,"center"===o&&y),checked:a,onChange:()=>i(!a),"aria-label":`Select: ${s}`,"data-listview-component":"selection-input",...(0,l.G)("list-view-item-selection-input")})]}):null};try{w.displayName||(w.displayName="ListItemSelection")}catch{}let _="Title-module__compact--eK6hD";function S({children:e,containerStyle:t,containerClassName:n,headerContainerRef:a,headingStyle:i,headingClassName:s,headingRef:o,leadingBadge:d,trailingBadges:h,header:f}){let{variant:g}=(0,m.e)(),{headingRef:y}=(0,v.J)(),{alignment:b}=(0,p.m)(),x=(0,u.m)("listitem");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{...(0,l.G)("list-view-item-title-container"),style:t,className:(0,c.$)("Title-module__container--XD9YG","compact"===g&&_,"center"===b&&"Title-module__centerAligned--J8aYA",n),ref:a,"data-listview-item-title-container":!0,children:[(0,r.jsxs)(x,{className:(0,c.$)("Title-module__heading--s7YnL","compact"===g&&_,s),style:i,ref:e=>{if(y&&(y.current=e),o&&"current"in o)try{o.current=e}catch{}},...(0,l.G)("list-view-item-title"),children:[d,f]}),h&&(0,r.jsx)("span",{className:"Title-module__trailingBadgesSpacer--Son9W"}),(0,r.jsx)("span",{className:"Title-module__trailingBadgesContainer--mijcn",children:h}),e]}),(0,r.jsx)(w,{})]})}function C({children:e,value:t,containerStyle:n,containerClassName:a,headerContainerRef:i,headingStyle:s,headingClassName:o,headingRef:l,leadingBadge:c,trailingBadges:u,anchorRef:m,...p}){let h=(0,d.useRef)(null),f=m||h;return j({anchorRef:f,...p}),(0,r.jsx)(S,{header:p.href||p.onClick?(0,r.jsx)(E,{anchorRef:f,...p,children:(0,r.jsx)("span",{children:t})}):(0,r.jsx)("span",{children:t}),containerStyle:n,containerClassName:a,headerContainerRef:i,headingStyle:s,headingClassName:o,headingRef:l,leadingBadge:c,trailingBadges:u,children:e})}function k({children:e,html:t,containerStyle:n,containerClassName:a,headerContainerRef:i,headingStyle:o,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return j(m),(0,r.jsx)(S,{header:(0,r.jsx)(s.BC,{html:t,...m}),containerStyle:n,containerClassName:a,headerContainerRef:i,headingStyle:o,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}function E({anchorStyle:e,anchorClassName:t,anchorRef:n,linkProps:a,children:i,...s}){let{as:o="a",...u}=a??{},m=(0,d.useRef)(null);return(0,r.jsx)(o,{...(0,l.G)("listitem-title-link"),style:e,ref:n||m,className:(0,c.$)("Title-module__anchor--GmXUE","Title-module__inline--oM0P7",t),...s,...u,children:i})}let j=({href:e,onClick:t,anchorRef:n})=>{let{setTitleAction:a,headingRef:i}=(0,v.J)();return(0,d.useEffect)(()=>{(e||t)&&a(()=>t=>{if(e&&(t.metaKey||t.ctrlKey))window.open(e,"_blank");else if(n?.current)n.current.click();else if(i?.current){let e=i.current.querySelector("a, button");e&&e.click()}})},[n,i,e,t,a]),null};try{S.displayName||(S.displayName="InternalTitle")}catch{}try{(a=TitleTag).displayName||(a.displayName="TitleTag")}catch{}try{C.displayName||(C.displayName="ListItemTitle")}catch{}try{k.displayName||(k.displayName="ListItemSafeHTMLTitle")}catch{}try{(i=function({children:e,html:t,containerStyle:n,containerClassName:a,headerContainerRef:i,headingStyle:s,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return j(m),(0,r.jsx)(S,{header:(0,r.jsx)(o.JR,{html:t,...m}),containerStyle:n,containerClassName:a,headerContainerRef:i,headingStyle:s,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}).displayName||(i.displayName="ListItemUnsafeHTMLTitle")}catch{}try{E.displayName||(E.displayName="HeadingLink")}catch{}},95455:(e,t,n)=>{"use strict";n.d(t,{Dt:()=>f,sL:()=>g});var a=n(74848),i=n(96379),r=n(96540),s=n(60190),o=n(49080);let l="sparkKvUpdated",c="sparkKvDeleted";var d=n(47927),u=n(15164);let m=(e,t)=>{let n=encodeURIComponent(t);return`/copilot/spark/runtime/data/${e}/${n}`};function p(e){let t=document.getElementById(s.$n);t&&t.contentWindow&&t.contentWindow.postMessage(e,"*")}let h=(0,r.createContext)(void 0),f=({runtimePermanentName:e,children:t})=>{let{onError:n,onSuccess:s}=(0,u.MY)(),{iterateStarted:f,iterateError:g,iterateSuccess:y}=(0,o.Y)("data_panel"),[b,x]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[_,S]=(0,r.useState)([]),C=(e,t)=>{S(n=>{let a=(0,d._)(t);return -1!==(n?.findIndex(t=>t.table===e)??-1)?n.map(t=>t.table===e?{...t,data:a}:t):[...n||[],{table:e,data:a}]})},k=e=>{S(t=>t?.filter(t=>t.table!==e))},E=(0,r.useCallback)(async t=>{x(!0);try{let n=await (0,i.DI)(m(e,t));if(!n.ok)return w(!0),x(!1),Promise.reject(Error(`Failed to fetch specific key: response=[${n.status}]`));let a=await n.text();C(t,a),w(!1),x(!1)}catch(e){return w(!0),x(!1),Promise.reject(Error(`Failed to fetch specific key: ${e}`))}finally{x(!1)}},[e]),j=(0,r.useCallback)(async()=>{x(!0);try{let t,a=await (0,i.lS)((t=e,`/copilot/spark/runtime/data/${t}`));if(!a.ok){x(!1),w(!0),n({service:u.kl.RUNTIME});return}let r=await a.json(),o=(await Promise.allSettled(r.map(async t=>{let n=await (0,i.DI)(m(e,t));if(!n.ok)return Promise.reject(Error(`Failed to fetch specific key: response=[${n.status}]`));let a=await n.text();return{table:t,data:(0,d._)(a)}}))).filter(e=>"fulfilled"===e.status).map(e=>e.value);w(!1),x(!1),s({service:u.kl.RUNTIME}),S(o)}catch{w(!0)}finally{x(!1)}},[e,s,n]),N=(0,r.useCallback)(async(t,n)=>{let a=f();try{let r=await (0,i.DI)(m(e,t),{method:"POST",body:JSON.stringify(n.data)});if(!r.ok){let e=`Failed to update key in database: response=[${r.status}]`;return g(e,r.status,a),Promise.reject(Error(e))}y(a),p({type:l,payload:{key:t}}),S(e=>e?.some(e=>e.table===t)?e?.map(e=>e.table===t?{...e,data:n}:e):[...e||[],{table:t,data:n}])}catch(t){let e=`Failed to update key in database: ${t}`;return g(e,-1,a),Promise.reject(Error(e))}},[g,f,y,e]),A=(0,r.useCallback)(async t=>{let n=f();try{let a=await (0,i.lS)(m(e,t),{method:"DELETE"});if(!a.ok){let e=`Failed to delete key from database: response=[${a.status}]`;return g(e,a.status,n),Promise.reject(Error(e))}y(n),p({type:c,payload:{key:t}}),k(t)}catch(t){let e=`Failed to delete key from database: ${t}`;return g(e,-1,n),Promise.reject(Error(e))}},[g,f,y,e]),I=(0,r.useCallback)(async()=>{let t=[..._];try{for(let n of _){let a=await (0,i.lS)(m(e,n.table),{method:"DELETE"});if(!a.ok)return Promise.reject(Error(`Failed to delete key from database: response=[${a.status}]`));t.splice(t.findIndex(e=>e.table===n.table),1)}}catch(e){return Promise.reject(Error(`Failed to delete key from database: ${e}`))}finally{S(t)}},[_,e]);(0,r.useEffect)(()=>{j()},[j]);let T=(0,r.useCallback)(async e=>{switch(e.data?.type){case l:{let{key:t,value:n}=e.data.payload;n&&"string"==typeof n?C(t,n):await E(t);break}case c:{let{key:t}=e.data.payload;k(t)}}},[E]);(0,r.useEffect)(()=>(window.addEventListener("message",T),()=>{window.removeEventListener("message",T)}),[T]);let R=(0,r.useMemo)(()=>({fetchAllData:j,fetchSpecificKey:E,updateKeyInDatabase:N,deleteKeyFromDatabase:A,resetDatabase:I,isFetchingData:b,didErrorFetchingData:v,currentData:_}),[j,E,N,A,I,b,v,_]);return(0,a.jsx)(h,{value:R,children:t})},g=()=>{let e=(0,r.use)(h);if(!e)throw Error("useDatabaseContext must be used within a DatabaseProvider");return e};try{h.displayName||(h.displayName="DatabaseContext")}catch{}try{f.displayName||(f.displayName="DatabaseProvider")}catch{}},95507:(e,t,n)=>{"use strict";n.d(t,{BV:()=>g,kH:()=>y});var a=n(74848),i=n(96540),r=n(76648),s=n(60190),o=n(44048),l=n(41339),c=n(15164),d=n(47620),u=n(94747),m=n(97286),p=n(49080);function h(e){let t=document.getElementById(s.$n);t&&t.contentWindow&&t.contentWindow.postMessage(e,"*")}let f=i.createContext(void 0);function g({children:e}){let t=(0,i.useRef)(null),n=function(e){let t=(0,r.B)(),{sparkFileUrl:n}=(0,l._C)(),{isAgentBusy:a}=(0,c.dt)(),{codespaceData:s}=(0,o.M)(),{friendlyName:f}=s.codespaceInfo?.environment_data||{},g=s.remoteProvider?.tunnelProps.domain??"app.github.dev",y=(0,i.useMemo)(()=>f&&g?`https://${f}-4000.${g}`:"",[f,g]),b=s.codespaceInfo?.environment_data.connection.tunnelProperties?.connectAccessToken||"",[x,v]=(0,i.useState)(!1),[w,_]=(0,i.useState)(null),S=(0,i.useRef)(null),C=(0,i.useRef)(null),k=(0,i.useRef)(null),E=(0,i.useRef)(null),j=(0,i.useRef)(null),N=x?"targeted_sidebar":"theme_panel",{mutateAsync:A}=((e,t,n)=>{let{onError:a,onSuccess:i}=(0,c.MY)(),{iterateStarted:r,iterateError:s,iterateSuccess:o}=(0,p.Y)(n);return(0,u.n)({mutationFn:async n=>{let l=r(),d=await fetch(`${e}/jsx/class-name`,{method:"POST",headers:{"Content-Type":"application/json","X-Tunnel-Authorization":`tunnel ${t}`},body:JSON.stringify(n)});if(!d.ok)throw s(await d.text()||"Network response was not ok",d.status,l),a({service:c.kl.DESIGNER}),Error("Network response was not ok");return o(l),i({service:c.kl.DESIGNER}),d.json()}})})(y,b,N),{mutateAsync:I}=((e,t,n)=>{let{onError:a,onSuccess:i}=(0,c.MY)(),{iterateStarted:r,iterateError:s,iterateSuccess:o}=(0,p.Y)(n);return(0,u.n)({mutationFn:async n=>{let l=r(),d=await fetch(`${e}/jsx/text`,{method:"POST",headers:{"Content-Type":"application/json","X-Tunnel-Authorization":`tunnel ${t}`},body:JSON.stringify(n)});if(!d.ok)throw s(await d.text()||"Network response was not ok",d.status,l),a({service:c.kl.DESIGNER}),Error("Network response was not ok");return o(l),i({service:c.kl.DESIGNER}),d.json()}})})(y,b,N),{mutateAsync:T}=((e,t,n)=>{let{onError:a,onSuccess:i}=(0,c.MY)(),{iterateStarted:r,iterateError:s,iterateSuccess:o}=(0,p.Y)(n);return(0,u.n)({mutationFn:async n=>{let l=r(),d=await fetch(`${e}/css/global-variable`,{method:"POST",headers:{"Content-Type":"application/json","X-Tunnel-Authorization":`tunnel ${t}`},body:JSON.stringify(n)});if(!d.ok)throw s(await d.text()||"Network response was not ok",d.status,l),a({service:c.kl.DESIGNER}),Error("Network response was not ok");return o(l),i({service:c.kl.DESIGNER}),d.json()}})})(y,b,N),{mutateAsync:R}=((e,t,n)=>{let{iterateStarted:a,iterateError:i,iterateSuccess:r}=(0,p.Y)(n);return(0,u.n)({mutationFn:async n=>{let s=a(),o=await fetch(`${e}/css/theme`,{method:"POST",headers:{"Content-Type":"application/json","X-Tunnel-Authorization":`tunnel ${t}`},body:JSON.stringify(n)});if(!o.ok)throw i(await o.text()||"Network response was not ok",o.status,s),Error("Network response was not ok");return r(s),o.json()}})})(y,b,N),{mutateAsync:M}=(0,u.n)({mutationFn:async e=>{let t=await fetch(`${y}/fonts`,{method:"POST",headers:{"Content-Type":"application/json","X-Tunnel-Authorization":`tunnel ${b}`},body:JSON.stringify({input:e})});if(!t.ok)throw Error("Network response was not ok");return t.json()}}),{data:L,refetch:P}=(0,m.I)({queryKey:["theme-variables"],queryFn:async()=>{let e=await fetch(`${y}/css/theme`,{headers:{"X-Tunnel-Authorization":`tunnel ${b}`}});if(!e.ok)throw Error("Network response was not ok");let{variables:t}=await e.json();return t},enabled:!!y&&!!b}),D=(0,d.e)(),$=(0,i.useCallback)(async()=>{v(!0),h({type:"spark:designer:bridge:enable"}),e("Element selector mode enabled. Use Tab to navigate between elements, Shift+Enter to cycle edit modes, or Escape to exit selector mode.")},[e]),F=(0,i.useCallback)(()=>{v(!1),_(null),h({type:"spark:designer:bridge:disable"}),E.current&&E.current.focus()},[]);(0,i.useEffect)(()=>{let e=e=>{switch(e.data.type){case"spark:designer:host:element:selected":{_(e.data.element);let{location:t,component:n}=e.data.element,a=t?.start.filePath??n.location?.start.filePath;a&&D(a);return}case"spark:designer:bridge:element:updated":{let t=e.data.element;_(e=>e?t:e);return}case"spark:designer:bridge:element:deselected":return void _(null);case"spark:designer:host:focus-input-requested":{let{buttonDataLoc:t}=e.data;C.current=t,k.current&&k.current.focus();return}case"spark:designer:host:disable-requested":return void F()}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[y,b,D,t.workbench.id,n,F,x]);let O=(0,i.useCallback)(()=>{x?F():$()},[x,F,$]);return(0,i.useEffect)(()=>{a&&F()},[a,F]),(0,i.useEffect)(()=>{if(w){if(null!==w.text&&w.text!==S.current?.text){let e=w.location??w.component.location;I({filePath:e.start.filePath,line:e.start.line,column:e.start.column,content:w.text})}S.current=w}},[I,w]),(0,i.useMemo)(()=>({targetedEditsEnabled:x,disableTargetedEdits:F,toggleTargetedEdits:O,selectedElement:w,modifyJsxClassName:A,modifyJsxText:I,modifyGlobalCssVariable:T,modifyThemeVariables:R,modifyFontFamily:M,themeVariables:L,refetchThemeVariables:P,inputRef:k,lastFocusedButtonLocRef:C,selectButtonRef:E,themePanelRef:j}),[x,w,F,O,A,I,T,R,M,L,P])}((0,i.useCallback)(e=>{t.current&&(t.current.textContent=e)},[]));return(0,a.jsxs)(f,{value:n,children:[e,(0,a.jsx)("div",{ref:t,role:"status","aria-live":"polite","aria-atomic":"true",style:{position:"absolute",left:"-10000px",width:"1px",height:"1px",overflow:"hidden"}})]})}function y(){let e=(0,i.use)(f);if(!e)throw Error("useTargetedEditsContext must be used within a TargetedEditsProvider");return e}try{f.displayName||(f.displayName="TargetedEditsContext")}catch{}try{g.displayName||(g.displayName="TargetedEditsProvider")}catch{}},96104:(e,t,n)=>{"use strict";n.d(t,{DY:()=>function e(t,n){switch(n.type){case"TOGGLE_TERMINAL_IS_COLLAPSED":{let{isCollapsed:e}=n;return{...t,isCollapsed:e}}case"TOGGLE_TERMINAL_PANE":{let{pane:e}=n;return{...t,pane:e}}case"COMPLETE_COMMAND":{let{history:e}=t,{task:a,exitCode:i}=n,r={...e[a],exitCode:i,channel:null,endTime:new Date},s={...e,[a]:r};return{...t,history:s}}case"START_COMMAND":{let{task:e}=n.command,a={...t.history,[e]:n.command};return{...t,history:a}}case"UPDATE_COMMAND":{let{type:e,task:a,...i}=n,r=t.history[a],s={...t.history[a],...i};if(r.stopped&&s.channel)return s.channel.stop("INT"),t;let o={...t.history,[a]:s};return{...t,history:o}}case"COLLAPSE_COMMAND":return e(t,{type:"UPDATE_COMMAND",task:n.task,collapsed:!0});case"EXPAND_COMMAND":return e(t,{type:"UPDATE_COMMAND",task:n.task,collapsed:!1});case"CLEAR_TASK":{let{task:e,command:a}=n,r={...t.history};return r[e]=i(e,a),{...t,history:r}}case"SET_TASK":{let{task:i,command:r}=n,s={...t.tasks};switch(i){case a.Build:s.build=r;break;case a.Deploy:s.run=r}return{...e(t,{type:"CLEAR_TASK",task:i,command:r}),tasks:s}}case"SET_TASKS":return{...t,tasks:n.tasks};case"SET_CODESPACE_DATA":{let{codespaceData:e}=n;return{...t,codespaceData:e}}case"SET_PREVIEW_URL":{let{previewUrl:e}=n;return{...t,previewUrl:e}}default:return t}},P_:()=>a,g4:()=>r});let a={Build:0,Deploy:1,Commit:2};function i(e,t){return{task:e,command:t??"",output:"",exitCode:null,channel:null,collapsed:!0,loading:!1,stopped:!1,startTime:null,endTime:null}}function r(){return{[a.Build]:i(a.Build),[a.Deploy]:i(a.Deploy),[a.Commit]:i(a.Commit)}}},97174:(e,t,n)=>{"use strict";n.d(t,{u:()=>k});var a=n(74848),i=n(73189),r=n(29731),s=n(80293),o=n(81960),l=n(34164),c=n(96540),d=n(50205),u=n(44569),m=n(97068),p=n(11937),h=n(45800);function f(e,t){let n=e,a=e.closest("[role=list] li");a&&(n=a);let i=n.closest("[role=list]");if(!i)return;let r=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,e=>{if(!(e instanceof HTMLElement)||!e.id.includes("list-view-node"))return NodeFilter.FILTER_SKIP;let t=e.parentElement;for(;t&&t!==i;){if(t.id.includes("list-view-node"))return NodeFilter.FILTER_SKIP;t=t.parentElement}return NodeFilter.FILTER_ACCEPT}),s=r.firstChild(),o=0;for(;s!==n&&(s=r.nextNode(),!(++o>500)););let l="next"===t?r.nextNode():r.previousNode();for(;l instanceof HTMLElement&&l.parentElement?.closest("[role=list] li[aria-expanded=false]");)l="next"===t?r.nextNode():r.previousNode();return l instanceof HTMLElement?l:void 0}function g(e){let t=e.closest("[role=list]"),n=t?.querySelector("[role=list] li");return n instanceof HTMLElement?n:void 0}function y(e){let t=e.closest("[role=list]"),n=t?.querySelectorAll("[role=list] li");if(!n||n.length<1)return;let a=n[n.length-1];if(a instanceof HTMLElement)return a}function b(e,t){let n=[...(0,p.K1)(document.documentElement,{strict:!0,onlyTabbable:!0})],a=n.indexOf(e);return"next"===t?n[a+1]:n[a-1]}var x=n(75986),v=n(18377),w=n(53687),_=n(24347),S=n(61015),C=n(35220);let k=({children:e,hasDragHandle:t,isSelectable:n,onVariantChange:r=i.l,pluralUnits:o,selectedCount:l=0,singularUnits:u,title:m,titleHeaderTag:p,totalCount:h,variant:f=d.tp,...g})=>{let[y,b]=(0,s.N)(f);(0,c.useEffect)(()=>{r?.(y)},[r,y]);let k=(0,c.useMemo)(()=>c.Children.toArray(e).length,[e]);return(0,a.jsx)(x.JE,{children:(0,a.jsx)(S.y,{title:m,titleHeaderTag:p,children:(0,a.jsx)(C.H,{variant:y,setVariant:b,children:(0,a.jsx)(_.W,{countOnPage:k,selectedCount:l,totalCount:h,singularUnits:u,pluralUnits:o,isSelectable:n,hasDragHandle:t,children:(0,a.jsx)(w.e,{children:(0,a.jsx)(v.w,{children:(0,a.jsx)(E,{...g,children:e})})})})})})})},E=({ariaLabelledBy:e,as:t,children:n,className:i,emptyState:s,itemsListClassName:d,itemsListStyle:v,listRef:w,metadata:_,role:k,strictFocusZone:E,...j})=>{let{idPrefix:N}=(0,x.If)(),{title:A,titleHeaderTag:I}=(0,S.t)(),{variant:T}=(0,C.e)(),{containerRef:R}=function(e=!0){let t=void 0===e||e,n=m.z0.ArrowVertical|m.z0.HomeAndEnd|m.z0.PageUpDown|m.z0.Tab,a=(0,u.zw)()?n|m.z0.JK:n,{containerRef:i}=(0,h.G)({strict:t,bindKeys:a,focusInStrategy:()=>{if(!i.current)return;let e=i.current.querySelector('[tabindex="0"]');return e?.closest("[role=list] li")||e},focusableElementFilter:e=>"list"!==e.getAttribute("role"),getNextFocusable:(e,n,a)=>{if(n instanceof HTMLElement){if("Tab"===a.key||"Tab"===a.code){if(a.shiftKey&&n.id.includes("list-view-node"))return b(n,"previous");let e=n.closest("[role=list] li");if(!e)return;let i=[...(0,p.K1)(e,{strict:t})],r=i.findIndex(e=>e.parentElement?.getAttribute("data-listview-component")==="trailing-badge"),s=i.findIndex(e=>"selection-input"===e.getAttribute("data-listview-component"));r>=0&&s>=0&&(i.splice(r,0,i[s]),i.splice(s+1,1));let o=i.indexOf(a.target);return o!==i.length-1||a.shiftKey?o>0?a.shiftKey?i[o-1]:i[o+1]:void 0:b(n,"next")}if("previous"===e)return f(n,e)||g(n);if("next"===e)return f(n,e)||y(n);if("start"===e)return g(n);if("end"===e)return y(n)}}});return{containerRef:i}}(E),[M,L]=(0,c.useState)(!0);(0,c.useEffect)(()=>{w&&(w.current=R.current)},[R,w]),(0,c.useLayoutEffect)(()=>{R.current&&L(Array.from(R.current.querySelectorAll("li")).some(e=>{let t=e.parentElement;for(;t&&t!==R.current;){if("UL"===t.tagName||"OL"===t.tagName)return!1;t=t.parentElement}return!0}))},[R,n]);let P=e??`${N}-list-view-container-title`,D=s&&!M;return(0,a.jsxs)("div",{id:`${N}-list-view-container`,className:(0,l.$)("ListView-module__container--rxCWy",i),children:[!e&&(0,a.jsx)(o.A,{className:"sr-only",as:I,id:P,...(0,r.G)("list-view-title"),children:A}),_,(0,a.jsx)(t||(M?"ul":"div"),{className:(0,l.$)("ListView-module__ul--A_8jF",d),style:v,ref:R,"aria-labelledby":M?P:void 0,tabIndex:-1,role:k??M?"list":void 0,"data-listview-component":"items-list","data-density":T,...(0,r.G)("list-view-items"),...j,children:D?s:n})]})};try{k.displayName||(k.displayName="ListView")}catch{}try{E.displayName||(E.displayName="ListViewContainer")}catch{}},98994:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var a=n(74848),i=n(29731),r=n(34164),s=n(35220);function o({children:e,style:t,className:n}){let{variant:o}=(0,s.e)();return(0,a.jsx)("div",{...(0,i.G)("list-view-item-description"),className:(0,r.$)("Description-module__container--Zwqe8","compact"===o&&"Description-module__compact--Lw6nW",n),style:t,children:e})}try{o.displayName||(o.displayName="ListItemDescription")}catch{}}},e=>{e.O(0,[3088,82216,43934,67733,90780,97068,6488,78298,31475,40746,40799,30587,99418,72471,4712,55229,95768,33915,62469,51220,28546,40420,67602,26744,57026,48287,46203,46252,11153,85083,59191,59672,83494,36683,87670,40771,66990,29665,4817,91232,37294,2635,34364,35843,77971],()=>e(e.s=79941)),e.O()}]);
//# sourceMappingURL=workbench-c82bf7157358.js.map